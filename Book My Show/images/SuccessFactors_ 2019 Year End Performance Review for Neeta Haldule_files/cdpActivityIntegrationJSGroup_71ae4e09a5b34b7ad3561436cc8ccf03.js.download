/*
 !! BEGIN /ui/cdp/js/transcript/ActivityDetailPageLayout.js !!! !! BEGIN /ui/cdp/js/transcript/ActivityDetailModel.js !!! !! BEGIN /ui/cdp/js/CDPCommonComponents.js !!! !! BEGIN /ui/cdp/js/transcript/ActivityCommonComponent.js !!! !! BEGIN /ui/cdp/js/transcript/ActivityDetailPortlet.js !!! !! BEGIN /ui/cdp/js/transcript/ActivityInputComponents.js !!! !! BEGIN /ui/cdp/js/transcript/ActivityDetailController.js !!! !! BEGIN /ui/learning/js/learningCommon.js !!! !! BEGIN /ui/cdp/js/IntegrationConstants.js !!!*/
function LearningActivityDetailPageLayout(a,b){this.register();this.init(a,b)}
LearningActivityDetailPageLayout.prototype=function(){return set(new Component,{init:function(a,b){this._config=b;this._model=a;this._model.addEventListener("activityLoaded",this);this._model.addEventListener("messageEvents",this);this._model.addEventListener("fieldError",this);this._model.addEventListener("ajaxCallStart",this);this._model.addEventListener("ajaxCallEnd",this);this._model.addEventListener("activitySaved",this);this._model.addEventListener("hideMessage",this)},_loadPage:function(){this.toolbar||
(this.toolbar=new ToolbarLayout(this._model,this._config),this.toolbar.render(this._config.toolbar));this.toolbar.resetToolbar();this.portletLayout&&this.portletLayout.cleanup();this.portletLayout=new PortletLayout(this._model);this.portletLayout.render(this._config.body);this._config.userName&&this._model.fullName&&($(this._config.userName).innerHTML=juic.escapeHTML(this._model.fullName));this._config.returnDivId&&this._model.fullName&&($(this._config.returnDivId).innerHTML=sfMessageFormat.format(MSGS.DEVELOPMENT_TRANSCRIPT_RETURN_LAS,
juic.escapeHTML(this._model.fullName)));var a=null;try{if("undefined"!=typeof jQuery){for(var b=jQuery(".calendarFieldOuter"),c=0;c<b.length;c++)jQuery(b[c]).addClass(" transcriptLearningInputItem"),jQuery(b[c]).parent().parent().find(".sfTH").addClass("calendarLabel");for(var d=jQuery("textarea.laEditArea"),c=0;c<d.length;c++)jQuery(d[c]).addClass(" transcriptLearningInputItem"),jQuery(d[c]).parent().parent().find(".sfTH").addClass("textAreaLabel");for(var e=jQuery(".cdpPortletBorder.activityUIConsistency select"),
c=0;c<e.length;c++)jQuery(e[c]).addClass(" transcriptLearningInputItem"),jQuery(e[c]).parent().parent().parent().parent().find(".sfTH").addClass("selectAreaLabel");for(var g=jQuery("input.laEditArea"),c=0;c<g.length;c++)jQuery(g[c]).addClass(" transcriptLearningInputItem"),jQuery(g[c]).parent().parent().find(".sfTH").addClass("inputAreaLabel");var h=jQuery("."+" transcriptLearningInputItem".trim());h&&0<h.length&&(a=h[0],jQuery(a).hasClass("calendarFieldOuter")&&(a=jQuery(a).find("a")[0]))}else if(null!=
document.querySelectorAll){b=document.querySelectorAll(".calendarFieldOuter");for(c=0;c<b.length;c++){b[c].className+=" transcriptLearningInputItem";var k=b[c].parentNode.previousSibling.className;b[c].parentNode.previousSibling.className=k+" calendarLabel"}d=document.querySelectorAll("textarea.laEditArea");for(c=0;c<d.length;c++)d[c].className+=" transcriptLearningInputItem",k=d[c].parentNode.previousSibling.className,d[c].parentNode.previousSibling.className=k+" textAreaLabel";e=document.querySelectorAll(".cdpPortletBorder.activityUIConsistency select");
for(c=0;c<e.length;c++)e[c].className+=" transcriptLearningInputItem",k=e[c].parentNode.parentNode.parentNode.previousSibling.className,e[c].parentNode.parentNode.parentNode.previousSibling.className=k+" selectAreaLabel";g=document.querySelectorAll("input.laEditArea");for(c=0;c<g.length;c++)g[c].className+=" transcriptLearningInputItem",k=g[c].parentNode.previousSibling.className,g[c].parentNode.previousSibling.className=k+" inputAreaLabel";(a=document.querySelector("."+" transcriptLearningInputItem".trim()))&&
0<=a.className.indexOf("calendarFieldOuter")&&(a=a.querySelector("a"))}null!=a&&"function"==typeof a.focus&&"function"==typeof a.getAttribute&&(a.focus(),window.location.hash="#"+a.getAttribute("name"))}catch(m){}},renderHtml:function(a){this.hambunContainer.renderHtml(a)},hideMessage:function(){$(this._config.sysmsg)&&($(this._config.sysmsg).innerHTML="")},showMessage:function(a){this._messager?(this._messager.setMessageType(a.type),this._messager.setSystemMessage(a.title),this._messager.setDetailMessage(a.detail)):
(this._messager=new SFSysMsg(a.type,a.title,a.detail),this._messager.render(this._config.sysmsg));if(!a.stay){var b=this;setTimeout(function(){$(b._config.sysmsg).innerHTML="";b._messager=null},this._messager.delay?this._messager.delay:2E3)}},showErroDialog:function(a){this.dialog||(this.dialog=new CDPErrorDialog);this.dialog.showDialog(a)},showLoadingBox:function(a){this.loadingBox||(this.loadingBox=new SFLoading);this.loadingBox.setMsg(a);SFOverlayMgr.showOverlay(this.loadingBox,!0)},hideLoadingBox:function(){this.loadingBox&&
this.loadingBox.hide()},handleEvent:function(a){switch(a.type){case "hideMessage":this.hideMessage();break;case "activityLoaded":this._loadPage();break;case "fieldError":this.showErroDialog(a);break;case "messageEvents":this.showMessage(a.msg);break;case "ajaxCallEnd":this.hideLoadingBox();break;case "ajaxCallStart":this.showLoadingBox(a.msg);break;case "activitySaved":var b="/xi/ui/cdp/pages/transcript/detail.xhtml?";getReturnLAListUrl&&getReturnLAListUrl instanceof Function&&(b+=getReturnLAListUrl());
b+="\x26activityId\x3d"+a.activityId;window.setLocation(b);break;case "action":a.newPageSize&&this._model.changePageSize(a.newPageSize);a.newPage&&this._model.gotoPage(a.newPage);break;default:assert(!0,a.type+" should not be handled by LearningActivityListPageLayout.")}}})}();function ToolbarLayout(a,b){this.register();this.init(a,b)}
ToolbarLayout.prototype=function(){return set(new Component,{init:function(a,b){this._model=a;this._config=b;this._model.addEventListener("resetToolbar",this);this._docToolbar||(this._docToolbar=new SFDocumentToolbarLayout);this._saveButton=new SFToolbarButton("save",MSGS.DEVELOPMENT_TRANSCRIPT_SAVE,"saveAction");this._saveButton.addEventListener("action",this);this._docToolbar.add(this._saveButton);this._docToolbar.addSeparator();this._cancelButton=new SFToolbarButton("cancel",MSGS.DEVELOPMENT_TRANSCRIPT_CANCEL,
"cancelAction");this._cancelButton.addEventListener("action",this);this._docToolbar.add(this._cancelButton);this._docToolbar.addSeparator();this._previewListButton=new SFToolbarButton("preview",MSGS.DEVELOPMENT_TRANSCRIPT_PRINT_PREVIEW,"previewAction");this._previewListButton.addEventListener("action",this);this._docToolbar.add(this._previewListButton);this._docToolbar.addSeparator();this._deleteButton=new SFToolbarButton("delete",MSGS.DEVELOPMENT_TRANSCRIPT_DELETE,"deleteAction");this._deleteButton.addEventListener("action",
this);this._docToolbar.add(this._deleteButton);if(this._model.isAuditTrailEnabled){this._docToolbar.addSeparator();this._changeHistoryButton=new SFToolbarButton("template",MSGS.DEVELOPMENT_TRANSCRIPT_AUDIT_BUTTON_CHANGE_HISTORY,"changeHistoryAction");this._changeHistoryButton.addEventListener("action",this);this._docToolbar.add(this._changeHistoryButton);var c=[{label:MSGS.DEVELOPMENT_TRANSCRIPT_AUDIT_BUTTON_CLOSE,eventName:"hide",btnType:"active"}];this._changeHistory=new ChangeHistory(this._model);
this._changeHistoryDlg=new SFDialog(MSGS.DEVELOPMENT_TRANSCRIPT_AUDIT_TITLE,this._changeHistory,c,850,550,!0);this._model.addEventListener("getAuditTrailStart",this);this._model.addEventListener("getAuditTrailEnd",this);this._model.addEventListener("getAuditTrailReady",this);this._model.addEventListener("getAuditTrailFailed",this)}this._model.enableDeepLink&&this._model.activity.isFromCatalog&&(this._docToolbar.addSeparator(),this._deeplinkButton=new SFToolbarButton("person_exists",MSGS.DEVELOPMENT_TRANSCRIPT_LABEL_DEEPLINK,
"deeplinkAction"),this._deeplinkButton.addEventListener("action",this),this._docToolbar.add(this._deeplinkButton));this._model.isPlateauEnabled&&this._model.activity.isFromCatalog&&(this._docToolbar.addSeparator(),this._moreDetailsButton=new SFToolbarButton("popup",MSGS.DEVELOPMENT_MORE_DETAILS_LABEL,"moreDetailsAction"),this._moreDetailsButton.addEventListener("action",this),this._docToolbar.add(this._moreDetailsButton))},renderHtml:function(a){this._docToolbar.renderHtml(a)},resetToolbar:function(){this._model.modified?
(this.enableButton(this._saveButton,!0),this.enableButton(this._cancelButton,!0)):(this.enableButton(this._saveButton,!1),this.enableButton(this._cancelButton,!1));this._model.isNew?(this.enableButton(this._previewListButton,!1),this.enableButton(this._deleteButton,!1),this._changeHistoryButton&&this.enableButton(this._changeHistoryButton,!1)):(this.enableButton(this._previewListButton,!0),this.enableButton(this._deleteButton,!0),this._changeHistoryButton&&this.enableButton(this._changeHistoryButton,
!0));for(var a=!1,b=!1,c=0;c<this._model.permission.length;c++)"create"==this._model.permission[c]?a=!0:"delete"==this._model.permission[c]&&(b=!0);a||this.enableButton(this._saveButton,a);a||this.enableButton(this._cancelButton,a);b||this.enableButton(this._deleteButton,b)},enableButton:function(a,b){a._enabled!=b&&a.setEnabled(b)},showLoadingBox:function(a){this.loadingBox||(this.loadingBox=new SFLoading("","#ff0000"));this.loadingBox.setMsg(a);SFOverlayMgr.showOverlay(this.loadingBox,!0)},hideLoadingBox:function(){this.loadingBox&&
this.loadingBox.hide()},handleEvent:function(a){if(a)switch(a.type){case "action":switch(a.actionCommand){case "saveAction":this.enableButton(this._saveButton,!1);this.enableButton(this._cancelButton,!1);this._model.saveActivity();break;case "cancelAction":confirm(MSGS.DEVELOPMENT_TRANSCRIPT_ABORT_CONFIRM)&&(this.enableButton(this._cancelButton,!1),this._model.cleanModification());break;case "deleteAction":confirm(MSGS.DEVELOPMENT_TRANSCRIPT_DELETE_CONFIRM)&&this._model.deleteActivity();break;case "previewAction":PrintPreview.openHtmlPreviewWindowWithParams("/xi/ui/cdp/pages/transcript/preview.xhtml",
"type\x3ddetail\x26activityId\x3d"+this._model.activityId,!0);break;case "changeHistoryAction":this._model.getAuditTrail();break;case "deeplinkAction":this._model.getDeeplink();break;case "moreDetailsAction":this._model.getMoreDetails()}break;case "resetToolbar":this.resetToolbar();break;case "getAuditTrailStart":this.showLoadingBox();break;case "getAuditTrailEnd":this.hideLoadingBox();break;case "getAuditTrailReady":this._changeHistoryDlg&&(SFOverlayMgr.showOverlay(this._changeHistoryDlg,!0),this._changeHistory.updateView());
break;case "getAuditTrailFailed":this._model.showMessage(a.msg)}}})}();function ChangeHistory(a){this.register();this._model=a}
ChangeHistory.prototype=function(){return set(new Component,{renderHtml:function(a){a.push("\x3cdiv id\x3d'"+this.id+"'\x3e");a.push("\x3c/div\x3e")},updateView:function(){var a=this._model.getAuditTrialData();if(a&&0<a.length){var b=[];b.push('\x3ctable style\x3d"margin-bottom: 0px;" cellspace\x3d"2" width\x3d"100%"\x3e');b.push('\x3cthead\x3e\x3ctr class\x3d"dataGrid"\x3e');b.push('\x3cth width\x3d"15%"\x3e'+MSGS.DEVELOPMENT_TRANSCRIPT_AUDIT_CHANGE_DATE+"\x3c/th\x3e");b.push('\x3cth width\x3d"15%"\x3e'+
MSGS.DEVELOPMENT_TRANSCRIPT_AUDIT_FIELD+"\x3c/th\x3e");b.push('\x3cth width\x3d"20%"\x3e'+MSGS.DEVELOPMENT_TRANSCRIPT_AUDIT_CHANGE_BY+"\x3c/th\x3e");b.push('\x3cth width\x3d"25%"\x3e'+MSGS.DEVELOPMENT_TRANSCRIPT_AUDIT_ORG_VALUE+"\x3c/th\x3e");b.push('\x3cth width\x3d"25%"\x3e'+MSGS.DEVELOPMENT_TRANSCRIPT_AUDIT_NEW_VALUE+"\x3c/th\x3e");b.push("\x3c/tr\x3e\x3c/thead\x3e");var c;for(c=0;c<a.length;c++){var d=a[c];0!==c%2?b.push('\x3ctr class\x3d"a"\x3e'):b.push('\x3ctr class\x3d"b"\x3e');b.push("\x3ctd\x3e"+
Util.escapeHTML(d.changedDate)+"\x3c/td\x3e");b.push("\x3ctd\x3e"+Util.escapeHTML(d.field)+"\x3c/td\x3e");b.push("\x3ctd\x3e"+Util.escapeHTML(d.changedBy)+"\x3c/td\x3e");b.push("\x3ctd\x3e"+Util.escapeHTML(d.originalValue)+"\x3c/td\x3e");b.push("\x3ctd\x3e"+Util.escapeHTML(d.newValue)+"\x3c/td\x3e");b.push("\x3c/tr\x3e")}b.push("\x3c/table\x3e");$(this.id).innerHTML=b.join("")}else this.emptyListMessager||(this.emptyListMessager=new SFSysMsg("alert",MSGS.DEVELOPMENT_TRANSCRIPT_ERR_NO_AUDIT)),this.emptyListMessager.render(this.id)},
cleanup:function(){this.unregister()}})}();function PortletLayout(a){this.register();this.init(a)}
PortletLayout.prototype=function(){return set(new Component,{init:function(a){this._model=a;this.leftPortletList=[];this.rightPortletList=[];this.maxColumn=1;for(a=0;this._model.layout&&a<this._model.layout.length;a++)portlet=this._model.layout[a],portlet.column&&portlet.column>this.maxColumn&&(this.maxColumn=portlet.column);var b={};1==this.maxColumn&&(b.text={},b.text.editClass="laTextInputArea");for(a=0;this._model.layout&&a<this._model.layout.length;a++)portlet=this._model.layout[a],!portlet.column||
1>=portlet.column?this.leftPortletList.push(new LearningActivityPortlet(this._model,portlet,b)):this.rightPortletList.push(new LearningActivityPortlet(this._model,portlet,b));this.sortList();this._model.isTranscriptFancyPodDisabled||this.leftPortletList.splice(0,0,new HeadlineBlock(this._model))},sortList:function(){},renderHtml:function(a){var b;a.push("\x3cform name\x3d'CDP_DETAIL_LEARNING_FORM'\x3e\x3cdiv id\x3d'"+this.getMsgId()+"'\x3e\x3c/div\x3e");a.push("\x3ctable width\x3d'98%'\x3e\x3ctr\x3e");
var c=Math.floor(1/this.maxColumn*100);a.push("\x3ctd width\x3d'",c,'%\' style\x3d"padding:6px;" valign\x3d"top"\x3e');for(b=0;this.leftPortletList&&b<this.leftPortletList.length;b++)this.leftPortletList[b].renderHtml(a);a.push("\x3c/td\x3e");var d=100-c;for(b=2;b<=this.maxColumn;b++){b==this.maxColumn&&(c=d);a.push("\x3ctd width\x3d'",c,'%\' style\x3d"padding:6px;vertical-align:top;" valign\x3d"top"\x3e');var e;for(e=0;this.rightPortletList&&e<this.rightPortletList.length;e++)this.rightPortletList[e].getPortlet().column==
b&&this.rightPortletList[e].renderHtml(a);d-=c;a.push("\x3c/td\x3e")}a.push("\x3c/tr\x3e\x3c/table\x3e");a.push("\x26#160;\x3cbr\x3e\x3c/form\x3e")},getMsgId:function(){return this.id+":msg"},cleanup:function(){var a;for(a=0;this.leftPortletList&&a<this.leftPortletList.length;a++)this.leftPortletList[a].cleanup();for(a=0;this.rightPortletList&&a<this.rightPortletList.length;a++)this.rightPortletList[a].cleanup();this.unregister()}})}();
function ActivityDetailEditor(a,b){this.register();this.init(a,b)}
ActivityDetailEditor.prototype=function(){return set(new Component,{init:function(a,b){this._config=b;this.resizeWindow();this._model=a;this._model.addEventListener("messageEvents",this);this._model.addEventListener("ajaxCallStart",this);this._model.addEventListener("ajaxCallEnd",this);this._model.addEventListener("activitySaved",this);this._model.addEventListener("fieldError",this)},resizeWindow:function(){this._width=this._config&&this._config.width?this._config.width:800;this._height=this._config&&
this._config.height?this._config.height:450;var a=this._getMinorNoZeroValue(window.document.documentElement.clientHeight,window.document.body.clientHeight),b=this._getMinorNoZeroValue(window.document.documentElement.clientWidth,window.document.body.clientWidth);this._width>b&&(this._width=b-60);this._height>a&&(this._height=a-60)},_getMinorNoZeroValue:function(){for(var a=[],b=0;b<arguments.length;b++)0!==arguments[b]&&a.push(arguments[b]);return Math.min.apply(null,a)},loadPage:function(){this.portletLayout=
new PortletLayout(this._model);this._messager=new SFSysMsg("info",MSGS.COMMON_loading,"");this._detailPageDlg||(this._detailPageDlg=new SFDialog("",this.portletLayout,[{label:MSGS.DEVELOPMENT_TRANSCRIPT_SAVE,eventName:"saveAction",active:!0},{label:MSGS.DEVELOPMENT_TRANSCRIPT_CANCEL,eventName:"hide",active:!1}],this._width,this._height,!0),this._detailPageDlg.addEventListener("action",this));this.show()},renderHtml:function(a){},show:function(){this._model.editorShow=!1;if(this._detailPageDlg){this._model.isNew?
this._detailPageDlg.setDialogTitle(MSGS.DEVELOPMENT_TRANSCRIPT_ADD_ACTIVITY):this._detailPageDlg.setDialogTitle(MSGS.DEVELOPMENT_TRANSCRIPT_EDIT_LA);SFOverlayMgr.showOverlay(this._detailPageDlg,!0);var a=null;try{if("undefined"!=typeof jQuery){for(var b=jQuery(".calendarFieldOuter"),c=0;c<b.length;c++)jQuery(b[c]).addClass(" transcriptLearningInputItem"),jQuery(b[c]).parent().parent().find(".sfTH").addClass("calendarLabel");for(var d=jQuery("textarea.laEditArea"),c=0;c<d.length;c++)jQuery(d[c]).addClass(" transcriptLearningInputItem"),
jQuery(d[c]).parent().parent().find(".sfTH").addClass("textAreaLabel");for(var e=jQuery(".cdpPortletBorder.activityUIConsistency select"),c=0;c<e.length;c++)jQuery(e[c]).addClass(" transcriptLearningInputItem"),jQuery(e[c]).parent().parent().parent().parent().find(".sfTH").addClass("selectAreaLabel");for(var g=jQuery("input.laEditArea"),c=0;c<g.length;c++)jQuery(g[c]).addClass(" transcriptLearningInputItem"),jQuery(g[c]).parent().parent().find(".sfTH").addClass("inputAreaLabel");var h=jQuery("."+
" transcriptLearningInputItem".trim());h&&0<h.length&&(a=h[0],jQuery(a).hasClass("calendarFieldOuter")&&(a=jQuery(a).find("a")[0]))}else if(null!=document.querySelectorAll){b=document.querySelectorAll(".calendarFieldOuter");for(c=0;c<b.length;c++){b[c].className+=" transcriptLearningInputItem";var k=b[c].parentNode.previousSibling.className;b[c].parentNode.previousSibling.className=k+" calendarLabel"}d=document.querySelectorAll("textarea.laEditArea");for(c=0;c<d.length;c++)d[c].className+=" transcriptLearningInputItem",
k=d[c].parentNode.previousSibling.className,d[c].parentNode.previousSibling.className=k+" textAreaLabel";e=document.querySelectorAll(".cdpPortletBorder.activityUIConsistency select");for(c=0;c<e.length;c++)e[c].className+=" transcriptLearningInputItem",k=e[c].parentNode.parentNode.parentNode.previousSibling.className,e[c].parentNode.parentNode.parentNode.previousSibling.className=k+" selectAreaLabel";g=document.querySelectorAll("input.laEditArea");for(c=0;c<g.length;c++)g[c].className+=" transcriptLearningInputItem",
k=g[c].parentNode.previousSibling.className,g[c].parentNode.previousSibling.className=k+" inputAreaLabel";(a=document.querySelector("."+" transcriptLearningInputItem".trim()))&&0<=a.className.indexOf("calendarFieldOuter")&&(a=a.querySelector("a"))}null!=a&&"function"==typeof a.focus&&"function"==typeof a.getAttribute&&(a.focus(),window.location.hash="#"+a.getAttribute("name"))}catch(m){}this._model.editorShow=!0}},hideMessage:function(){},showMessage:function(a){var b=this.portletLayout.getMsgId();
this.isMessagerRendered||(this._messager.render(b),this.isMessagerRendered=!0);this._messager&&$(b)&&(this._messager.setMessageType(a.type),this._messager.setSystemMessage(a.title),this._messager.setDetailMessage(a.detail))},showErroDialog:function(a){this.dialog||(this.dialog=new CDPErrorDialog);this.dialog.showDialog(a)},showLoadingBox:function(a){this.loadingBox||(this.loadingBox=new SFLoading);this.loadingBox.setMsg(a);SFOverlayMgr.showOverlay(this.loadingBox,!0);this._detailPageDlg&&this._detailPageDlg.disableButtons()},
hideLoadingBox:function(){this.loadingBox&&this.loadingBox.hide();this._detailPageDlg&&this._detailPageDlg.enableButtons()},hide:function(){this._detailPageDlg.close();this._model.editorShow=!1},setFocus:function(a){if(a=juic.$("namedAnchor_"+a.id))a.focus(),window.location.hash="#"+a.name},handleEvent:function(a){switch(a.type){case "fieldError":this.showErroDialog(a);break;case "messageEvents":this.showMessage(a.msg);break;case "ajaxCallEnd":this.hideLoadingBox();break;case "ajaxCallStart":this.showLoadingBox(a.msg);
break;case "activitySaved":message={type:"info",title:MSGS.DEVELOPMENT_TRANSCRIPT_EVENT_SAVE_OK,detail:"",stay:!0};this._model.editorShow&&this.showMessage(message);this.dispatchEvent(a);break;case "action":switch(a.actionCommand){case "saveAction":this._model.saveActivity();break;case "cancelAction":this.hide()}break;default:assert(!0,a.type+" should not be handled by LearningActivityListPageLayout.")}},cleanup:function(){this._messager&&this._messager.cleanup();this.portletLayout&&this.portletLayout.cleanup();
this.unregister()}})}();function ActivityDetailModel(){this.init()}
ActivityDetailModel.prototype=function(){return set(new EventTarget,{init:function(){this.printMode=this.modified=!1;this.isNew=!0;this.formSubjId="";this.param={}},setFormSubjId:function(a){this.formSubjId=a},setDao:function(a){this._dao=a},setActivityId:function(a){a&&""!==a&&(this.isNew&&this.activity&&(this.activity.id=a),this.activityId=a,this.isNew=!1)},setParam:function(a,b){this.param[a]=b},setLoginUserId:function(a){this.loginUserId=a},setUserId:function(a){this.selectedUserId=a},setPrintMode:function(a){this.printMode=
a},setExtraData:function(a){this.extraData=a},deleteActivity:function(){this.modified||this.hideMessage();var a=JSON.stringify({id:this.activityId,formSubjId:this.activity.assignee}),b={model:this,callback:function(a){b.model.dispatch("ajaxCallEnd");a=eval("("+a+")");a.success?returnToLAList&&returnToLAList instanceof Function?returnToLAList():window.setLocation("/xi/ui/cdp/pages/transcript/transcript.xhtml"):b.model.dispatch("messageEvents",{msg:{type:"error",title:MSGS.DEVELOPMENT_TRANSCRIPT_CONNECTION_FAIL,
detail:a.message,stay:!0}});b.model.modified=!1},errorHandler:function(a,d){b.model.dispatch("ajaxCallEnd");b.model.dispatch("messageEvents",{msg:{type:"error",title:MSGS.DEVELOPMENT_TRANSCRIPT_CONNECTION_FAIL,detail:a,stay:!0}})},exceptionHandler:function(a,d){b.model.dispatch("ajaxCallEnd");b.model.dispatch("messageEvents",{msg:{type:"error",title:MSGS.DEVELOPMENT_TRANSCRIPT_CONNECTION_FAIL,detail:a,stay:!0}})},timeout:12E4};this.dispatch("ajaxCallStart",{msg:MSGS.DEVELOPMENT_TRANSCRIPT_EVENT_SAVE});
this._dao.deleteTranscript(a,b)},deleteCertification:function(a){this.modified||this.hideMessage();var b=JSON.stringify({id:this.activityId,certId:a,selectedUserId:this.activity.assignee}),c={certId:a,model:this,callback:function(a){c.model.dispatch("ajaxCallEnd");a=eval("("+a+")");a.success?(c.model._removeCertification(c.certId),c.model.dispatch("messageEvents",{msg:{type:"info",title:MSGS.DEVELOPMENT_TRANSCRIPT_EVENT_DELETE_OK,detail:a.message,stay:!0}})):c.model.dispatch("messageEvents",{msg:{type:"error",
title:MSGS.DEVELOPMENT_TRANSCRIPT_EVENT_DELETE_FAIL,detail:a.message,stay:!0}});c.model.modified=!1},errorHandler:function(a,b){c.model.dispatch("ajaxCallEnd");c.model.dispatch("messageEvents",{msg:{type:"error",title:MSGS.DEVELOPMENT_TRANSCRIPT_CONNECTION_FAIL,detail:a,stay:!0}})},exceptionHandler:function(a,b){c.model.dispatch("ajaxCallEnd");c.model.dispatch("messageEvents",{msg:{type:"error",title:MSGS.DEVELOPMENT_TRANSCRIPT_CONNECTION_FAIL,detail:a,stay:!0}})},timeout:12E4};this.dispatch("ajaxCallStart",
{msg:MSGS.DEVELOPMENT_TRANSCRIPT_EVENT_DELETE});this._dao.deleteCertification(b,c)},getDeeplink:function(){var a=JSON.stringify({id:this.activityId,selectedUserId:this.activity.assignee}),b={model:this,callback:function(a){b.model.dispatch("ajaxCallEnd");a=eval("("+a+")");a.success?a.plateauEnabled?window.location="/xi/ui/learning/pages/learning.xhtml?destUrl\x3d"+encodeURIComponent(a.deepLink):openStandardWindow(a.deepLink):b.model.dispatch("messageEvents",{msg:{type:"error",title:MSGS.DEVELOPMENT_TRANSCRIPT_EVENT_DEEPLINK_FAIL,
detail:a.message,stay:!0}});b.model.modified=!1},errorHandler:function(a,d){b.model.dispatch("ajaxCallEnd");b.model.dispatch("messageEvents",{msg:{type:"error",title:MSGS.DEVELOPMENT_TRANSCRIPT_CONNECTION_FAIL,detail:a,stay:!0}})},exceptionHandler:function(a,d){b.model.dispatch("ajaxCallEnd");b.model.dispatch("messageEvents",{msg:{type:"error",title:MSGS.DEVELOPMENT_TRANSCRIPT_CONNECTION_FAIL,detail:a,stay:!0}})},timeout:12E4};this.dispatch("ajaxCallStart",{msg:MSGS.DEVELOPMENT_TRANSCRIPT_EVENT_DEEPLINK});
this._dao.getDeepLink(a,b)},getMoreDetails:function(){var a=JSON.stringify({id:this.activityId,selectedUserId:this.activity.assignee}),b={model:this,callback:function(a){b.model.dispatch("ajaxCallEnd");a=eval("("+a+")");a.success?openChromelessWindow(a.detailLink):b.model.dispatch("messageEvents",{msg:{type:"error",title:MSGS.DEVELOPMENT_TRANSCRIPT_EVENT_MOREDETAILS_FAIL,detail:a.message,stay:!0}});b.model.modified=!1},errorHandler:function(a,d){b.model.dispatch("ajaxCallEnd");b.model.dispatch("messageEvents",
{msg:{type:"error",title:MSGS.DEVELOPMENT_TRANSCRIPT_CONNECTION_FAIL,detail:a,stay:!0}})},exceptionHandler:function(a,d){b.model.dispatch("ajaxCallEnd");b.model.dispatch("messageEvents",{msg:{type:"error",title:MSGS.DEVELOPMENT_TRANSCRIPT_CONNECTION_FAIL,detail:a,stay:!0}})},timeout:12E4};this.dispatch("ajaxCallStart",{msg:MSGS.DEVELOPMENT_TRANSCRIPT_EVENT_MOREDETAILS});this._dao.getMoreDetails(a,b)},saveActivity:function(){this.modified||this.hideMessage();var a=this.activity;!a.assignee&&this.selectedUserId&&
(a.assignee=this.selectedUserId);a.formSubjId=this.formSubjId;var a=JSON.stringify(a),b={model:this,callback:function(a){b.model.dispatch("ajaxCallEnd");0<=a.indexOf('"')&&(a=a.replace(RegExp('"',"g"),"'"));a=a.replace(RegExp("\r\n","g"),"");a=eval("("+a+")");a.success?(b.model.dispatch("activitySaved",{isNew:b.model.isNew,activityId:void 0==a.id?0:a.id,detail:a.message,errorMap:a.messageField}),b.model.dispatch("resetToolbar"),b.model.modified=!1,a.id&&b.model.setActivityId(a.id)):(b.model.dispatch("fieldError",
{errorMap:a.messageField}),b.model.dispatch("messageEvents",{msg:{type:"error",title:MSGS.DEVELOPMENT_TRANSCRIPT_EVENT_SAVE_FAIL,detail:a.message,stay:!0}}))},errorHandler:function(a,d){d&&d.errorCode&&"SECURITYSCANNER"===d.errorCode&&(a=MSGS.COMMON_SECURITY_SCANNER_EXCEPTION_CONVERTER_ERROR+" "+a);b.model.dispatch("ajaxCallEnd");b.model.dispatch("messageEvents",{msg:{type:"error",title:MSGS.DEVELOPMENT_TRANSCRIPT_CONNECTION_FAIL,detail:a,stay:!0}})},exceptionHandler:function(a,d){b.model.dispatch("ajaxCallEnd");
b.model.dispatch("messageEvents",{msg:{type:"error",title:MSGS.DEVELOPMENT_TRANSCRIPT_CONNECTION_FAIL,detail:a,stay:!0}})},timeout:12E4};this.dispatch("ajaxCallStart",{msg:"Saving..."});this._dao.updateTranscript(a,b)},loadActivity:function(){var a={model:this,callback:function(b){a.model.dispatch("ajaxCallEnd");b=eval("("+b+")");b.success?(a.model._setData(b),a.model.dispatch("activityLoaded"),a.model.modified=!1,!0===a.model.pageAccessAudit&&void 0!==window.PageAccess&&PageAccess.track([{targetUserId:a.model.selectedUserId,
targetResourceId:b.selectedPlanId,targetResourceSubId:a.model.activityId}])):a.model.dispatch("messageEvents",{msg:{type:"error",title:MSGS.DEVELOPMENT_TRANSCRIPT_EVENT_LOAD_FAIL,detail:b.message,stay:!0}})},errorHandler:function(b,d){a.model.dispatch("ajaxCallEnd");a.model.dispatch("messageEvents",{msg:{type:"error",title:MSGS.DEVELOPMENT_TRANSCRIPT_CONNECTION_FAIL,detail:b,stay:!0}})},exceptionHandler:function(b,d){a.model.dispatch("ajaxCallEnd");a.model.dispatch("messageEvents",{msg:{type:"error",
title:MSGS.DEVELOPMENT_TRANSCRIPT_CONNECTION_FAIL,detail:b,stay:!0}})},timeout:12E4},b;this.pageAccessAudit=void 0;this.dispatch("ajaxCallStart",{msg:MSGS.DEVELOPMENT_TRANSCRIPT_EVENT_LOAD});this.activityId&&""!==this.activityId?(b=JSON.stringify({id:this.activityId,selectedUserId:this.selectedUserId,formSubjId:this.formSubjId}),this.pageAccessAudit=!0,this._dao.getTranscript(b,a)):this.selectedUserId&&""!==this.selectedUserId?(this.param.selectedUserId=this.selectedUserId,this.param.formSubjId=this.formSubjId,
b=JSON.stringify(this.param),this._dao.createTranscript(b,a)):this.extraData&&(b={ext_data_ma:this.extraData},b.formSubjId=this.formSubjId,b=JSON.stringify(b),this._dao.createTranscript(b,a))},_removeCertification:function(a){if(this.activity){this.activity.certifications||(this.activity.certifications=[]);for(var b=0;b<this.activity.certifications.length;b++)if(this.activity.certifications[b].id==a){this.activity.certifications.splice(b,1);break}this.oldActivity||(this.oldActivity={});this.oldActivity.certifications=
eval("("+JSON.stringify(this.activity.certifications)+")")}this.dispatch("CertificationUpdated")},updateCertification:function(a,b){this.modified||this.hideMessage();this.modified=!0;if(this.activity){this.activity.certifications||(this.activity.certifications=[]);for(var c=0,d=!1;c<this.activity.certifications.length;c++)if(this.activity.certifications[c].id==a.id){for(var e in a)e&&void 0!=a[e]&&(this.activity.certifications[c][e]=a[e]);d=!0;break}d||this.activity.certifications.push(a);b?(this.modified=
!1,this.oldActivity||(this.oldActivity={}),this.oldActivity.certifications=eval("("+JSON.stringify(this.activity.certifications)+")"),this.dispatch("CertificationUpdated")):this.dispatch("messageEvents",{msg:{type:"alert",title:MSGS.DEVELOPMENT_TRANSCRIPT_EVENT_CHANGE_TITLE,detail:MSGS.DEVELOPMENT_TRANSCRIPT_EVENT_CHANGE_DESC,stay:!0}});this.dispatch("resetToolbar")}},modifyCertification:function(a){this.updateCertification(a,!1)},getFieldMeta:function(a){for(var b,c=0;c<this.meta.length;c++)this.meta[c].id==
a&&(b=this.meta[c]);return b},cleanModification:function(){this.hideMessage();this.modified=!1;for(var a in this.oldActivity)this.activity[a]=eval("("+JSON.stringify(this.oldActivity[a])+")");this.dispatch("activityLoaded");this.dispatch("resetToolbar")},modifyActivity:function(a){var b=a.field;a=a.value;this.oldActivity||(this.oldActivity={});this.oldActivity[b]||(this.oldActivity[b]=eval("("+JSON.stringify(this.activity[b])+")"));this.activity[b]=a;this.dispatch("messageEvents",{msg:{type:"alert",
title:MSGS.DEVELOPMENT_TRANSCRIPT_EVENT_CHANGE_TITLE,detail:MSGS.DEVELOPMENT_TRANSCRIPT_EVENT_CHANGE_DESC,stay:!0}});this.modified=!0;this.dispatch("resetToolbar")},_setData:function(a){a.data?(this.activity=a.data,this.enableDeepLink=a.deepLinkEnable,this.isSpellCheck=a.isSpellCheck,this.isLegalScan=a.isLegalScan,this.isCoachingAdvisor=a.isCoachingAdvisor):this.activity={};this.activity.certifications&&(this.oldActivity||(this.oldActivity={}),this.oldActivity.certifications=eval("("+JSON.stringify(this.activity.certifications)+
")"));a.objectives&&(this.objectives=a.objectives);if(a.meta){this.meta=a.meta;var b;for(b=0;b<this.meta.length;b++)"status"==this.meta[b].id&&(this.statusArray=this.meta[b].values)}a.layout&&(this.layout=a.layout);a.permission&&(this.permission=a.permission);a.fullName&&(this.fullName=a.fullName);this.extraData&&(this.activity.ext_data_ma=this.extraData);this.isAuditTrailEnabled=void 0!=a.isAuditTrailEnabled?a.isAuditTrailEnabled:!1;this.isPlateauEnabled=void 0!=a.plateauEnabled?a.plateauEnabled:
!1;this.isTranscriptFancyPodDisabled=void 0!=a.isTranscriptFancyPodDisabled?a.isTranscriptFancyPodDisabled:!1},hideMessage:function(){this.dispatch("hideMessage")},showMessage:function(a){this.dispatch("messageEvents",{msg:a})},_setAuditTrialData:function(a){this._auditTrialData=a.data},getAuditTrialData:function(){return this._auditTrialData},getAuditTrail:function(){var a=JSON.stringify({id:this.activityId}),b={model:this,callback:function(a){a=eval("("+a+")");b.model.dispatch("getAuditTrailEnd");
a.success?(b.model._setAuditTrialData(a),b.model.dispatch("getAuditTrailReady")):b.model.dispatch("getAuditTrailFailed",{msg:{type:"error",title:MSGS.DEVELOPMENT_TRANSCRIPT_CONNECTION_FAIL,detail:a.message,stay:!0}})},errorHandler:function(a,d){b.model.dispatch("getAuditTrailEnd");b.model.dispatch("getAuditTrailFailed",{msg:{type:"error",title:MSGS.DEVELOPMENT_TRANSCRIPT_CONNECTION_FAIL,detail:a,stay:!0}})},exceptionHandler:function(a,d){b.model.dispatch("getAuditTrailEnd");b.model.dispatch("getAuditTrailFailed",
{msg:{type:"error",title:MSGS.DEVELOPMENT_TRANSCRIPT_CONNECTION_FAIL,detail:a,stay:!0}})},timeout:12E4};this.dispatch("getAuditTrailStart",{msg:MSGS.DEVELOPMENT_TRANSCRIPT_EVENT_LOAD});this._dao.getTranscriptAuditTrail(a,b)}})}();var CDPGlobalParamBean={setParams:function(a){this.params={};for(var b in a)this.params[b]=a[b]},get:function(a){assert(this.params,"CDPGlobalParamBean was not initiated");return this.params[a]}};
function CDPHtmlSection(a,b){this.register();this._value=null==a||void 0==a?"":a;this._isDiv=b&&void 0!=b.isDiv?b.isDiv:!0;this._style=b&&void 0!=b.style&&b.style?"class\x3d'"+b.style+"'":"";this.init()}
CDPHtmlSection.prototype=function(){return set(new Component,{init:function(){this._container=this._isDiv?"div":"span"},renderHtml:function(a){a.push("\x3c"+this._container+" id\x3d'"+this.id+"' "+this._style+"\x3e");this._renderView(a);a.push("\x3c/"+this._container+"\x3e")},_renderView:function(a){a.push(this._value)},setValue:function(a){this._value=a;a=[];this._renderView(a);$(this.id)&&($(this.id).innerHTML=a.join(""))}})}();
function CDPErrorDialog(a){this.register();this.dlg_title=a&&a.title?a.title:MSGS.COMMON_Err;this.dlg_note=a&&a.note?a.note:MSGS.DEVELOPMENT_TRANSCRIPT_ERR_DESC}
CDPErrorDialog.prototype=function(){return set(new Component,{showDialog:function(a){if(a&&a.errorMap){a.detail&&(this.dlg_note=a.detail);errorMap=a.errorMap;errorMsg=[];errorMsg.push("\x3cdiv style\x3d'padding: 20px 40px 10pt;line-height:130%;font-weight:bold'\x3e");errorMsg.push(this.dlg_note);errorMsg.push("\x3c/div\x3e");errorMsg.push("\x3cdiv style\x3d'padding: 0 40px 0pt;line-height:130%;'\x3e");for(i=0;i<errorMap.length;i++)errorMap[i].value&&errorMsg.push(errorMap[i].value+"\x3cbr\x3e");errorMsg.push("\x3c/div\x3e");
this.dialog&&this.dialogContent||(this.dialogContent=new CDPHtmlSection,this.dialog=new SFDialog(this.dlg_title,this.dialogContent,[{label:MSGS.COMMON_Close,active:!0,enabled:!0,eventName:"hide"}],600,300));this.dialogContent.setValue(errorMsg.join(""));SFOverlayMgr.showOverlay(this.dialog,!0)}}})}();
function CDPCalendarField(a,b){this.register();this.setValue(a);this._writable=void 0!=b.editable?b.editable:!0;this._min=b.min?b.min:1901;this._max=b.max?b.max:2099;this._readOnlyClass=void 0!=b.readOnlyClass?b.readOnlyClass:"readonly";b.validator&&(this._validator=b.validator,this._validatorActions=[])}
CDPCalendarField.prototype=function(){return set(new ComponentLegacy,{setValue:function(a){a&&0!=a.trim().length?(a=ISO8601Dateformatter.parse(a),this.value=dateformatter.format(a)):this.value=MSGS.COMMON_DateFormatExample;if(a=$(this.id))this._writable?(a.value=this.value,a.previousSibling.firstChild.nodeValue=Util.escapeHTML(this.value)):a.innerHTML=Util.escapeHTML(this.value)},getValue:function(){var a;a=this._writable?$(this.id)?$(this.id).value:this.value:this.value;if(a==MSGS.COMMON_DateFormatExample)return"";
a=dateformatter.parse(a);var b=null;a&&(b=ISO8601Dateformatter.format(a));return b},showErrorMessage:function(a){$(this.id);var b="";$(this.id+"_error")&&(b=$(this.id+"_error"),b.innerHTML="");for(var c=0,d=a.length;c<d;c++)b.innerHTML+="\x3cbr /\x3e"+juic.escapeHTML(a[c].msg)+"\x3cbr /\x3e";b.style.display=""},hideErrorMessage:function(){var a=$(this.id+"_error");a&&(a.style.display="none")},getHighLightElemId:function(){return this.id},renderHtml:function(a){this._writable?a.push('\x3cdiv onclick\x3d"'+
this.fireCode("focus")+'" class\x3d"calendarFieldOuter" id\x3d"'+this.id+'_outer"\x3e\x3ca class\x3d"editable" href\x3d"javascript:void(0);" id\x3d"'+this.id+'_a" title\x3d"'+juic.escapeHTML(MSGS.COMMON_Click_to_edit)+'" \x3e'+Util.escapeHTML(this.value)+'\x3c/a\x3e\x3cinput id\x3d"'+this.id+'" name\x3d"'+this.id+'" onfocus\x3d"'+this.fireCode("focusCalendar")+'" onchange\x3d"'+this.fireCode("change")+'" onmouseover\x3d"CDPCalendar.overIpe(this)" size\x3d"12" style\x3d"display: none;border: 0px solid black;" type\x3d"text" value\x3d"'+
juic.escapeHTML(this.value)+'"/\x3e \x3cdiv class\x3d"cdpCalendarIcon"\x3e\x26#xe046\x3c/div\x3e\x3cdiv id\x3d"'+this.id+'_error" style\x3d"display:none; color: rgb(255, 0, 0);"\x3e\x3c/div\x3e\x3c/div\x3e'):a.push('\x3cspan id\x3d"'+this.id+'" class\x3d"'+this._readOnlyClass+'"\x3e'+Util.escapeHTML(this.value)+"\x3c/span\x3e")},focusCalendar:function(){var a=this;CDPCalendar.hook($(this.id),MSGS.COMMON_DateFormatExample,MSGS.COMMON_DateFormat,"ipe",1,this._min,this._max,null,null,this.id+"_a",function(){a.blur()})},
focus:function(){if(this._writable){var a=$(this.id);a.previousSibling.style.display="none";a.style.display="";a.focus();a.select();this.oldValue=a.value}},blur:function(){var a=$(this.id),b=a.previousSibling;$(this.id+"_error");a.style.display="none";b.style.display="";a=a.value;a=a.trim();b.innerHTML=0<a.length?a:MSGS.COMMON_DateFormatExample;this.change()},change:function(){var a=$(this.id).value,b=$(this.id+"_error");a!=this.oldValue&&(this.isValid(a)?(this.setModified(!0),this.dispatch("change",
{oldValue:this.oldValue,newValue:a}),delete this.oldValue,b.style.display="none"):(b.style.display="",b.innerHTML=this.appendErrorIcon(this._lastErrorMessage)));this.oldValue=a},isValid:function(a){var b=[],c=[];a==MSGS.COMMON_DateFormatExample&&(a="");this._lastErrorMessage=(out=!this._validator||!this._validator.validate(this.id,c,b,""==a?a:null))?"":c[0];return out},getLastValidationError:function(){return this._lastErrorMessage},setModified:function(a){this._modified=a;if(this.isShowModified()){var b=
$(this.id);b&&(this._writable&&(b=b.previousSibling),a?YAHOO.util.Dom.addClass(b.id,"unsaved"):YAHOO.util.Dom.removeClass(b.id,"unsaved"))}},isModified:function(){return this._modified},serializeState:function(){return{value:this.getValue(),modified:this.isModified()}},deserializeState:function(a){this.setValue(a.value);this.setModified(a.modified)},bindValidators:function(){if(this._validatorActions)for(var a=0;a<this._validatorActions.length;a++){var b=this._validatorActions[a];this._validator.add(b.name,
b.id,b.formater,b.required)}},addToValidatorBindings:function(a,b,c,d){this._validator&&this._writable&&(this._validatorActions[this._validatorActions.length]={name:a,id:b,formater:c,required:d})}})}();
var CDPCalendar=new function(){function a(a,b){for(var c=a.className.replace(/\s+/g,",").split(","),d=0;d<c.length;++d)if(c[d]==b)return;c[c.length]=b;a.className=c.join(" ")}function b(a,b){for(var c=a.className.replace(/\s+/g,",").split(","),d=0;d<c.length;++d)if(c[d]==b){c.splice(d,1);break}a.className=c.join(" ")}function c(a){for(var b={x:0,y:0,w:a.offsetWidth,h:a.offsetHeight},c=a;c;c=c.offsetParent)b.x+=c.offsetLeft,b.y+=c.offsetTop;for(c=a;c!=document.body;c=c.parentNode)c.scrollLeft&&(b.x-=
c.scrollLeft),c.scrollTop&&(b.y-=c.scrollTop);if(!v)for(c=a.offsetParent;c;c=c.offsetParent)b.x+=c.clientLeft,b.y+=c.clientTop;return b}function d(){var a=c(f.input);f.div&&(a=c(f.div));var b=f.input.calOptions.location,d=f.iframe.offsetWidth,e=f.iframe.offsetHeight,g,h;v?(g=innerWidth+pageXOffset,h=innerHeight+pageYOffset):(g=document.body.clientWidth+document.body.scrollLeft,h="undefined"!=typeof getScrollPosition?document.body.clientHeight+getScrollPosition():document.body.clientHeight+document.body.scrollTop);
g-=d;h-=e;for(var k,t,l=a.x,d=l+a.w-d,m=l+a.w+2,p=a.y,n=p+a.h-e,a=p+a.h+2,e=p-e-2,b=1==b?[l,a,d,a,l,e,d,e,m,p,m,n]:[m,p,m,n,l,a,d,a,l,e,d,e],l=0;12>l&&!(k=b[l],t=b[l+1],k<g&&t<h&&0<=k&&0<=t);l+=2);"Microsoft Internet Explorer"!=navigator.appName||"8."!=navigator.appVersion.match(/8./i)&&"9."!=navigator.appVersion.match(/9./i)?(f.iframe.style.top="undefined"!=typeof getScrollPosition?t+getScrollPosition()+"px":t+document.body.scrollTop+"px",f.iframe.style.left=k+document.body.scrollLeft+"px"):(f.iframe.style.top=
t+"px",f.iframe.style.left=k+"px")}function e(){if(f.input){var a=f.input.calOptions;if(a.onblurEvent)a.onblurEvent();"ipe"==f.input.calOptions.type&&DomUtil.showHideLayers(f.input.calOptions.anchorId,f.input.id,"inline");f.input=null;u&&(f.iframe.style.height="0px",f.iframe.style.width="0px",n&&(clearInterval(n),n=0))}}function g(){d();f.iframe.style.zIndex=999999;f.iframe.style.display="";f.iframe.contentWindow.init(f.input.value,f.input.calOptions);n||(n=setInterval(d,500))}function h(){q&&(clearTimeout(q),
q=0)}function k(){h();if(f.input!=this){f.input=this;this.select();this.value==this.calOptions.dateExample&&(this.value="",this.style.color="",b(this,"blank_state"));if(!f.iframe){var c=f.iframe=document.createElement("IFRAME"),d=c.style;d.position="absolute";d.border="0px";d.width="200px";d.height="200px";d.overflow="hidden";d.zIndex="1002";d.display="none";c.tabIndex=1E4;c.src=f.input.xhtmlSource;c.scrolling="no";c.frameBorder="0";document.body.insertBefore(f.iframe,document.body.firstChild)}u&&
g();"ipe"==this.calOptions.type&&a(this,"itemover")}return!0}function m(){f.selected||(h(),q=setTimeout(e,1));var c=this.calOptions.dateFormat.parse(this.value);c&&f.MINYEAR<=c.getFullYear()&&c.getFullYear()<=f.MAXYEAR?this.value=this.calOptions.dateFormat.format(c):""==this.value&&(this.value=this.calOptions.dateExample,a(this,"blank_state"));"ipe"==this.calOptions.type&&b(this,"itemover");r(this);f.setUnselected();return!0}function r(a){if(a._lastUpdate!=a.value){a._lastUpdate=a.value;"ipe"==a.calOptions.type&&
(Util.gebi(a.calOptions.anchorId).innerHTML=juic.escapeHTML(a.value));var b=a.calOptions;"null"!=b.event&&b.event&&b.event instanceof YAHOO.util.CustomEvent&&b.event.fire({param:b.param,divValue:a.value,divId:a.id,anchorId:b.anchorId})}}function w(){f.input!=this&&b(this,"itemover")}function x(){if(u)if(this.calOptions.minDate){var a=this.calOptions.dateFormat.parse(this.value);if(a){var a=a.getTime(),b=ISO8601Dateformatter.parse(this.calOptions.minDate).getTime();a>b&&f.iframe.contentWindow.reparse(this.value)}}else f.iframe.contentWindow.reparse(this.value)}
var f=this,u=!1,q=0,n=0,v=/Gecko\/[0-9]+/.test(navigator.userAgent);f.MINYEAR=1901;f.MAXYEAR=2099;f.webContext="";f.hook=function(a,b,c,d,e,g,h,n,l,q,p,r){a.calOptions={dateExample:b,datePattern:c,dateFormat:new DateFormat(c),type:d,location:e,min:g,max:h,event:n,param:l,anchorId:q,onblurEvent:p,minDate:r};a.xhtmlSource=f.webContext+"/xi/ui/cdp/pages/cdpcalendar.xhtml";a._lastUpdate=a.value;a.onfocus=k;a.onblur=m;a.onkeyup=x;a.onfocus()};f.overIpe=function(b){b.onmouseout=w;f.input!=b&&a(b,"itemover")};
f.onLoad=function(){u=!0;var a=v?f.iframe.contentWindow:f.iframe;a.onfocus=function(){h();return!0};a.onblur=function(){h();q=setTimeout(e,1);return!0};f.input&&g()};f.setDate=function(a){var c=f.input.value;f.input.value=a;b(f.input,"blank_state");if(f.input.onchange&&c!=a)f.input.onchange();r(f.input)};f.setSelected=function(){f.selected=!0};f.setUnselected=function(){f.selected=!1};f.nsPosition=d;f.hide=e;f.initIFrame=function(){if(!f.iframe){var a=f.iframe=document.createElement("IFRAME"),b=a.style;
b.position="absolute";b.border="0px";b.width="200px";b.height="200px";b.overflow="hidden";b.zIndex="1002";b.display="none";a.tabIndex=1E4;a.src="/xi/ui/cdp/pages/cdpcalendar.xhtml";a.scrolling="no";a.frameBorder="0";document.body.appendChild(f.iframe)}};f.selected=!1};function CDPInputFormLayout(a){this.register();this._useCellBorders="undefined"!=typeof a.useCellBorders?a.useCellBorders:!0;this._showCount=a.count?a.count:3;this._display=a.display?a.display:!1;this._fields=[]}
CDPInputFormLayout.prototype=function(){return set(new Component,{renderHtml:function(a){var b=this._fields;a.push('\x3ctable id\x3d"layoutTbl_'+this.id+'" class\x3d"axial');this._useCellBorders||a.push(" noborder");a.push('"\x3e');for(var c=0,d=b.length;c<d;++c){var e="";c>=this._showCount&&c<b.length-1&&(e=this._display?"":"style\x3d'display:none'");var g=b[c].options&&b[c].options.required?'\x3cspan class\x3d"required"\x3e*\x3c/span\x3e':"";a.push('\x3ctr id\x3d"'+this.id+":tr:"+c+'" '+e+"\x3e\x3cth\x3e");
e=this._fields[c].label;"string"==typeof e?a.push(g,'\x3clabel for\x3d"'+b[c].compRef.id+'"\x3e',escapeHTML(e),"\x3c/label\x3e"):e.renderHtml(a);a.push("\x3c/th\x3e\x3ctd\x3e");b[c].compRef.renderHtml(a);b[c].options&&b[c].options.description&&a.push('\x3cspan style\x3d"font-style:italic;padding:0.5em;"\x3e',escapeHTML(b[c].options.description),"\x3c/span\x3e");a.push("\x3c/td\x3e\x3c/tr\x3e")}a.push("\x3c/table\x3e")},fieldsOk:function(){for(var a=$("layoutTbl_"+this.id).getElementsByTagName("input"),
b=!1,c=0,d=a.length;c<d&&!b;++c)"submit"!=a[c].type&&null!=a[c].value&&""!=a[c].value&&(b=!0);return b},addField:function(a,b,c){b&&this._fields.push({label:a,compRef:b,options:c})},showAllRecord:function(a){for(i=0;i<this._fields.length-1;i++)i>=this._showCount&&$(this.id+":tr:"+i)&&(a?$(this.id+":tr:"+i).style.display="":$(this.id+":tr:"+i).style.display="none")}})}();function CDPInputRange(a,b){this.register();this.init(a,b)}
CDPInputRange.prototype=function(){return set(new Component,{init:function(a,b){this.inputType=b&&b.type?b.type:"input";this.rule=b&&b.rule?b.rule:"close";this._fieldId=a;"date"==this.inputType?(this.start=new LADateField(this._fieldId+"_s","",{editable:!0}),this.start.addEventListener("changed",this),this.end=new LADateField(this._fieldId+"_e","",{editable:!0}),this.end.addEventListener("changed",this)):(this.start=new LAInputField(this._fieldId+"_s","",{writable:!0,maxLength:256}),this.end=new LAInputField(this._fieldId+
"_e","",{writable:!0,maxLength:256}))},getValue:function(){var a="";this.start&&this.end&&(""!=this.start.getValue()||""!=this.end.getValue())&&(a+=this.start.getValue(),a=a+"|---|"+this.end.getValue());return a},renderHtml:function(a){this.start&&this.start.renderHtml(a);a.push(" --- ");this.end&&this.end.renderHtml(a)},handleEvent:function(a){switch(a.type){case "changed":a.target.setValue(a.data.value)}}})}();function CDPStringFilterUI(a){this.register();this.fieldId=a;this.init()}
CDPStringFilterUI.prototype=function(){return set(new Component,{init:function(){opers=[{key:MSGS.DEVELOPMENT_MASSADD_Equals,value:"equal"},{key:MSGS.DEVELOPMENT_MASSADD_Contains,value:"like"},{key:MSGS.DEVELOPMENT_MASSADD_Starts_With,value:"start_with"}];this.rule=new SFSingleSelect("equal",opers,this.fieldId+":oper");this.input=new LAInputField(this.fieldId,"",{writable:!0,maxLength:256})},renderHtml:function(a){this.rule.renderHtml(a);this.input.renderHtml(a)},getValue:function(){return this.input.getValue()},
getRule:function(){return this.rule.getValue()}})}();function openStandardWindow(a){window.open(a,"sf_std_win","status\x3d1,toolbar\x3d1,menubar\x3d1,location\x3d1,resizable\x3d1,scrollbars\x3d1,height\x3d768,width\x3d1024").focus()}
function openChromelessWindow(a){var b=2*screen.width/3,c=2*screen.height/3;a=window.open(a,"sf_std_win","status\x3d0,toolbar\x3d0,menubar\x3d0,location\x3d0,resizable\x3d1,scrollbars\x3d1,left\x3d"+(screen.width-b)/2+",top\x3d"+(screen.height-c)/2+",height\x3d"+c+",width\x3d"+b);if(null==a)alert(MSGS.IE_POPUP_SECURITY_MSG);else return a.focus(),a}
function formatProxyMessage(a,b){result=a;"planned_by"!=b&&"confirmed_by"!=b&&"completed_by"!=b||-1==a.indexOf("|")||(users=a.split("|"),2==users.length&&(result=sfMessageFormat.format(MSGS.COMMON_PROXY_ON_BEHALF_OF_USER,users[0],users[1])));return result}function cdp_parse_permitted_value(a,b,c){var d=[];if(c&&0!=c.length)for(i=0;b&&i<b.length;i++)if(b[i].value!=a)for(j=0;c&&j<c.length;j++){if(c[j]==b[i].value){d.push(b[i]);break}}else d.push(b[i]);else d=b;return d}
function CDPDataGridLayout(a){this.register();this.init(a)}
CDPDataGridLayout.prototype=function(){return set(new Component,{init:function(a){this._headers=a;this._rows=[]},appendRow:function(a){this._rows.push(a)},renderHtml:function(a){a.push("\x3ctable width\x3d'100%'\x3e");a.push("\x3cthead\x3e\x3ctr class\x3d'cdp_grid_header'\x3e");for(var b=0;b<this._headers.length;b++)a.push("\x3cth ",this._headers[b].width?"width\x3d'"+this._headers[b].width+"'":"","\x3e"),this._headers[b].sortField?(a.push("\x3ca href\x3d'javascript:void(0);' onclick\x3d\""+this.fireCode("_sort",
juic.escapeHTML(this._headers[b].sortField))+'"\x3e'),a.push(this._headers[b].label),this._headers[b].sortOrder&&""!=this._headers[b].sortOrder&&a.push("\x3cspan class\x3d'","asc"==this._headers[b].sortOrder.toLowerCase()?"sortup":"sortdown","'\x3e\x26nbsp;\x3c/span\x3e"),a.push("\x3c/a\x3e")):a.push(this._headers[b].label),a.push("\x3c/th\x3e");a.push("\x3c/tr\x3e\x3c/thead\x3e");a.push("\x3ctbody\x3e");for(b=0;b<this._rows.length;b++){a.push("\x3ctr class\x3d'",0==b%2?"even":"odd","'\x3e");for(var c=
0;c<this._rows[b].length;c++)a.push("\x3ctd\x3e"),this._rows[b][c].renderHtml?this._rows[b][c].renderHtml(a):a.push(this._rows[b][c]),a.push("\x3c/td\x3e");a.push("\x3c/tr\x3e")}a.push("\x3c/tbody\x3e");a.push("\x3c/table\x3e")},_sort:function(a){this.dispatch("sort",{fieldId:a})},cleanup:function(){for(i=0;i<this._rows.length;i++)this._rows[i].cleanup&&this._rows[i].cleanup()}})}();
function getElementsByName4IE(a,b,c){var d=document.getElementById(a);a=[];d&&(a=d.getElementsByTagName(b));b=[];for(i=0;i<a.length;i++)att=a[i].getAttribute("name"),att==c&&b.push(a[i]);return b}function getFitDialogSize(a,b){var c=a?a:800,d=b?b:450,e=Math.floor(3*SFDom.getViewportWidth()/4),g=Math.floor(3*SFDom.getViewportHeight()/4);c<e&&(c=e-60);d<g&&(d=g-60);return{width:c,height:d}}function StatusEditor(a,b){this.register();this.init(a,b)}
StatusEditor.prototype=function(){return set(new ComponentLegacy,{renderHtml:function(a){a.push("\x3cdiv id\x3d'"+this.id+"'\x3e");this._renderView(a);a.push("\x3c/div\x3e")},init:function(a,b){this.activityId=b.activityId;this.statusArray=cdp_parse_permitted_value(b.status,b.statusArray,b.permittedSet);this.editable=b.editable;this._config={Planned:"transcript_status_Planned",Completed:"transcript_status_completed"};b.printMode&&(this.editable=!1);this._setStatus(b.status);this.listener=a;if(this.editable){this.addEventListener("changeStatus",
this.listener);var c=[];for(i=0;this.statusArray&&i<this.statusArray.length;i++){var d={};d.label=this.statusArray[i].label;d.value=this.statusArray[i].value;d.style=this.statusArray[i].style;d.styleClass="";c.push(d)}this.menu=new sfPopMenu(this.id+"_menu",c,"",!(Util.browserInfo.ios||Util.browserInfo.android));this.menu.addEventListener("menuSelected",this)}},_setStatus:function(a){if(this.status!=a)for(this.status=a,this.statusLabel="",a=0;this.statusArray&&a<this.statusArray.length;a++)if(this.statusArray[a].value==
this.status){this.statusLabel=this.statusArray[a].label;this.statusStyle=this.statusArray[a].style;break}},_renderView:function(a){this.statusStyle?a.push('\x3cdiv class\x3d"transcript_status_" style\x3d"',juic.escapeHTML(this.statusStyle),'"\x3e'):this._config[this.status]?a.push('\x3cdiv class\x3d"'+this._config[this.status]+'"\x3e'):a.push('\x3cdiv class\x3d"transcript_status_"\x3e');if(this.editable){switch(this.status){case "Planned":a.push('\x3ccenter\x3e\x3cdiv class\x3d"calendarIcon"\x3e\x26#160;\x3c/div\x3e\x3c/center\x3e');
break;default:a.push("\x3ccenter\x3e\x3cdiv\x3e\x26#160;\x3c/div\x3e\x3c/center\x3e")}a.push('\x3cb id\x3d"'+this.id+'_label"\x3e'+(this.statusLabel?juic.escapeHTML(this.statusLabel):"")+"\x3c/b\x3e");a.push(" \x3ca href\x3d'javascript:void(0);' id\x3d'"+this.id+"_menu' onclick\x3d'"+this.fireCode("openMenu")+"' class\x3d'menu_arrow_blue_border'\x3e\x26#160;\x3c/a\x3e")}else a.push('\x3cb id\x3d"'+this.id+'_label"\x3e'+(this.statusLabel?juic.escapeHTML(this.statusLabel):"")+"\x3c/b\x3e");a.push("\x3c/div\x3e")},
updateView:function(){var a=[];this._renderView(a);$(this.id).innerHTML=a.join("")},openMenu:function(){this.menu.show()},handleEvent:function(a){if(a)switch(a.type){case "menuSelected":this.dispatch("changeStatus",{data:{id:this.activityId,value:a.value,label:a.label}});break;case "statusModified":this.activityId==a.data.id&&(this._setStatus(a.data.value),this.updateView());break;case "changeGoals":this._model.modifyActivityGoals(a.data);break;case "goalsModified":this.dispatchEvent(a);break;default:assert(!1,
"no such an event defined in this module")}},cleanup:function(){this.menu&&this.menu.cleanup();this.externalUnregister("changeStatus",this.id);this.unregister()}})}();function GoalEditor(a,b){this.register();this._maxGoalLength=35;this._listener=a;this._activityId=b.activityId;this._activityGoals=b.goals;this._objectives=b.objectives;this._selectedUserId=b.selectedUserId?b.selectedUserId:0;this._isLink=b.isLink?b.isLink:!1;this._editable=b.editable?b.editable:!1;this._model=b.model;this.init()}
GoalEditor.prototype=function(){return set(new Component,{init:function(){this._isLink&&(this._showGoalsListButton=new SFCommandButton(MSGS.DEVELOPMENT_TRANSCRIPT_ADD_GOAL,!0,!0,!1),this._showGoalsListButton.setActionCommand("showGoals"),this._showGoalsListButton.addEventListener("action",this),this._showGoalsListButton.setSize("mid"),this._goalsList=new CheckboxGroup(this._activityGoals,this._objectives,this._selectedUserId,this._model),this._goalsList.addEventListener("confirmToUpdateData",this),
this.addEventListener("changeGoals",this._listener),this._listener.addEventListener("goalsModified",this))},renderHtml:function(a){a.push("\x3cdiv id\x3d'"+this.id+"'\x3e");this._renderView(a);a.push("\x3c/div\x3e")},_renderView:function(a){if(this._isLink)if(this._activityGoals&&0<this._activityGoals.length){for(var b=0;b<this._activityGoals.length;b++){var c=this._activityGoals[b],d=this._getGoalLabelById(c),e=this._getGoalTitleById(c),c=this._getGoalPlanById(c),c="/acme?fbacme_n\x3dobjectives\x26objPlanType\x3d1\x26selected_userid\x3d"+
this._selectedUserId+"\x26tgmv10pfselect_plan\x3d"+c+"\x26_s.crb\x3d"+ajaxSecKey;if(d&&""!=d){a.push('\x3cspan class\x3d"goalItemsLink"\x3e');var g=d;d.length>this._maxGoalLength&&(g=g.truncateByLength(this._maxGoalLength)+"...");a.push("\x3ca href\x3d'javascript:void(0);' onclick\x3d'"+this.fireCode("_gotoPlan",c)+";return false;' title\x3d'"+e+"'\x3e"+Util.escapeHTML(g)+"\x3c/a\x3e");b<this._activityGoals.length-1&&a.push(",");a.push("\x3c/span\x3e\x3cbr\x3e")}}this._editable&&this._showGoalsListButton&&
(this._showGoalsListButton.setLabel(MSGS.DEVELOPMENT_TRANSCRIPT_EDIT_GOAL),this._showGoalsListButton.setActive(!1),this._showGoalsListButton.renderHtml(a))}else this._editable&&this._showGoalsListButton&&(this._showGoalsListButton.setLabel(MSGS.DEVELOPMENT_TRANSCRIPT_ADD_GOAL),this._showGoalsListButton.setActive(!0),this._showGoalsListButton.renderHtml(a));else if(this._activityGoals&&0<this._activityGoals.length)for(b=0;b<this._activityGoals.length;b++)c=this._activityGoals[b],d=this._getGoalTitleById(c),
a.push(d),b<this._activityGoals.length-1&&a.push(",\x3cbr\x3e")},_gotoPlan:function(a){if(!a)return!1;this._model.modified?confirm(MSGS.DEVELOPMENT_TRANSCRIPT_GOTO_PLAN_CONFIRM)&&window.setLocation(a):window.setLocation(a)},updateView:function(){var a=[];this._renderView(a);$(this.id).innerHTML=a.join("");this._goalsList&&(this._goalsList.hide(),this._goalsList.refresh(this._activityGoals,this._objectives))},_getGoalLabelById:function(a){for(var b=0;b<this._objectives.length;b++)for(var c=this._objectives[b],
d=0;d<c.objs.length;d++){var e=c.objs[d];if(e.id==a)return e.name}return""},_getGoalTitleById:function(a){for(var b=0;b<this._objectives.length;b++)for(var c=this._objectives[b],d=0;d<c.objs.length;d++){var e=c.objs[d];if(e.id==a)return Util.escapeHTML(c.planName+" - "+e.name)}return""},_getGoalPlanById:function(a){for(var b=0;b<this._objectives.length;b++)for(var c=this._objectives[b],d=0;d<c.objs.length;d++)if(c.objs[d].id==a)return c.planId;return""},handleEvent:function(a){if(a)switch(a.type){case "goalsModified":this._activityId&&
a.data.id&&this._activityId!=a.data.id||(this._activityGoals=a.data.value,this.updateView());break;case "confirmToUpdateData":this.dispatch("changeGoals",{data:{id:this._activityId,value:a.data.value}});break;case "activeGoalClicked":alert(a.param);break;case "action":switch(a.actionCommand){case "showGoals":this._goalsList&&SFOverlayMgr.showOverlay(this._goalsList,!0)}}},cleanup:function(){this._showGoalsListButton.cleanup();this._goalsList.cleanup();this.unregister()}})}();
function CheckboxGroup(a,b,c,d){this.register();this._activityGoals=a;this._objectives=b;this._selectedUserId=c;this._model=d;this._title=MSGS.DEVELOPMENT_TRANSCRIPT_GOAL_EDITOR_TITLE;this._innerHeight=420;this._innerWidth=700;this.init()}
CheckboxGroup.prototype=function(){return set(new Component,{init:function(){this._okButton=new SFCommandButton(MSGS.DEVELOPMENT_TRANSCRIPT_DEVPLAN_CONTINUE,!0,!0);this._okButton.setActionCommand("okAddGoals");this._okButton.addEventListener("action",this);this._cancelButton=new SFCommandButton(MSGS.DEVELOPMENT_TRANSCRIPT_CANCEL,!1,!0);this._cancelButton.setActionCommand("cancelAddGoals");this._cancelButton.addEventListener("action",this);this._gotoDevelopmentPlanLink=new SFLink(MSGS.DEVELOPMENT_TRANSCRIPT_GOTO_PLAN,
{onClick:"gotoDevelopmentPlan",css:"link"});this._gotoDevelopmentPlanLink.addEventListener("gotoDevelopmentPlan",this)},renderHtml:function(a){var b="",c="";"undefined"==typeof isRequireTranscriptLearningConsistency||"true"!=isRequireTranscriptLearningConsistency&&1!=isRequireTranscriptLearningConsistency||(b=Util.isFioriEnabled()?" globalHighlightText":"",c="button_row");a.push('\x3cdiv class\x3d"sfDlg" id\x3d"'+this.id+'" style\x3d"position:relative"\x3e');a.push('\x3cdiv id\x3d"'+this.id+'_underlay" style\x3d"width:'+
this._innerWidth+"px;height:"+(this._innerHeight+70)+'px;" class\x3d"underLay"\x3e\x3c/div\x3e');a.push('\x3cdiv class\x3d"sfDlgCntr" style\x3d"width:'+this._innerWidth+'px;"\x3e');a.push('\x3cdiv class\x3d"hdr"\x3e'+escapeHTML(this._title)+"\x3c/div\x3e");this._renderView(a);a.push('\x3cdiv class\x3d"ftr" width\x3d"100%" \x3e');a.push('\x3cdiv width\x3d"100%" style\x3d"padding-top:.25em;" \x3e');a.push('\x3ctable id\x3d"'+this.id+'_footerTable" width\x3d"100%" border\x3d"0" class\x3d\''+c+"'\x3e");
a.push('\x3ctr\x3e\x3ctd width\x3d"75%" align\x3d"left" valign\x3d"middle" class\x3d"laLinkNormal'+b+'"\x3e');this._gotoDevelopmentPlanLink.renderHtml(a);a.push("\x3c/td\x3e");a.push('\x3ctd align\x3d"right" valign\x3d"middle" style\x3d"margin-left: 6em;white-space:nowrap;padding-top:0px;vertical-align:top;"\x3e');this._okButton.renderHtml(a);this._cancelButton.renderHtml(a);a.push("\x3c/td\x3e\x3c/tr\x3e");a.push("\x3c/table\x3e");a.push("\x3c/div\x3e");a.push("\x3c/div\x3e");a.push('\x3cspan id\x3d"dlg_close_x" style\x3d\'margin-right:10px;\' onclick\x3d"'+
this.fireCode("_cancel")+'" class\x3d"close-x'+(Util.isFioriEnabled()?" sapIcon":"")+'"\x3e\x3c/span\x3e');a.push("\x3c/div\x3e");a.push("\x3c/div\x3e")},_renderView:function(a){a.push('\x3cdiv id\x3d"'+this.id+'_body" class\x3d"body" style\x3d"height:'+this._innerHeight+"px; width:"+this._innerWidth+'px" \x3e');a.push('\x3ctable id\x3d"'+this.id+'_bodyTable" width\x3d"92%" height\x3d"87%" align\x3d"center" class\x3d"planBodyTable" \x3e');a.push('\x3ctr\x3e\x3ctd align\x3d"left" valign\x3d"top"\x3e');
if(this._objectives&&0<this._objectives.length)for(var b=0;b<this._objectives.length;b++){var c=this._objectives[b];a.push('\x3cdiv id\x3d"title_'+b+"_"+this.id+'" class\x3d"planName" \x3e');a.push(c.planName);a.push("\x3c/div\x3e");a.push('\x3cdiv id\x3d"items_'+b+"_"+this.id+'" class\x3d"goalItem" \x3e');for(var d=0;d<c.objs.length;d++){var e=c.objs[d],g="checkGoal_"+b+d+"_"+this.id;a.push('\x3cdiv\x3e\x3cinput style\x3d\'margin:3px;\' type\x3d"checkbox" id\x3d"'+g+'" ');e.isEditable?"":a.push("disabled ");
this._isSelectedData(e.id)?a.push("checked "):"";a.push(' value\x3d"'+e.id+'"\x3e');a.push("\x3c/input\x3e");a.push("\x3clabel");e.isEditable?"":a.push(" for\x3d'"+g+"'");a.push("\x3e");a.push(Util.escapeHTML(e.name)+"\x3c/label\x3e\x3c/li\x3e");d<c.objs.length&&a.push("\x3cbr\x3e");a.push("\x3c/div\x3e")}a.push("\x3c/div\x3e")}a.push("\x3c/td\x3e\x3c/tr\x3e");a.push("\x3c/table\x3e");a.push("\x26#160;\x3cbr\x3e");a.push("\x3c/div\x3e")},updateView:function(){var a=[];this._renderView(a);$(this.id+
"_body").innerHTML=a.join("")},_isSelectedData:function(a){if(this._activityGoals)for(var b=0;b<this._activityGoals.length;b++)if(this._activityGoals[b]==a)return!0;return!1},handleEvent:function(a){switch(a.type){case "action":switch(a.actionCommand){case "okAddGoals":this._changeGoals();break;case "cancelAddGoals":this._cancel()}break;case "gotoDevelopmentPlan":this._gotoDevelopmentPlan();break;default:alert("unknown event!! :: HoverMenu")}},_gotoDevelopmentPlan:function(){var a="/acme?fbacme_n\x3dobjectives\x26objPlanType\x3d1\x26selected_userid\x3d"+
this._selectedUserId+"\x26_s.crb\x3d"+ajaxSecKey;this._checkIfCheckChanged()||this._model.modified?confirm(MSGS.DEVELOPMENT_TRANSCRIPT_GOTO_PLAN_CONFIRM)&&window.setLocation(a):window.setLocation(a)},_cancel:function(){this._checkIfCheckChanged()?confirm(MSGS.DEVELOPMENT_TRANSCRIPT_CANCEL_GOAL_CONFIRM)&&this.hide():this.hide()},_changeGoals:function(){this.dispatch("confirmToUpdateData",{data:{value:this.getValue()}})},_checkIfCheckChanged:function(){var a=this.getValue().toString(),b=this._getOldValue().toString();
return a!=b?!0:!1},hide:function(){this.dispatch("hide")},refresh:function(a,b){this._activityGoals=a;this._objectives=b},getValue:function(){for(var a=[],b=0;b<this._objectives.length;b++)for(var c=this._objectives[b],d=0;d<c.objs.length;d++){var e=c.objs[d],g=$("checkGoal_"+b+d+"_"+this.id);g&&g.checked&&a.push(e.id)}return a.sort()},_getOldValue:function(){var a=[];if(this._activityGoals)for(var b=0;b<this._activityGoals.length;b++)a.push(this._activityGoals[b]);return a.sort()},cleanup:function(){this._okButton.cleanup();
this._cancelButton.cleanup();this.unregister()}})}();function LearningActivityPortlet(a,b,c){this.register();this.init(a,b,c)}
LearningActivityPortlet.prototype=function(){return set(new Component,{init:function(a,b,c){this._model=a;this.portlet=b;this.formLayout=new SFInputFormLayout(!0);this.inputComponentList=[];for(var d in b.fields){var e=b.fields[d];!(a=this._model.getFieldMeta(e))||"table"==a.type&&this._model.isNew||("text"===a.type&&(a.editClass=c.text&&c.text.editClass),e=new EditableInput(this._model,e,a),this.formLayout.addField(a.label+"",e,{required:a.required}),this.inputComponentList.push(e))}this.header=
new SFTableHeader(!0,b.label,this.formLayout)},renderHtml:function(a){1==this._checkIfRequireConsistency()?a.push('\x3cdiv class\x3d"cdpPortletBorder activityUIConsistency"\x3e'):a.push('\x3cdiv class\x3d"cdpPortletBorder"\x3e');this.header.renderHtml(a);a.push(" \x3c/div\x3e")},_checkIfRequireConsistency:function(){return"undefined"==typeof isRequireTranscriptLearningConsistency||"true"!=isRequireTranscriptLearningConsistency&&1!=isRequireTranscriptLearningConsistency?!1:!0},getPortlet:function(){return this.portlet},
createInputComponent:function(a,b){},cleanup:function(){for(var a=0;a<this.inputComponentList.length;a++)this.inputComponentList[a].cleanup();this.formLayout.cleanup();this.header.cleanup();this.unregister()}})}();function HeadlineBlock(a){this.register();assert(a,"[HeadlineBlock] :model required");this._model=a;this.init()}
HeadlineBlock.prototype=function(){return set(new Component,{init:function(){var a=this._model.getFieldMeta("status"),a={activityId:this._model.activityId,status:this._model.activity.status,statusArray:this._model.statusArray,permittedSet:this._model.activity.permittedValues?this._model.activity.permittedValues.status?this._model.activity.permittedValues.status:null:null,editable:a?a.editable:!1,printMode:this._model.printMode};this._model.printMode?this.statusEditor=new StatusEditor(this,a):(this.statusEditor=
new StatusEditor(this,a),this.statusEditor.addEventListener("changeStatus",this),this.addEventListener("statusModified",this.statusEditor));this._nameTextAreaField=new LAHeadlineTextAreaField(this,this._model.printMode,this._model.activity,"name",this._model.meta,{rows:2,readOnlyClass:"read_only_headline_name",allowBr:!1});this._descTextAreaField=new LAHeadlineTextAreaField(this,this._model.printMode,this._model.activity,"description",this._model.meta,{rows:2,readOnlyClass:"read_only_headline_desc"});
this._nameTextAreaField.addEventListener("textChange",this);this._descTextAreaField.addEventListener("textChange",this)},renderHtml:function(a){a.push('\x3ctable width\x3d\'100%\'\x3e\x3ctr\x3e\x3ctd width\x3d"80%" class\x3d"editable_headline_name"\x3e');this._nameTextAreaField&&this._nameTextAreaField.renderHtml(a);a.push('\x3c/td\x3e\x3ctd align\x3d"center" valign\x3d"middle"\x3e');this.statusEditor.renderHtml(a);a.push('\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d2 class\x3d"editable_only_headline_desc"\x3e');
this._descTextAreaField&&this._descTextAreaField.renderHtml(a);a.push("\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")},handleEvent:function(a){switch(a.type){case "changeStatus":this._model.modifyActivity({field:"status",value:a.data.value});param={id:this._model.activityId};param.value=this._model.activity.status;this.dispatch("statusModified",{data:param});break;case "textChange":this._model.modifyActivity({field:a.data.fieldId,value:a.data.value});this.dispatch("textChanged",{data:{fieldId:a.data.fieldId,
value:this._model.activity}});break;default:assert(!0,"not handler for event:"+a.type)}},cleanup:function(){this.statusEditor.cleanup();this._nameTextAreaField.cleanup();this._descTextAreaField.cleanup();this.unregister()}})}();
function LAHeadlineTextAreaField(a,b,c,d,e,g){this.register();assert(c,"[LATextAreaField] :data required");assert(d,"[LATextAreaField] :field required");assert(e,"[LATextAreaField] :meta required");this._printMode=b;this._controller=a;this._data=c;this._fieldId=d;this._meta=e;this._config=g?g:{};this._value="";this.init()}
LAHeadlineTextAreaField.prototype=function(){return set(new Component,{init:function(){var a="",b=this.getMetaByFieldId();b&&(this._config.writable=b.editable,a=b.label);this._noValueString="["+sfMessageFormat.format(MSGS.DEVELOPMENT_TRANSCRIPT_Click_to_edit_with_param,a)+"]";this._value=this._data&&this._data[this._fieldId]?this._data[this._fieldId]:"";this._value=this._getValue(this._value);this._printMode&&(this._config.writable=!1);this._textAreaField=new CDPIPETextAreaField(this._value,this._config);
this._textAreaField.addEventListener("change",this);this._controller.addEventListener("textChanged",this)},renderHtml:function(a){this._textAreaField.renderHtml(a)},_getValue:function(a){a&&0!=a.trim().length||(a=this._noValueString);return a},getMetaByFieldId:function(){if(this._meta)for(var a=0;a<this._meta.length;a++){var b=this._meta[a];if(b.id==this._fieldId)return b}return null},handleEvent:function(a){switch(a.type){case "change":a=a.newValue;var b=Util.unescapeHTML(a),b=this._getValue(b),
c=$(this._textAreaField.id);a!=b&&c&&(c.value=b);b!=this._value&&this.dispatch("textChange",{data:{fieldId:this._fieldId,value:b==this._noValueString?"":b}});b==this._noValueString&&this._textAreaField.setValue(b);break;case "textChanged":a.data.fieldId==this._fieldId&&(this._data=a.data.value);break;default:assert(!0,"not handler for event:"+a.type)}},cleanup:function(){this._textAreaField.cleanup();this.unregister()}})}();
function EditableInput(a,b,c){this.register();assert(a,"[EditableInput] :model required");assert(b,"[EditableInput] :field required");this._model=a;this._fieldId=b;this._printMode=a.printMode;this._data=this._model.activity;this._objectives=this._model.objectives;this._fieldMeta=c;this._editableArea=this._value=null;this._config={};this._values=[];this._initData();this.init()}
EditableInput.prototype=function(){return set(new Component,{_initData:function(){this._value=this._data[this._fieldId];this._config.writable=this._fieldMeta.editable;this._config.editable=this._fieldMeta.editable;this._config.editClass=this._fieldMeta.editClass;this._config.isLink=!0;this._values=cdp_parse_permitted_value(this._value,this._fieldMeta.values,this._data.permittedValues[this._fieldId]);this._printMode&&(this._config.isLink=!1,this._config.writable=!1,this._config.editable=!1)},init:function(){if(this._fieldMeta.type)if("dev_goals"==
this._fieldId){var a={activityId:this._data.id,goals:this._data.dev_goals,objectives:this._objectives,editable:this._fieldMeta.editable,isLink:!0,selectedUserId:this._model.activity.assignee?this._model.activity.assignee:this._model.selectedUserId,model:this._model};this._printMode&&(a.isLink=!1);this._editableArea=new GoalEditor(this,a);this._editableArea.addEventListener("goalsModified",this._editableArea)}else{switch(this._fieldMeta.type){case "text":value=this._value;value=formatProxyMessage(value,
this._fieldId);this._editableArea=new LAInputField(this._fieldId,value,this._config);break;case "textarea":this._config.writable&&this._config.editable&&(this._fieldMeta.showCoachingAdvisor&&this._model.isCoachingAdvisor&&(this._config.coachingAdvisor=this._getCoachingLink()),this._model.isLegalScan&&(this._config.legalScan=this._getLegalScan()),this._model.isSpellCheck&&(this._config.spellCheck=this._getSpellCheck()));this._config.label=this._fieldMeta.label;this._editableArea=new LATextAreaField(this._fieldId,
this._value,this._config);break;case "date":this._editableArea=new LADateField(this._fieldId,this._value,this._config);break;case "percent":this._editableArea=new LAInputField(this._fieldId,this._value,this._config);break;case "bool":this._editableArea=new LACheckboxField(this._fieldId,this._value,this._config);break;case "enum":this._editableArea=new LASingleSelectField(this._fieldId,this._value,this._values,this._config);break;case "checkbox":this._config.height="80px";this._editableArea=new LACheckboxListField(this._fieldId,
this._value,this._values,this._config);break;case "number":this._editableArea=new LAInputField(this._fieldId,this._value,this._config);break;case "table":this._model.isNew||(this._editableArea=new LATableField(this._model,this._fieldId));break;case "link":this._editableArea=new LALinkField(this._fieldId,this._value,this._config);break;default:assert(!0,"not supporedt type:"+this._fieldMeta.type)}this._editableArea&&this._editableArea.addEventListener("changed",this)}},_getCoachingLink:function(){var a;
a="/handbook?bplte_company\x3d"+pageHeaderJsonData.companyId;a=a+"\x26fbwaca_param_handbookType\x3dcoachingAdv\x26fbwaca_param_roleselect\x3dfbwaca_roleComp"+("\x26fbwaca_showCompFor\x3d"+(this._model.selectedUserId?this._model.selectedUserId:this._model.loginUserId));a+="\x26fbwaca_param_subId\x3d"+(this._model.selectedUserId?this._model.selectedUserId:this._model.loginUserId);a+="\x26_s.crb\x3d"+ajaxSecKey;return a+"\x26fieldName\x3d"},_getLegalScan:function(){var a;a="/legalscan?bplte_company\x3d"+
pageHeaderJsonData.companyId;a=a+"\x26lscn_param_formname\x3dCDP_DETAIL_LEARNING_FORM"+("\x26_s.crb\x3d"+ajaxSecKey);return a+"\x26lscn_param_fieldname\x3d"},_getSpellCheck:function(){var a;a="/spellcheck?bplte_company\x3d"+pageHeaderJsonData.companyId;a+="\x26_s.crb\x3d"+ajaxSecKey;return a+"\x26schk_param_fieldname\x3d"},renderHtml:function(a){this._editableArea&&this._editableArea.renderHtml(a)},getValue:function(a){return this._editableArea?this._editableArea.getValue():null},handleEvent:function(a){switch(a.type){case "changed":if(a.data.field==
this._fieldId){this._model.modifyActivity({field:this._fieldId,value:a.data.value});var b={id:this._model.activityId};b.value=this._model.activity[this._fieldId];this.dispatch("statusModified",{data:b});this._initData();this._editableArea.setValue(a.data.value)}break;case "changeGoals":this._model.modifyActivity({field:this._fieldId,value:a.data.value});this.dispatch("goalsModified",{data:{id:this._model.activityId,value:this._model.activity[this._fieldId]}});break;default:assert(!0,"not handler for event:"+
a.type)}},cleanup:function(){this._editableArea.cleanup();this.unregister()}})}();
function LALinkField(a,b,c){this.register();assert(a,"[LALinkField] :field required");assert(c,"[LALinkField] :config required");this._fieldId=a;this._value=null==b||"undefuned"==b?"":b;this._readOnlyClass=void 0!=c.readOnlyClass?c.readOnlyClass:"readonly";this._editClass=void 0!=c.editClass?c.editClass:"laEditArea";this._writable=void 0!=c.writable?c.writable:!1;this._validator=void 0!=c.validator?c.validator:"";this._maxLength=void 0!=c.maxLength?c.maxLength:100;this._printMode=c.printMode?c.printMode:
!1}
LALinkField.prototype=function(){return set(new Component,{init:function(){},renderHtml:function(a){var b="string"==typeof this._value?Util.escapeHTML(this._value):this._value;this._writable?(a.push("\x3cinput id\x3d'"+this.id+"_label' type\x3d'text' maxlength\x3d'"+this._maxLength+"' class\x3d'"),a.push(this._editClass+"' value\x3d'"+b+"' onblur\x3d'"+this.fireCode("_blur")+"'\x3e\x3c/input\x3e"),a.push("\x26#160;\x3cspan title\x3d'"+MSGS.COMMON_newWindow+"' alt\x3d'"+MSGS.COMMON_newWindow+"' "),a.push("id\x3d'"+
this.id+"_btn' onclick\x3d'"+this.fireCode("_openUrl")+"' class\x3d'openWinIcon' style\x3d'cursor:pointer'\x3e\x26#160;\x3c/span\x3e")):a.push('\x3ca href\x3d"'+b+'" target\x3d"_blank"\x3e\x3cspan id\x3d"'+this.id+'_Input" class\x3d"'+this._readOnlyClass+'"\x3e'+b+"\x3c/span\x3e\x3c/a\x3e")},_blur:function(){var a=this.getValue();a!=this._value&&this.dispatch("changed",{data:{field:this._fieldId,value:a}})},_openUrl:function(){var a=$(this.id+"_label").value;$(this.id+"_btn");""!=a&&window.open(a,
"","scrollbars,resizable,height\x3d540,width\x3d730")},setValue:function(a){this._value=a},getValue:function(){return this._writable&&$(this.id+"_label")?$(this.id+"_label").value:this._value}})}();
function LAInputField(a,b,c){this.register();assert(a,"[LAInputField] :field required");assert(c,"[LAInputField] :config required");this._fieldId=a;this._value=null==b||"undefuned"==b?"":b;this._readOnlyClass=void 0!=c.readOnlyClass?c.readOnlyClass:"readonly";this._editClass=void 0!=c.editClass?c.editClass:"laEditArea";this._writable=void 0!=c.writable?c.writable:!1;this._validator=void 0!=c.validator?c.validator:"";this._maxLength=void 0!=c.maxLength?c.maxLength:100}
LAInputField.prototype=function(){return set(new Component,{init:function(){},renderHtml:function(a){var b="string"==typeof this._value?Util.escapeHTML(this._value):this._value;this._writable?a.push("\x3cinput id\x3d'"+this.id+"' type\x3d'text' maxlength\x3d'"+this._maxLength+"' class\x3d'"+this._editClass+"' value\x3d'"+b+"' onblur\x3d'"+this.fireCode("_blur")+"'\x3e\x3c/input\x3e"):a.push('\x3cspan id\x3d"'+this.id+'_label" class\x3d"'+this._readOnlyClass+'"\x3e'+b+"\x3c/span\x3e")},_blur:function(){var a=
this.getValue();a!=this._value&&this.dispatch("changed",{data:{field:this._fieldId,value:a}})},setValue:function(a){this._value=a},getValue:function(){return this._writable&&$(this.id)?$(this.id).value:this._value}})}();
function LATextAreaField(a,b,c){this.register();assert(a,"[LAInputField] :field required");assert(c,"[LAInputField] :config required");this._fieldId=a;this._value=null==b||"undefuned"==b?"":b;this._config=c?c:{};this._readOnlyClass=void 0!=this._config.readOnlyClass?this._config.readOnlyClass:"readonly";this._editClass=void 0!=this._config.editClass?this._config.editClass:"laEditArea";this._writable=void 0!=this._config.writable?this._config.writable:!1;this._rows=this._config.rows?this._config.rows:
3;this._cols=this._config.cols?this._config.cols:40;this._config.label&&(this._label=this._config.label)}
LATextAreaField.prototype=function(){return set(new Component,{init:function(){},getEleId:function(){this.eleId||(this.eleId="txtArea"+this.id.substr(0,this.id.length-1));return this.eleId},renderHtml:function(a){var b="string"==typeof this._value?Util.escapeHTML(this._value):this._value;if(this._writable){if(this._config.coachingAdvisor||this._config.legalScan||this._config.spellCheck)a.push('\x3cdiv class\x3d"textAreaBtn cdpLATextAreaField"\x3e'),this._config.coachingAdvisor&&a.push('\x3ca class\x3d"coachingAdvisor" title\x3d"',
sfMessageFormat.format(MSGS.COACHING_ADVISOR_FOR,juic.maybeEscapeHTML(this._label)),'" onclick\x3d"javascript:',this.fireCode("_coachingAdvisor"),'" href\x3d"javascript:void(0);"\x3e',MSGS.COMMON_Coaching_Advisor,"\x3c/a\x3e"),this._config.spellCheck&&a.push('\x3ca class\x3d"spellCheck" title\x3d"',MSGS.spell_check_for,juic.maybeEscapeHTML(this._label),'" onclick\x3d"javascript:',this.fireCode("_spellCheck"),'" href\x3d"javascript:void(0);"\x3e',MSGS.COMMON_SPELLCHECK,"\x3c/a\x3e"),this._config.legalScan&&
a.push('\x3ca class\x3d"legalScan" title\x3d"',MSGS.legal_scan_for,juic.maybeEscapeHTML(this._label),'" onclick\x3d"javascript:',this.fireCode("_legalScan"),'" href\x3d"javascript:void(0);"\x3e',MSGS.COMMON_LEGALSCAN,"\x3c/a\x3e"),a.push("\x3c/div\x3e");a.push("\x3ctextarea name\x3d'"+this.getEleId()+"' id\x3d'"+this.getEleId()+"' class\x3d'"+this._editClass+"' rows\x3d'"+this._rows+"' style\x3d'width:100%' cols\x3d'"+this._cols+"' onblur\x3d'"+this.fireCode("_blur")+"'\x3e"+b+"\x3c/textarea\x3e")}else a.push('\x3cspan id\x3d"'+
this.getEleId()+'" class\x3d"'+this._readOnlyClass+'"\x3e'+b+"\x3c/span\x3e")},_coachingAdvisor:function(){var a=this._config.coachingAdvisor+this.getEleId();juic.$(this.getEleId()).focus();openCtrWin(a,"coachingAdvisor","scrollbars,resizable,height\x3d480,width\x3d730").focus();return!1},_spellCheck:function(){var a=document.getElementById(this.getEleId());document[a.id]=a;window[a.id]=a;juic.$(this.getEleId()).focus();DocumentEditorUtil.popUpSpellCheck(a.id,a.value);return!1},_legalScan:function(){var a=
this._config.legalScan+this.getEleId();juic.$(this.getEleId()).focus();openCtrWin(a,"legalscan","scrollbars,resizable,height\x3d480,width\x3d730").focus();return!1},_blur:function(){var a=this.getValue();a!=this._value&&this.dispatch("changed",{data:{field:this._fieldId,value:a}})},setValue:function(a){this._value=a},getValue:function(){return this._writable&&$(this.getEleId())?$(this.getEleId()).value:this._value}})}();
function LADateField(a,b,c){this.register();assert(a,"[LAInputField] :field required");this._fieldId=a;this._value=b?b:"";this._config=c;this.init()}
LADateField.prototype=function(){return set(new Component,{init:function(){this._CalendarField=new CDPCalendarField(this._value,this._config);this._config.editable&&this._CalendarField.addEventListener("change",this)},renderHtml:function(a){this._CalendarField.renderHtml(a)},setValue:function(a){this._value=a;this._CalendarField.removeEventListener("change",this);this._CalendarField.setValue(this._value);this._CalendarField.addEventListener("change",this)},getValue:function(){return this._config.editable&&
this._CalendarField?this._CalendarField.getValue():this._value},handleEvent:function(a){switch(a.type){case "change":a=this.getValue();a!=this._value&&this.dispatch("changed",{data:{field:this._fieldId,value:a?a:""}});break;default:assert(!0,"not handler for event:"+a.type)}}})}();
function LASingleSelectField(a,b,c,d){this.register();assert(a,"[LAInputField] :field required");assert(d,"[LAInputField] :config required");this._fieldId=a;this._value=b?b:"";this._values=c?c:[];this._readOnlyClass=void 0!=d.readOnlyClass?d.readOnlyClass:"readonly";this._editClass=void 0!=d.editClass?d.editClass:"laEditArea";this._writable=void 0!=d.writable?d.writable:!1;this._itemsList=[];this.init()}
LASingleSelectField.prototype=function(){return set(new Component,{init:function(){for(var a=!1,b="",c=0;c<this._values.length;c++){var d=this._values[c];this._itemsList.push({value:d.value,key:d.label,style:d.style});d.style&&!a&&(a=!0)}a&&(b="background:white;color:black");this._itemsList.splice(0,0,{value:"",key:MSGS.DEVELOPMENT_TRANSCRIPT_SINGLE_SELECT_DEFAULT,style:b});this._singleSelect=new SFSingleSelect(this._value,this._itemsList,this.id+"_LASingleSelect",{keepSelectedOptionStyle:!0});this._writable&&
this._singleSelect.addEventListener("change",this)},renderHtml:function(a){if(this._writable)a.push('\x3cdiv id\x3d"'+this.id+'"\x3e'),this._singleSelect.renderHtml(a),a.push("\x3c/div\x3e");else{var b=this._getLabelByValue(this._value);a.push('\x3cspan id\x3d"'+this.id+'" class\x3d"'+this._readOnlyClass+'"\x3e'+juic.maybeEscapeHTML(b)+"\x3c/span\x3e")}},setValue:function(a){this._value=a},getValue:function(){return this._writable&&this._singleSelect?this._singleSelect.getValue():this._value},_getLabelByValue:function(a){for(var b=
0;b<this._values.length;b++){var c=this._values[b];if(c.value==a)return c.style?'\x3cspan style\x3d"'+c.style+'"\x3e'+Util.escapeHTML(c.label)+"\x3c/span\x3e":Util.escapeHTML(c.label)}return""},handleEvent:function(a){switch(a.type){case "change":a=this.getValue();a!=this._value&&this.dispatch("changed",{data:{field:this._fieldId,value:a}});break;default:assert(!0,"not handler for event:"+a.type)}}})}();
function LACheckboxField(a,b,c){this.register();assert(a,"[LACheckboxField] :field required");assert(c,"[LACheckboxField] :config required");this._fieldId=a;this._value=b?b:!1;this._readOnlyClass=void 0!=c.readOnlyClass?c.readOnlyClass:"readonly";this._editClass=void 0!=c.editClass?c.editClass:"laEditArea";this._writable=void 0!=c.writable?c.writable:!1}
LACheckboxField.prototype=function(){return set(new Component,{init:function(){},renderHtml:function(a){a.push("\x3cinput id\x3d'"+this.id+"_checkbox' type\x3d'checkbox' onchange\x3d'"+this.fireCode("change")+"'");this._value&&a.push(" checked\x3d'checked' ");this._writable?a.push(" class\x3d'"+this._editClass+"'"):(a.push(" class\x3d'"+this._readOnlyClass+"'"),a.push(' readonly\x3d"readonly" disabled\x3d"disabled" '));a.push("\x3e\x3c/input\x3e")},change:function(){var a=this.getValue();a!=this._value&&
this.dispatch("changed",{data:{field:this._fieldId,value:a}})},setValue:function(a){this._value=a},getValue:function(){return this._writable&&$(this.id+"_checkbox")?$(this.id+"_checkbox").checked:this._value}})}();
function LACheckboxListField(a,b,c,d){this.register();assert(a,"[LACheckboxListField] :field required");assert(d,"[LACheckboxListField] :config required");this._fieldId=a;this._value=b?b:"";this._values=c?c:[];this._readOnlyClass=void 0!=d.readOnlyClass?d.readOnlyClass:"readonly";this._editClass=void 0!=d.editClass?d.editClass:"laEditArea";this._writable=void 0!=d.writable?d.writable:!1;this._repeatColnums=void 0!=d.repeatColnums?d.repeatColnums:1;this._width=void 0!=d.width?d.width:"90%";if(this._height=
void 0!=d.height?d.height:"")this._height="height:"+this._height+";overflow:auto";this._checkedValues=[];this.init()}
LACheckboxListField.prototype=function(){return set(new Component,{init:function(){this._checkedValues=this._value.split(",")},renderHtml:function(a){if(this._writable){a.push("\x3cdiv id\x3d'"+this.id+"_checkList' class\x3d'"+this._editClass+"' style\x3d'width:"+this._width);this._height&&a.push(";"+this._height);a.push("'\x3e");for(var b=0,c=0;c<this._values.length;c++){var d=this._values[c];if(d.value){var e=this._isChecked(d.value),d=new SFCheckBox(e,d.value,d.label?d.label:"","checkListboxChanged",
this.id+"_checkListItem");d.addEventListener("change",this);a.push("\x3cdiv\x3e");d.renderHtml(a);a.push("\x3c/div\x3e");b++}}a.push("\x3c/div\x3e")}else b=this.getLabels(),a.push('\x3cdiv id\x3d"'+this.id+'_checkList" class\x3d"'+this._readOnlyClass+'"\x3e'+juic.escapeHTML(b)+"\x3c/div\x3e")},_isChecked:function(a){for(var b=0;b<this._checkedValues.length;b++)if(this._checkedValues[b]==a)return!0;return!1},setValue:function(a){this._value=a;this.init()},getValue:function(){if(this._writable&&$(this.id+
"_checkList")){var a="",b,c=document.getElementsByTagName("input");for(b=0;b<c.length;b++)c[b].name==this.id+"_checkListItem"&&c[b].checked&&(""!==a&&(a+=","),a+=c[b].value);return a}return this._value},getLabels:function(){for(var a="",b=0;b<this._values.length;b++){var c=this._values[b];c.value&&this._isChecked(c.value)&&(a+=c.label,""!==a&&(a+="\x3cbr\x3e"))}return a},handleEvent:function(a){switch(a.type){case "change":a=this.getValue();a!=this._value&&this.dispatch("changed",{data:{field:this._fieldId,
value:a}});break;default:assert(!0,"not handler for event:"+a.type)}}})}();function LATableField(a,b,c){this.register();assert(b,"[LATableField] :field required");assert(a,"[LATableField] :model required");this._model=a;this._model.addEventListener("CertificationUpdated",this);this._fieldId=b;this._config=c?c:{};this._fieldMeta=this._model.getFieldMeta(this._fieldId);this._columns=this._fieldMeta.tableColumns;this._columnMap={};this._init()}
LATableField.prototype=function(){return set(new Component,{_init:function(){for(var a=0;a<this._columns.length;a++)this._columnMap[this._columns[a].id]=this._columns[a];this._maxUserCerts=4;this._maxUploadCertCount=2;this.editable=this._fieldMeta.editable;this.certPerms=this._fieldMeta.tableColumns;this._model.printMode&&(this.editable=!1)},renderHtml:function(a){a.push("\x3cdiv id\x3d'"+this.id+"'\x3e");this._createTable(a);a.push("\x3c/div\x3e")},updateView:function(){var a=[];this._createTable(a);
$(this.id)&&($(this.id).innerHTML=a.join(""))},_createTable:function(a){this._readonlyCertCount=this._userCertCount=0;this._data=this._model.activity[this._fieldId];if(0<this._columns.length&&0<this._data.length){a.push('\x3ctable style\x3d"margin-bottom: 0px;" cellspace\x3d"2" width\x3d"100%"\x3e');a.push('\x3cthead\x3e\x3ctr class\x3d"dataGrid"\x3e');a.push('\x3cth style\x3d"width:36%; text-align:left"\x3e'+this._columnMap.name.label+"\x3c/th\x3e");a.push('\x3cth style\x3d"width:27%; text-align:left"\x3e'+
this._columnMap.issue_date.label+"\x3c/th\x3e");a.push('\x3cth style\x3d"width:27%; text-align:left"\x3e'+this._columnMap.expire_date.label+"\x3c/th\x3e");a.push('\x3cth style\x3d"width:10%"\x3e\x26#160;\x3c/th\x3e');a.push("\x3c/tr\x3e\x3c/thead\x3e");var b,c;for(b=0;b<this._data.length;b++){c=this._data[b];var d;0!==b%2?a.push('\x3ctr class\x3d"a"\x3e'):a.push('\x3ctr class\x3d"b"\x3e');d=c.name?c.name:" ";this._model.printMode?d=new SFSpan(d):(d=new SFLink(d,{onClick:"openAttach",clickParam:c.link+
"\x26SKIPINTERSTITIAL",maxLength:20}),d.addEventListener("openAttach",this));a.push("\x3ctd\x3e");d.renderHtml(a);a.push("\x3c/td\x3e");a.push("\x3ctd\x3e");(d=this._getDateFiledControl(c,"issue_date"))&&d.renderHtml(a);a.push("\x3c/td\x3e");a.push("\x3ctd\x3e");(d=this._getDateFiledControl(c,"expire_date"))&&d.renderHtml(a);a.push("\x3c/td\x3e");a.push("\x3ctd\x3e");if(!c.readonly&&this.editable){d=new SFLink("  ",{css:"delete_button",onClick:"click"});var e=new CertificationEncapsulate(this._model,
d,c.id);d.addEventListener("click",e);e.renderHtml(a)}a.push("\x3c/td\x3e");a.push("\x3c/tr\x3e");c.readonly?this._readonlyCertCount++:this._userCertCount++}a.push("\x3c/table\x3e")}this._showUploadButton(a)},_showUploadButton:function(a){var b="undefined"!=typeof isRequireTranscriptLearningConsistency&&("true"==isRequireTranscriptLearningConsistency||1==isRequireTranscriptLearningConsistency);this.editable&&this._userCertCount+this._readonlyCertCount<this._maxUserCerts&&this._userCertCount<this._maxUploadCertCount&&
(this._addNewCert||(this._addNewCert=new SFCommandButton(MSGS.DEVELOPMENT_TRANSCRIPT_UPLOAD,!b,!0),this._addNewCert.setActionCommand("showUploadCertificate"),this._addNewCert.addEventListener("action",this)),this._addNewCert.renderHtml(a))},_getDateFiledControl:function(a,b){var c;if(this.editable){c={editable:this.editable};for(var d=!1,e=0;e<this.certPerms.length;e++)this.certPerms[e].id==b&&(d=this.certPerms[e].editable);a.readonly||!d?(c.editable=!1,c.writable=!1):(c.editable=!0,c.writable=!0);
d=new LADateField(b,a[b],c);c=new CertificationEncapsulate(this._model,d,a.id,b);d.addEventListener("changed",c)}else(_dateValue=a[b])&&0<_dateValue.trim().length&&(d=new DateFormat("yyyy-MM-dd"),c=new DateFormat(MSGS.COMMON_DateFormat),d=d.parse(_dateValue),_dateValue=c.format(d)),c=new SFSpan(_dateValue);return c},handleEvent:function(a){switch(a.type){case "openAttach":window.open(a.param);break;case "action":switch(a.actionCommand){case "showUploadCertificate":this._uploadFileDialog(this._model.activityId);
break;default:assert(!0,"not handler for event:"+a.type)}break;case "uploadSucceeded":a.response.result&&a.response.result.certification&&(cert=a.response.result.certification,this._importDlg.cleanValue(),this._model.updateCertification(cert,!0));break;case "CertificationUpdated":this.updateView();break;default:assert(!0,"not handler for event:"+a.type)}},_uploadFileDialog:function(a){this._importDlg||(this._importDlg=new CertificationUploadDialog("transcriptCertController",MSGS.DEVELOPMENT_TRANSCRIPT_UPLOAD,
500,300,{id:a},"",{columnMap:this._columnMap}),this._importDlg.addEventListener("uploadSucceeded",this));SFOverlayMgr.showOverlay(this._importDlg,!0)}})}();function CertificationEncapsulate(a,b,c,d){this.register();this._model=a;this._component=b;this._certId=c;this._field=d}
CertificationEncapsulate.prototype=function(){return set(new Component,{renderHtml:function(a){a.push("\x3cdiv id\x3d'"+this.id+"'\x3e");this._component.renderHtml(a);a.push("\x3c/div\x3e")},handleEvent:function(a){switch(a.type){case "click":confirm(MSGS.DEVELOPMENT_TRANSCRIPT_CERT_DEL_CONFIRM)&&this._model.deleteCertification(this._certId);break;case "changed":var b={};b.id=this._certId;b[this._field]=a.data.value;this._model.modifyCertification(b);a.target&&"object"==typeof a.target&&a.target.setValue(a.data.value)}},
cleanup:function(){this._component.cleanup();this.unregister()}})}();
function CertificationUploadDialog(a,b,c,d,e,g,h){this.register();this._name=a;this._isTextFile=!1;this._maxFiles=1;this._urlParams=e;this._titleText=b;this._width=c?c:550;this._height=d?d:300;g&&(this._instructions=g);this._checkIfRequireConsistency()?(this._closeButton=new SFCommandButton(MSGS.COMMON_Cancel,!1,!0),this._closeButton.setActionCommand("cancelEvent"),this._closeButton.addEventListener("action",this),this._uploadButton=new SFCommandButton(MSGS.COMMON_Upload,!0,!0),this._uploadButton.setActionCommand("uploadBegin"),
this._uploadButton.addEventListener("action",this),this._closeButton.enable=function(){this.setEnabled(!0)},this._closeButton.disable=function(){this.setEnabled(!1)},this._uploadButton.enable=function(){this.setEnabled(!0)},this._uploadButton.disable=function(){this.setEnabled(!1)}):(this._closeButton=new SFModalDlgBtn(MSGS.COMMON_Cancel,"cancelEvent"),this._closeButton.addEventListener("cancelEvent",this),this._uploadButton=new SFModalDlgBtn(MSGS.COMMON_Upload,"uploadBegin","active"),this._uploadButton.addEventListener("uploadBegin",
this));this._fileUpload=this._instructions?new CertificationUploader(this._name,this._urlParams,this._instructions,h):new CertificationUploader(this._name,this._urlParams,"",h);this._fileUpload.addEventListener("uploadProceed",this);this._fileUpload.addEventListener("uploadSucceeded",this);this._fileUpload.addEventListener("uploadFailed",this);this._fileUpload.addEventListener("wrongFile",this)}
CertificationUploadDialog.prototype=function(){return set(new Component,{renderHtml:function(a){var b="";this._checkIfRequireConsistency()&&(b=" activityUIConsistency sfDlgCntr");a.push('\x3cdiv id\x3d"'+this.id+'" style\x3d"display: block; visibility: inherit; width: '+this._width+"px; height: "+this._height+'px;" class\x3d"yui-module yui-overlay yui-panel modal_dlg uploadCertificateDlg'+b+'"\x3e\x3cdiv class\x3d"hd" style\x3d"cursor: auto;"\x3e\x3cdiv class\x3d"tl"\x3e\x3c/div\x3e\x3cspan\x3e'+
juic.escapeHTML(this._titleText)+'\x3c/span\x3e\x3cdiv class\x3d"tr"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"bd" style\x3d"height:'+(this._height-68)+'px;"\x3e\x3cdiv class\x3d"innerbd"\x3e');this._fileUpload.renderHtml(a);a.push("\x3c/div\x3e\x3c/div\x3e"+(this._checkIfRequireConsistency()?'\x3cdiv class\x3d"ftr" style\x3d"width:100%"\x3e':'\x3cdiv class\x3d"ft" style\x3d"width:100%"\x3e')+'\x3cdiv class\x3d"bl"\x3e\x3c/div\x3e');a.push(Util.isFioriEnabled()?'\x3cdiv class\x3d"button_row"\x3e':
"\x3cdiv\x3e");this._checkIfRequireConsistency()?a.push('\x3cdiv id\x3d"button_bar_'+this.id+'" class\x3d"right uploadCertificateDlgFooter" style\x3d"padding-top:3px;"\x3e'):a.push('\x3cdiv id\x3d"button_bar_'+this.id+'" class\x3d"right" style\x3d"padding-right:.5em;"\x3e');this._uploadButton.renderHtml(a);this._closeButton.renderHtml(a);a.push('\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"br"\x3e\x3c/div\x3e\x3c/div\x3e\x3cspan id\x3d"dlg_close_x" onclick\x3d"'+this.fireCode("cancel")+'" class\x3d"container-close uploadCertificateDlgCloseBtn"\x3e\x3c/span\x3e\x3c/div\x3e')},
cancel:function(){this._uploadInProgress||(this._fileUpload.cleanup(),this.dispatch("hide"))},handleEvent:function(a){switch(a.type){case "action":switch(a.actionCommand){case "cancelEvent":this._fileUpload.cleanup();this.dispatch("hide");break;case "uploadBegin":this._fileUpload.checkFields()}break;case "cancelEvent":this._fileUpload.cleanup();this.dispatch("hide");break;case "uploadBegin":this._fileUpload.checkFields();break;case "uploadProceed":this._uploadInProgress=!0;this._uploadButton.disable();
this._closeButton.disable();this._fileUpload.doUpload();break;case "uploadSucceeded":this._uploadInProgress=!1;this._uploadButton.enable();this._closeButton.enable();this._fileUpload.cleanup();this.dispatch("uploadSucceeded",{response:a.response});break;case "uploadFailed":this._uploadInProgress=!1;this._uploadButton.enable();this._closeButton.enable();this._fileUpload.cleanup();this.dispatch("uploadFailed",{response:a.response});break;case "wrongFile":this._uploadInProgress=!1,this._uploadButton.enable(),
this._closeButton.enable(),this._fileUpload.cleanup()}},cleanValue:function(){this.dispatch("hide");this._fileUpload.cleanValue()},_checkIfRequireConsistency:function(){return"undefined"==typeof isRequireTranscriptLearningConsistency||"true"!=isRequireTranscriptLearningConsistency&&1!=isRequireTranscriptLearningConsistency?!1:!0}})}();
function CertificationUploader(a,b,c,d){this.register();this._name=a;this._fieldCount=1;this._isTextFile=!1;this._formLayout=new SFInputFormLayout;this._formFields=[];this._urlParamsObj=b;c&&(this._instructions=c);this._config=d;this.init();this.setInputLine()}
CertificationUploader.prototype=function(){return set(new Component,{init:function(){this._fileInputs=[];for(var a=1;a<=this._fieldCount;++a){var b=1==this._fieldCount?MSGS.COMMON_Choose_File:MSGS.get("COMMON_Choose_File_With_Index",a);this._formFields.push(new SFFileInput(a));this._formLayout.addField(b,this._formFields[a-1],{required:!0})}this._isTextFile&&(this._formFields.push(new SFSingleSelect("",this._getEncodingOptions())),this._formLayout.addField(MSGS.COMMON_File_Encoding,this._formFields[a-
1],{required:!0}))},setInputLine:function(){this._formLayout&&(this._fileNameInput=new LAInputField("certFileName","",{writable:this._config.columnMap.name.editable,maxLength:256}),this._startDateInput=new CDPCalendarField("",{editable:this._config.columnMap.issue_date.editable}),this._startDateInput.addEventListener("change",this),this._endDateInput=new CDPCalendarField("",{editable:this._config.columnMap.expire_date.editable}),this._endDateInput.addEventListener("change",this),this._formLayout.addField(this._config.columnMap.name.label,
this._fileNameInput,{required:this._config.columnMap.name.required}),this._formLayout.addField(this._config.columnMap.issue_date.label,this._startDateInput,{required:this._config.columnMap.issue_date.required}),this._formLayout.addField(this._config.columnMap.expire_date.label,this._endDateInput,{required:this._config.columnMap.expire_date.required}))},checkFields:function(){this._formLayout.fieldsOk()?this.dispatch("uploadProceed"):this.setErrorMessage(MSGS.COMMON_Choose_File_Error)},_getEncodingOptions:function(){return[{key:MSGS.COMMON_ISO_8859_1,
value:"ISO-8859-1"},{key:MSGS.COMMON_UTF_8,value:"UTF-8"},{key:MSGS.COMMON_EUC_KR,value:"EUC-KR"},{key:MSGS.COMMON_GB2312,value:"GB2312"},{key:MSGS.COMMON_HZ,value:"HZ"},{key:MSGS.COMMON_Big5,value:"Big5"},{key:MSGS.COMMON_EUC_TW,value:"EUC-TW"},{key:MSGS.COMMON_EUC_JP,value:"EUC-JP"},{key:MSGS.COMMON_Shift_JIS,value:"Shift-JIS"}]},renderHtml:function(a){a.push('\x3cdiv id\x3d"msgDiv_'+this.id+'"\x3e\x3c/div\x3e');a.push('\x3cdiv id\x3d"'+this.id+'"\x3e\x3cform id\x3d"form_'+this.id+'"\x3e');this._instructions&&
a.push('\x3cdiv style\x3d"margin-bottom:10px;"\x3e\x3cem class\x3d"instructions"\x3e'+juic.escapeHTML(this._instructions)+"\x3c/em\x3e\x3c/div\x3e");this._formLayout.renderHtml(a);a.push("\x3c/form\x3e\x3c/div\x3e")},_createPostingFrame:function(){if(!$("iframe"+this.id)){var a=document.createElement("iframe"),b="iframe_"+this.id;a.setAttribute("id",b);a.setAttribute("name",b);a.setAttribute("src","/ui/uicore/img/_.gif");set(a.style,{display:"none",top:"0px",left:"0px"});$("form_"+this.id).appendChild(a);
window.frames[b].name=b}},_removePostingFrame:function(){var a=$("form_"+this.id),b=$("iframe_"+this.id);b&&(b.src="/ui/uicore/img/_.gif",a.removeChild(b))},_getQueryString:function(a){var b="",c;for(c in a)b+=encodeURIComponent(c)+"\x3d"+encodeURIComponent(a[c])+"\x26";this._config.columnMap.name.editable&&(b+=encodeURIComponent("certName")+"\x3d"+encodeURIComponent(this._fileNameInput.getValue())+"\x26");this._config.columnMap.issue_date.editable&&(b+=encodeURIComponent("issue_date")+"\x3d"+encodeURIComponent(this._startDateInput.getValue())+
"\x26");this._config.columnMap.expire_date.editable&&(b+=encodeURIComponent("expire_date")+"\x3d"+encodeURIComponent(this._endDateInput.getValue())+"\x26");return b.substring(0,b.length-1)},setMessage:function(a){$("msgDiv_"+this.id)&&("object"==typeof a?a.render("msgDiv_"+this.id):$("msgDiv_"+this.id).innerHTML=escapeHTML(a))},clearMessage:function(){$("msgDiv_"+this.id).innerHTML=""},doUpload:function(){this._createPostingFrame();var a=this._getQueryString(this._urlParamsObj);this.setFormAttributes({action:"/upload?name\x3d"+
this._name+"\x26componentId\x3d"+this.id+"\x26responseHandler\x3dhandleResponse\x26\x26_s.crb\x3d"+ajaxSecKey+"\x26"+a,target:"iframe_"+this.id,method:"POST",enctype:"multipart/form-data",encoding:"multipart/form-data"});this._submitForm()},_enableformItems:function(a){for(var b=0,c=this._formFields.length;b<c;b++)this._formFields[b].setEnabled(a)},_getForm:function(){return $("form_"+this.id)},setFormAttributes:function(a){var b=this._getForm(),c;for(c in a)b.setAttribute(c,a[c])},_submitForm:function(){try{this._getForm().submit(),
this._enableformItems(!1),this.setLoadingMessage()}catch(a){this.dispatch("wrongFile"),this.setErrorMessage(MSGS.COMMON_Choose_File_Error)}},handleResponse:function(a){this.clearMessage();var b=a.message,c=a.result,d;a.success?(d="uploadSucceeded",this.config&&this.config.multiUploadMode&&1==this.config.multiUploadMode&&this._enableformItems(!0),this.setInfoMessage(b)):(d="uploadFailed",this._enableformItems(!0),void 0!==c?this.setErrorMessage(b+": "+c):this.setErrorMessage(b));this.dispatch(d,{response:a})},
setLoadingMessage:function(){this._uploadMsg||(this._uploadMsg=new SFSimpleLoading("Uploading...","#333"));this.setMessage(this._uploadMsg)},setErrorMessage:function(a){this.setMessage(new SFSysMsg("error",a))},setInfoMessage:function(a){this.setMessage(new SFSysMsg("info",a))},cleanup:function(){this._removePostingFrame()},handleEvent:function(a){switch(a.type){case "change":var b=a.target.getValue();a.target.setValue(null==b?"":b);break;default:assert(!0,"not handler for event:"+a.type)}},cleanValue:function(){this._fileNameInput.setValue("");
this._startDateInput.setValue("");this._endDateInput.setValue("")}})}();function CDPIPETextAreaField(a,b){this.register();this.setValue(a);this._readOnlyClass=void 0!=b.readOnlyClass?b.readOnlyClass:"readonly";this._writable=void 0!=b.writable?b.writable:!0;this._rows=b.rows?b.rows:3;this._cols=b.cols?b.cols:40;this._allowBr=b.allowBr||"boolean"!=typeof b.allowBr?!0:!1}
CDPIPETextAreaField.prototype=function(){return set(new Component,{init:function(a,b){this.value=a;this._readOnlyClass=void 0!=b.readOnlyClass?b.readOnlyClass:"readonly";this._writable=void 0!=b.writable?b.writable:!0;this._rows=b.rows?b.rows:3;this._cols=b.cols?b.cols:40;this._allowBr=b.allowBr||"boolean"!=typeof b.allowBr?!0:!1},renderHtml:function(a){this._writable?a.push("\x3ca href\x3d'javascript:void(0)' id\x3d'"+this.id+"_a' onclick\x3d'"+this.fireCode("focus")+"' class\x3d'editable' \x3e"+
this.getDisplayValue()+"\x3c/a\x3e\x3ctextarea id\x3d'"+this.id+"' rows\x3d'"+this._rows+"' cols\x3d'"+this._cols+"' onblur\x3d'"+this.fireCode("blur")+"'"+(this._allowBr?"":" onkeypress\x3d'if(event.keyCode\x3d\x3d13) return false;'")+" style\x3d'display:none;'\x3e"+Util.escapeHTML(this.value)+"\x3c/textarea\x3e"):a.push('\x3cspan id\x3d"'+this.id+'" class\x3d"'+this._readOnlyClass+'"\x3e'+this.getDisplayValue()+"\x3c/span\x3e")},getDisplayValue:function(){var a=this.value;this.value&&0!=this.value.length||
(a="["+MSGS.COMMON_Click_to_edit+"]");a=Util.escapeHTML(a);return a=a.replace(/[\r\n]+/g,"\x3cbr\x3e")},setValue:function(a){this.value=a},getValue:function(){return this._writable&&$(this.id)?$(this.id).value:this.value},focus:function(){var a=$(this.id);a.previousSibling.style.display="none";a.style.display="";a.focus();a.select();this.oldValue=a.value},blur:function(){var a=$(this.id),b=a.previousSibling;input_value=a.value;this._allowBr||(input_value=input_value.replace(/(\r|\n)/g,""));this.setValue(input_value);
a.value=input_value;b.innerHTML=this.getDisplayValue();a.style.display="none";b.style.display="";this.value!=this.oldValue&&(this._modified||this.dispatch("change",{oldValue:this.oldValue,newValue:this.value}))}})}();function CDPLearningActivityDetailPageController(a,b,c,d,e){this.register();this.init(a,b,c,d,e)}
CDPLearningActivityDetailPageController.prototype=function(){return set(new Component,{init:function(a,b,c,d,e){this.model=new ActivityDetailModel;this.model.setDao(d);this.model.setActivityId(a);this.model.setUserId(b);c&&""!=c&&this.model.setParam("objId",c);this.pageLayout=new LearningActivityDetailPageLayout(this.model,e);this.model.loadActivity()},renderByConfig:function(a){this.pageLayout.renderByConfig(a)}})}();function EmbedController(a,b){this.register();this.init(a,b)}
EmbedController.prototype=function(){return set(new Component,{init:function(a,b){assert(a,"import dwr fail");b&&(this.config=b);this.model=new ActivityDetailModel;b.extraData&&this.model.setExtraData(b.extraData);this.model.setDao(a);this.model.addEventListener("messageEvents",this);this.model.addEventListener("activitySaved",this);this.model.addEventListener("activityLoaded",this);this.model.addEventListener("fieldError",this)},setActivityId:function(a){this.model.setActivityId(a)},setFormSubjId:function(a){this.model.setFormSubjId(a)},
setLoginUserId:function(a){this.model.setLoginUserId(a)},setUserId:function(a){this.model.setUserId(a)},setObjId:function(a){a&&""!=a&&this.model.setParam("objId",a)},setParam:function(a){assert(void 0!=a.selectedUserId,"selectedUserId must be specified.");"undefined"!=typeof MSGS&&"undefined"==typeof ISO8601Dateformatter&&(ISO8601Dateformatter=new DateFormat(ComponentConsts.ISO8601DATEFORMAT),dateformatter=new DateFormat(MSGS.COMMON_DateFormat));a.isNew?(assert(void 0!=a.objId,"objId must be specified."),
this.setUserId(a.selectedUserId),this.setObjId(a.objId)):(assert(void 0!=a.activityId,"activityId must be specified."),this.setActivityId(a.activityId),this.setUserId(a.selectedUserId))},loadData:function(){this.model.loadActivity()},hideEditor:function(){this.pageLayout.hide()},handleEvent:function(a){switch(a.type){case "activitySaved":this.dispatchEvent(a);break;case "fieldError":this.dispatchEvent(a);break;case "messageEvents":this.model.editorShow||this.dispatch("activityEditorMessage",a.msg);
break;case "activityLoaded":this.pageLayout=new ActivityDetailEditor(this.model,this.config),this.pageLayout.loadPage(),this.dispatch("activityLoaded")}},cleanup:function(){this.pageLayout&&this.pageLayout.cleanup();this.unregister()}})}();function LMSIframeDialog(a){this.register();this.init(a)}
LMSIframeDialog.prototype=function(){var a=IMAGES["/ui/juic/img/_.gif"];return set(new Component,{init:function(a){this._minWidth=a.width?a.width:0;this._minHeight=a.height?a.height:0;this._innerWidth=2*SFDom.getViewportWidth()/3;this._innerWidth=this._innerWidth>this._minWidth?this._innerWidth:this._minWidth;this._innerHeight=2*SFDom.getViewportHeight()/3;this._innerHeight=this._innerHeight>this._minHeight?this._innerHeight:this._minHeight;this._iframeWidth=this._innerWidth-20;this._iframeHeight=
this._innerHeight-20;this._iFrameID=this.id+"_iframe";this._iFrameProxyID=this._iFrameID+"_proxy";this.param=a;this.setURL(a.url);this._buttons=[];this._title=a.title?a.title:"";this.setButtons(a.buttons);this._focusLoop=new SFFocusLoop(this.id);this._focusMarkers=this._focusLoop.getMarkers()},renderIframeIntoProxy:function(b){b||(b=a);var c=this._iFrameID,d=juic.$(c);d?d.src=b:(d=juic.createRenderContext(),d.push("\x3ciframe ",' id\x3d"'+c+'"',' name\x3d"'+c+'"',' style\x3d"',this._iframeHeight?
"height:"+this._iframeHeight+"px;":"",this._iframeWidth?"width:"+this._iframeWidth+"px":"",'"',' src\x3d"',b,'"',' frameBorder\x3d"0"',' title\x3d"',juic.escapeHTML(this._title),'"\x3e\x3c/iframe\x3e'),d.renderInto(this._iFrameProxyID))},renderIframeIfReady:function(){if(this._isIframeReadyToBeRendered){var a=this,c=function(){var b=a._dataToPost,c=a._url;a.renderIframeIntoProxy(!b&&c);b&&a._postDataInternal(c,b)},d=SFDom.text("lmsCookieMechanismURL");if(d)"null"==d?c():invokeLMS3rdPartyCookieMechanism(d,
c);else{var e=AjaxService.getMBeanInstance("learningController");e?e.getThirdPartyCookieMechanismURL({callback:function(a){d=a;"null"==d&&(d=null);a=juic.$("lmsCookieMechanismURL");a||(a=document.createElement("span"),a.id="lmsCookieMechanismURL",a.style.display="none",document.body.appendChild(a));a.innerHTML=juic.escapeHTML(d||"null");d?invokeLMS3rdPartyCookieMechanism(d,c):c()},errorHandler:function(a,b){alert(a);c()}}):(alert('Could not load "learningController" ajax service, so assuming that 3rd-party cookie mechanism is disabled...'),
c())}}},renderHtml:function(a){a.push('\x3cdiv class\x3d"sfDlg" id\x3d"'+this.id+'" style\x3d"position:relative; -webkit-overflow-scrolling: touch;" title\x3d"'+juic.escapeHTML(this._title)+'"\x3e');a.push('\x3ca name\x3d"namedAnchor_',this.id,'" id\x3d"namedAnchor_',this.id,'"\x3e\x3c/a\x3e');this._focusMarkers[0].renderHtml(a);a.push('\x3cdiv id\x3d"'+this.id+'_underlay" style\x3d"width:'+this._innerWidth+"px;height:"+(this._innerHeight+40)+'px;" class\x3d"underLay"\x3e\x3c/div\x3e');a.push('\x3cdiv id\x3d"'+
this.id+'_overlay" class\x3d"sfDlgCntr" style\x3d"width:'+this._innerWidth+'px;"\x3e');a.push('\x3cdiv id\x3d"'+this.id+'_body" class\x3d"body" style\x3d"height:'+this._innerHeight+'px;"\x3e\x3cdiv id\x3d"'+this.id+'_innerBody" class\x3d"innerBdy" style\x3d"padding:8px;"\x3e');a.push('\x3cdiv id\x3d"'+this.id+'_hide_area" style\x3d"display:none;"\x3e\x3c/div\x3e');a.push("\x3cspan ",' id\x3d"'+this._iFrameProxyID+'"',' style\x3d"display:block;text-align:center;',this._iframeHeight?"height:"+this._iframeHeight+
"px;":"",this._iframeWidth?"width:"+this._iframeWidth+"px":"",'"',"\x3e");a.push(new SFLoading(null,null,{isNewLoadingIndicator:!0,isSectionLoadingIndicator:!1}));a.push("\x3c/span\x3e");a.push("\x3c/div\x3e\x3c/div\x3e");a.push('\x3cdiv class\x3d"ftr"\x3e\x3cdiv class\x3d"button_row"\x3e\x3cdiv class\x3d"right" id\x3d"dialog_btns'+this.id+'"\x3e');this._buttons&&this._renderButtons(a);a.push("\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e");a.push("\x3c/div\x3e");this._focusMarkers[1].renderHtml(a);a.push("\x3c/div\x3e")},
setFocus:function(){var a=juic.$("namedAnchor_"+this.id);a&&(a.focus(),window.location.hash="#"+a.name)},setURL:function(b,c){this._dataToPost=c;this._isIframeReadyToBeRendered=!!b;this._url=b||a},loadURL:function(a){this.setURL(a);this.renderIframeIfReady()},_renderButtons:function(a){for(var b=this._buttonDefs,d=0,e=b.length;d<e;++d){var g=b[d],h=new SFCommandButton(g.label,g.active,g.enabled);h.setActionCommand(g.eventName);h.addEventListener("action",this);this._buttons.push(h);h.renderHtml(a)}},
setButtons:function(a){for(;this._buttons&&0<this._buttons.length;)this._buttons.shift().cleanup();this._buttonDefs=a},handleEvent:function(a){"action"==a.type&&("hide"==a.actionCommand?this.dispatch("hide"):this.dispatchEvent(a))},show:function(){SFOverlayMgr.addEventListener("overlayRendered",this,"_dialogRendered");SFOverlayMgr.showOverlay(this,!0);this.renderIframeIfReady()},closeDialog:function(){this.dispatch("hide")},refreshParent:function(){this.dispatch("action",{actionCommand:"refresh"})},
postData:function(a,c){this.setURL(a,c||{});this.renderIframeIfReady()},_postDataInternal:function(a,c){var b=this.id+"_form",e=juic.$(b),g=!e,h,k=[];if(g){var m=this.id+"_hide_area";h=juic.$(m);if(!h){alert('Could not locate the "'+m+'" element -- aborting operation');return}k.push('\x3cform style\x3d"display:none;" id\x3d"',b,'" target\x3d"',this._iFrameID,"\" action\x3d'"+a+'\' method\x3d"post"\x3e')}else h=e,e.action=a;for(var r in c)k.push("\x3cinput type\x3d'hidden' name\x3d'",r,"' value\x3d'",
c[r],"'\x3e");g&&k.push("\x3c/form\x3e");h&&(h.innerHTML=k.join(""),g&&(e=juic.$(b)),e&&e.submit())},_dialogRendered:function(a){a.componentId==this.id&&this.setFocus(!1)}})}();
window.invokeLMS3rdPartyCookieMechanism=function(a,b){var c="lms_polling_"+Date.now(),d=SFSessionStorage.getItem("lms_visited"),e=0<Util.ieVersion(!0);!d&&e&&0>document.cookie.indexOf("visit_lms\x3d1")&&(d=!0,SFSessionStorage.setItem("lms_visited","1"));d?b&&b():(SFDOMEvent.addEventListener(window,"message",function(a){"LMS_VISITED"==a.data&&(SFSessionStorage.setItem("lms_visited","1"),b&&b())},!1),d=0<=a.indexOf("?")?"\x26":"?",a+=d+"fromSF\x3dY\x26lms_polling_key\x3d"+c,c=function(){window.open(a,
"_blank","location\x3d1,resizable\x3d1,scrollbars\x3d1,status\x3d1,width\x3d320,height\x3d240")||alert(MSGS.LEARNING_POPUPS_REQUIRED_ERROR)},e?(e=juic.$("lmsVisitProxyFrame"))?(e.onload=c,e.src=a):(e=document.createElement("iframe"),e.id="lmsVisitProxyFrame",e.onload=c,e.src=a,e.style.display="none",document.body.appendChild(e)):c())};
var EXT_URL_TYPE_CDP_FIND_IN_CATALOG=1,EXT_URL_TYPE_CDP_SEARCH_BY_COMPETENCY=4,EXT_URL_TYPE_TGM_CATALOG_SEARCH=5,EXT_URL_TYPE_CDP_CWS_CATALOG_SEARCH=11,EXT_URL_TYPE_CDP_CWS_SEARCH_BY_COMPETENCY=12,EXT_URL_TYPE_MTR_COMPETENCY_SEARCH=13,EXT_URL_TYPE_EDU_COMPETENCY_SEARCH=14;