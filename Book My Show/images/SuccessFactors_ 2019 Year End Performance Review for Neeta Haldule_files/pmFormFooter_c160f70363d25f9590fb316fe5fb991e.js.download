function PMFormFooter(a){this.register();this._init(a)}
(function(){juic.extend(PMFormFooter,juic.Component,{_init:function(a){this._data=a;this._primaryButtons=new PMFormFooterButtons(this._data.primaryActionList||[],this._data.moreActionList||[],!0);this._additionalLinks=new PMFormFooterButtons(this._data.secondaryActionList||[],[],!1);this._moreButtons=new PMFormFooterMoreButtons(this._data.moreActionList||[])},renderHtml:function(a){this._additionalLinks.renderHtml(a);this._data.moreActionList&&0<this._data.moreActionList.length&&this._moreButtons.renderHtml(a);
this._primaryButtons.renderHtml(a)}})})();function PMFormFooterMoreButtons(a){this.register();this._init(a)}
(function(){juic.extend(PMFormFooterMoreButtons,juic.Component,{_init:function(a){this._data=a;this._moreActionItems=[];for(a=0;a<this._data.length;a++)this._moreActionItems.push({label:this._data[a].displayName,actionCommand:"workflowButtonClicked",value:this._data[a]});1==this._moreActionItems.length&&"undefined"!=typeof this._moreActionItems[0]&&null!=this._moreActionItems[0]?(this._moreActions=new SFCommandButton(this._moreActionItems[0].label||"",!1,!!this._moreActionItems[0].value&&!!this._moreActionItems[0].value.enabled,
!0,{baseButtonWrapperClass:"sfDialogBoxButtonWrapper"}),this._moreActions.setActionCommand(this._moreActionItems[0].actionCommand||{}),this._moreActions.setData(this._moreActionItems[0].value||{})):this._moreActions=new SFDropMenu(this._moreActionItems,{title:MSGS.PERFORMANCE_BUTTONS_MORE_ACTIONS,content:MSGS.PERFORMANCE_BUTTONS_MORE_ACTIONS,showTriangle:!0,button:!0,buttonType:"command",popupCss:"pmuDropDown"});this._moreActions.addEventListener("action",this,"handleActionEvent")},renderHtml:function(a){a.push("\x3cdiv class\x3d' pmFooterButtonSpacing'\x3e");
this._moreActions.renderHtml(a);a.push("\x3c/div\x3e");a.addAfterRenderListener(this,"postRender")},postRender:function(){if(this._moreButton){var a=juic.$(this._moreButton.getButtonId());a&&(a.innerHTML+=' \x3cspan class\x3d"sapIcon"\x3e\x26#xe1ef;\x3c/span\x3e')}},handleActionEvent:function(a){switch(a.actionCommand){case "workflowButtonClicked":a.menuItem&&a.menuItem.value?workflowButtonOnClickHandler(a.menuItem.value):a&&a.data&&workflowButtonOnClickHandler(a.data)}}})})();
function PMFormFooterButtons(a,b,e){this.register();this._init(a,b,e)}
(function(){juic.extend(PMFormFooterButtons,juic.Component,{_init:function(a,b,e){this._data=a;this._buttonList=[];for(a=0;a<this._data.length;a++){for(var d=this._data[a]&&this._data[a].actionType,d=(d=d&&"inner_step_send"===this._data[a].actionType)&&(a!=this._data.length-1&&"undefined"!=typeof this._data[a+1]&&this._data[a+1]&&"inner_step_send"===this._data[a+1].actionType||0==a&&"undefined"!=typeof b[0]&&b[0]&&"inner_step_send"===b[0].actionType),c=this._data[a],f=[];d&&c&&"inner_step_send"===
c.actionType&&(a<this._data.length||0<b.length);)f.push({label:c.displayName,actionCommand:"workflowButtonClickedMenu",value:c}),c="undefined"!=typeof this._data[a+1]&&this._data[a+1]&&"inner_step_send"===this._data[a+1].actionType?this._data[++a]:"undefined"!=typeof b[0]&&b[0]&&"inner_step_send"===b[0].actionType?b.shift():null;d?(d=new SFDropMenu(f,{title:MSGS.PERFORMANCE_BUTTONS_SEND_TO,content:MSGS.PERFORMANCE_BUTTONS_SEND_TO,showTriangle:!0,button:!0,buttonType:"command",popupCss:"pmuDropDown",
activeButton:e&&a==this._data.length-1}),d.addEventListener("action",this,"handleActionEvent"),this._buttonList.push(d),this._data[0]&&this._data[1]&&"inner_step_send"==this._data[0].actionType&&"inner_step_send"==this._data[1].actionType&&null!=b&&0!=b.length&&(d=b.shift(),c=new SFCommandButton(d.displayName,!1,d.enabled,!0,{baseButtonWrapperClass:"sfDialogBoxButtonWrapper"}),c.setActionCommand("workflowButtonClicked"),c.setData(d),c.addEventListener("action",this,"handleActionEvent"),this._buttonList.unshift(c))):
(c=new SFCommandButton(this._data[a].displayName,e&&a==this._data.length-1,this._data[a].enabled,!0,{baseButtonWrapperClass:"sfDialogBoxButtonWrapper"}),c.setActionCommand("workflowButtonClicked"),c.setData(this._data[a]),c.addEventListener("action",this,"handleActionEvent"),this._buttonList.push(c))}},renderHtml:function(a){for(var b=0;b<this._buttonList.length;b++)a.push("\x3cdiv class\x3d' pmFooterButtonSpacing'\x3e"),this._buttonList[b].renderHtml(a),a.push("\x3c/div\x3e");a.addAfterRenderListener(this,
"postRender")},postRender:function(){for(var a=0;a<this._buttonList.length;a++)this._buttonList[a]instanceof SFDropMenu||(juic.$(this._buttonList[a].getButtonId()).accessKey=WORKFLOW_BUTTONS_ENUM[this._data[a].actionType]?WORKFLOW_BUTTONS_ENUM[this._data[a].actionType].accessKey:"")},handleActionEvent:function(a){switch(a.actionCommand){case "workflowButtonClicked":workflowButtonOnClickHandler(a.data);break;case "workflowButtonClickedMenu":a.menuItem&&a.menuItem.value&&workflowButtonOnClickHandler(a.menuItem.value)}}})})();
function workflowButtonOnClickHandler(a){if(!PMUSaveUtils.checkSessionTimeout())if(a.onClickString)eval(a.onClickString);else{for(var b in a.fieldKeyValueMap)Util.setField(b,a.fieldKeyValueMap[b]);a.submitRequired&&PMUSaveUtils.submitForm()}}
WORKFLOW_BUTTONS_ENUM={inner_step_send:{accessKey:"3"},next_step:{accessKey:"3"},previous_step:{accessKey:""},sign:{accessKey:"3"},add_signer:{accessKey:""},remove_signer:{accessKey:""},reject:{accessKey:""},send_copy:{accessKey:""},complete_360:{accessKey:"3"},decline_360:{accessKey:""},get_feedback:{accessKey:"f"},add_modifer:{accessKey:"3"},complete_my_cstep:{accessKey:"3"},move_to_360_signoff:{accessKey:""},save:{accessKey:""},save_and_close:{accessKey:"s"},recall_feedback:{accessKey:""},cancel:{accessKey:"2",
notPrimary:!0}};