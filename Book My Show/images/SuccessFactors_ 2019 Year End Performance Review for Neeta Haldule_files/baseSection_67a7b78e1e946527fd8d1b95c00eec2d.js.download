function PM2BaseSection(){}
(function(){juic.extend(PM2BaseSection,BaseControl,{getSectionId:function(){return null},getFocussableAnchor:function(){return null},getItemId:function(){return null},editInSummarySectWeights:function(a){this.weightSymbol=this.sectionData&&!this.sectionData.hideWeightPercentSign?window.formConfig.weightSymbol:"";this.editSectWeight=new PM2EditWeight(this.m,"",{title:MSGS.PERFORMANCE_PM2_EDIT_SECTION_WEIGHTS,dataKey:"inSumSectionWeight",type:"inSummary",weightSymbol:this.weightSymbol});this.editSectWeight.addEventListener("saveWeights",
this,"_updateSectWeightValue");this.editSectWeight.show(a.triggerElId)},_updateSectWeightValue:function(a){if(a=a.weights)for(var b=0,c=a.length;b<c;b++){var d=a[b];this.m.setData(d.datapath,d.weight)}},getSectionTitle:function(){juic.assert(!1,"[PM2BaseSection] : Any component extending this component is expected to implement getSectionTitle method")},getFocusId:function(){juic.assert(!1,"[PM2BaseSection] : Any component extending this component is expected to implement getFocusId method")}})})();
function BaseItem(){this.register();this._isExpanded=!1}(function(){extend(BaseItem,Component,{renderBody:function(a){},renderHtml:function(a){a.push('\x3cdiv id\x3d"',this.id,'" class\x3d"globalPortletBodyBackground globalRoundedCorners pmPortletContainer pmPortletBorder"\x3e');a.push('\x3cdiv class\x3d"pmPanelContent globalPortletBody"\x3e');this.renderBody(a);a.push("\x3c/div\x3e");a.push("\x3c/div\x3e")}})})();function PM2BaseReviewApp(){this._m=this.subComponents=null}
PM2BaseReviewApp.prototype=function(){return set(new Component,{getModel:function(){return this._m},getPortletComponent:function(a,b){for(var c=this.subComponents.length,d,e=0;e<c;e++)if(d=this.subComponents[e].getComponent(),d.getSectionId()==a)if(b){if(d.getItemId&&d.getItemId()==b)return this.subComponents[e]}else return this.subComponents[e];return null},getNextPortletComponent:function(a,b){for(var c=this.subComponents.length,d,e=this.getModel()?this.getModel().hasSectionComment(a):!1,f=!1,g=
0;g<c;g++)if(d=this.subComponents[g].getComponent(),d.getSectionId()==a){if(f=!0,b&&d.getItemId&&d.getItemId()>b)return this.subComponents[g]}else if(f){if(!b)return this.subComponents[g];if(b&&e)return this.subComponents[g-1]}return null}})}();function PM2SectionOverallComment(a,b){this.register();this._init(a,b)}
PM2SectionOverallComment.prototype=function(){return set(new PM2BaseSection,{_init:function(a,b){this._m=a;this.dataPath=b;this.section=this._m.getData(b);this._isSelfReview=formConfig.subject.userId==formConfig.currentUser.userId;this._isObjective="OBJECTIVE"==this.section.sectType;this._sectionId=this.section.elementId;this.title=this.section.sectionCommentsLabel;this.COMMENT_MAX_COUNT=4E3;this.UNDEFINED_VALUE=-1;var c=this.section.sectComment;if(c){if(c.commentsPerm&&"write"==c.commentsPerm.name){var d=
c.commentKey;this._comptenySelector=null;var e=!1;if("COMPETENCY"==this.section.sectType){this._selectorItems=[];for(var f=this.section.sectItems,g=f.length,h=0;h<g;h++){var k=f[h],k=new SFSimpleSelectItem(k.itemId,k.itemName);this._selectorItems.push(k)}0<this._selectorItems.length&&(this._comptenySelector=new SFDropDown(this._selectorItems));this.section.waca&&this._comptenySelector&&(e=!0)}f=this._m.getData(this.dataPath+"/sectionCommentsMaxLimit");c.commentRequired&&(f=this._m.getData(this.dataPath+
"/sectComment/commentRequiredMaxValue"));if(formConfig.rte){if(0<f&&100>f)f=100;else if(4E3<f||0>f)f=4E3;this.rteWrapper=new PM2RteWrap(c.comment?c.comment:"",{hideWaca:!0,hideSpellCheck:this.section.spellCheck?!1:!0,hideLegalScan:this.section.legalScan?!1:!0,wacaEnabled:e,maxChars:f,eleId:d,competencySelector:this._comptenySelector,label:c.commentLabel});this.rteWrapper.addEventListener("openWritingAssistant",this)}else 0>f&&(f=4E3),this.rteWrapper=new PM2PlainTextWrap(c.comment?c.comment:"",{eleId:d,
maxLength:f,rows:3,width:"100%;"});this.rteWrapper.bindProperty(this._m,this.dataPath+"/sectComment/comment");window[d]=this.rteWrapper;d=this.COMMENT_MAX_COUNT;e=this.UNDEFINED_VALUE;c.commentRequired&&(d=c.commentRequiredMaxValue,e=c.commentRequiredMinValue);"COMPETENCY"!==this.section.sectType&&"SUMMARY"!==this.section.sectType||!this.section.teamRaterEnabled?c.commentRequired&&(PMValidationUtil.bindRequiredValidator(this.rteWrapper),PMValidationUtil.bindLengthValidator(this.rteWrapper,e,d),this.rteWrapper.addEventListener("change",
this)):(c.commentRequired&&(PMValidationUtil.bindRequiredValidator(this.rteWrapper),0>d||d>this.COMMENT_MAX_COUNT)&&(d=this.COMMENT_MAX_COUNT),PMValidationUtil.bindLengthValidator(this.rteWrapper,e,d),this.rteWrapper.addEventListener("change",this))}else c&&c.commentsPerm&&"read"==c.commentsPerm.name&&((d=c.comment)&&!formConfig.rte&&(d=d.replace(/\n|\r\n?/g,"\x3cbr/\x3e")),this.textTruncate=new PMUTextTruncate(d,{displayChars:300,defaultStr:MSGS.PERFORMANCE_REVIEW_HAS_NOT_COMMENTED_YET}));d=null;
this.rteWrapper&&(d=this.rteWrapper instanceof PM2RteWrap||this.rteWrapper instanceof PM2PlainTextWrap?this.rteWrapper.getContentId():this.rteWrapper.id);this.label=new PM2Label(c.commentLabel,d,{required:c.commentRequired})}this._othersComments=this.section.othersSectComments||[]},getSectionId:function(){return this._sectionId},getFocussableAnchor:function(){return"sectTitle_"+this.id},getCmt:function(){return this.rteWrapper?this.rteWrapper.getValue():this.section.sectComment.comment},_showWACA:function(a){WACA.I.clearPlaceQuoteEvents();
var b;WACA.I.addEventListener("placeQuote",this);b=this._comptenySelector.getSelectedIndex();b=this._m.getData(this.dataPath+"/sectItems/"+b);WACA.I.initWACA({competencyId:b.itemId,location:formConfig.formLocale,firstName:formConfig.subject.firstName,gender:formConfig.subject.gender,compName:b.itemName,isSelfReview:this._isSelfReview,fullName:formConfig.subject.formattedFullName,photoUrl:formConfig.subject.photoUrl,itemDesc:b.itemDesc,hideRating:!0,commonUIStyle:!0,showPhotoAndRating:!1},new FocusSetter(a.target.getWACAButtonId(),
"action","hide"))},handleEvent:function(a){switch(a.type){case "openWritingAssistant":this._showWACA(a);break;case "placeQuote":var b=this.dataPath+"/sectComment/comment",c=this._m.getData(b),c=c+" "+a.quoteText;this._m.setData(b,c);break;case "change":this.handleValidation(a.target)}},handleValidation:function(a){var b=PMValidationUtil.validate(a);b.result?PMValidationUtil.clearFieldError(a.id):PMValidationUtil.insertFieldError(a.id,b.message)},renderHtml:function(a){var b=this.section.sectComment;
a.push('\x3cdiv class\x3d"pm2SectionOverallComment pm2FloatContainer pmuFloatContainer" id\x3d"pm2SectOvlCmt_',this.id,'"\x3e');a.push('\x3ch3  id\x3d"sectTitle_',this.id,'" class\x3d"" title\x3d"',escapeHTML(this.title),'"\x3e',escapeHTML(this.title),"\x3c/h3\x3e");if(this.rteWrapper||this.textTruncate)a.push('\x3cdiv class\x3d"pm2LFloatBlock pm2SectReview" id\x3d"pm2SectOvlCmtL_',this.id,'"\x3e'),a.push('\x3cdiv style\x3d"clear:both;"\x3e'),this.rteWrapper?(PMSectionUtils.renderLabelCommentBox(a,
this.label,this.rteWrapper),(b.commentRequired||("COMPETENCY"===this.section.sectType||"SUMMARY"===this.section.sectType)&&this.section.teamRaterEnabled)&&PMValidationUtil.renderFieldError(a,this.rteWrapper.id)):(this.label&&this.label.renderHtml(a),this.textTruncate.renderHtml(a)),a.push("\x3c/div\x3e"),a.push("\x3c/div\x3e");a.push('\x3cdiv class\x3d"pm2RFloatBlock pm2SectReviewRefer" \x3e');this._renderReferComments(a);a.push("\x3c/div\x3e");a.push("\x3c/div\x3e")},_renderReferComments:function(a){for(var b=
!0,c=0,d=this._othersComments.length;c<d;c++)this._othersComments[c].commentsPerm&&"read"==this._othersComments[c].commentsPerm.name&&(this._renderComment(this._othersComments[c],a,b),b=!1)},_renderComment:function(a,b,c){var d=a.comment;d&&!formConfig.rte&&(d=d.replace(/\n|\r\n?/g,"\x3cbr/\x3e"));d=new PMUTextTruncate(d,{displayChars:300,defaultStr:MSGS.PERFORMANCE_REVIEW_HAS_NOT_COMMENTED_YET});b.push('\x3cspan class\x3d"subtitle',c?"":" commentspace",'"\x3e');b.push(escapeHTML(a.commentLabel||
sfMessageFormat.format(MSGS.PERFORMANCE_REVIEW_COMMETN_LABEL,a.userid)));b.push("\x3c/span\x3e");b.push('\x3cdiv style\x3d"clear:both;"\x3e\x3c/div\x3e');b.push('\x3cdiv class\x3d"reviewcomment nrte_content"\x3e');d.renderHtml(b);b.push("\x3c/div\x3e")}})}();function PM2SectionCaption(a,b){this.register();this._init(a,b)}
PM2SectionCaption.prototype=function(){return set(new PM2BaseSection,{_init:function(a,b){this._m=a;var c=this._m.getData(b);this.caption=c.sectDesc;this.sectionId=c.elementId},getCaption:function(){return this.caption||""},getSectionId:function(){return this.sectionId},renderHtml:function(a){if(this.caption){a.push('\x3cdiv class\x3d"pm2FloatContainer"\x3e');a.push('\x3cdiv id\x3d"',this.id,'_instructionContainer" aria-hidden\x3d"false" aria-atomic\x3d"true" aria-live\x3d"polite" class\x3d"pmSecCap"\x3e');
var b=new PMUTextTruncate(this.caption,{displayHeight:40,showAllByDefault:!0,displayWidth:(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-96,displayLineHeight:20});2<parseInt(b.getScrollHeight()/20)?(b=new PMUTextTruncate(this.caption,{displayHeight:40,showAllByDefault:!0}),b.renderHtml(a)):a.push(this.caption);a.push("\x3c/div\x3e\x3c/div\x3e")}}})}();function PM2SectionTopBar(a,b,c){this.register();this._init(a,b,c)}
(function(){extend(PM2SectionTopBar,BaseControl,{_init:function(a,b,c){this._m=a;this.section=this._m.getData(b);this._sectionId=this.section.elementId;this._sectionTitle=this.section.sectName;this._weightSymbol=this.section.hideWeightPercentSign?"":window.formConfig.weightSymbol;this.weightFieldPath=b+"/inSumSectionWeight";if(this.weightField=this._m.getData(this.weightFieldPath))this._sectionWeight=this.weightField.value?this.weightField.value:0,this._eleId=this.weightField.key,this.bindProperty(this._m,
this.weightFieldPath+"/value"),this._editWeightId=this.id+"_editweight",this._weightId=this.id+"_weight";this._addType=c;this._sectionElementId=this.section.elementId;this._sectionIndex=this.section.sectIndex;this._objPlanId=this.section.objPlanId;this._actionVO=this.section.actionVO;this._showLink=!0;this.setShowLink();"competency"==this._addType&&this.section.addItemEnabled&&(this._addCompetencyLink=new PMIconTextLink("\x26#xe058;",MSGS.PERFORMANCE_PM2_ADD_COMPETENCY_TITLE,"addCompetency"),this._addCompetencyLink.addEventListener("action",
this))},getSectionTitle:function(){return this._sectionTitle},updateBinding:function(){this.weightField=this._m.getData(this.weightFieldPath);this.refresh(this.weightField.value)},setShowLink:function(){"goal"==this._addType&&(this._showLink=this.section.addExistingObjEnabled||this.section.addItemEnabled||this.section.smartWizardEnabled)},setLinkComponent:function(a){this._linkComponent=a},getFocusableSectiLinkId:function(a){if("weight"==a){if(this.weightField&&this.weightField.permission&&"write"==
this.weightField.permission.name)return this._editWeightId}else if("goal"==a){if(this._linkComponent)return this._linkComponent.id}else{if("competency"==a)return"addCompetencyLink_"+this.id;if("sectitle"==a)return this.id+"sectTitle"}return null},renderHtml:function(a){a.push('\x3cdiv class\x3d"pm2SectionTopbar"\x3e');a.push('\x3ca href\x3d"#" class\x3d"anchor_rel" id\x3d"anchor_',this._sectionId,'" name\x3d"anchor_',this._sectionId,'" title\x3d"',juic.escapeHTML(this._sectionTitle),'" aria-hidden\x3d"true" \x3e\x26nbsp;\x3c/a\x3e');
var b=""!==this._sectionTitle.trim();this.weightField&&this.weightField.permission&&"write"==this.weightField.permission.name&&b?this._buildEditableWeight(a):b&&this._buildReadWeight(a);"goal"==this._addType&&this._showLink&&this._linkComponent&&this._linkComponent.renderHtml(a);this._addCompetencyLink&&this._addCompetencyLink.renderHtml(a);"editCompensation"==this._addType&&this.section.editURL&&(a.push('\x3cdiv class\x3d"addItemLink"\x3e'),a.push('\x3cdiv class\x3d"addItemLinkText"\x3e'),a.push('\x3ca class\x3d"globalPlacematLink" id\x3d"editCompensationLink_',
this.id,'" href\x3d"#" onclick\x3d"',this.fireCode("_clickEditCompensation"),' return false;"\x3e'),a.push(this.section.editable?MSGS.BTN_Edit:MSGS.BTN_View),a.push("\x3c/a\x3e"),a.push("\x3c/div\x3e"),a.push("\x3c/div\x3e"));a.push('\x3cdiv class\x3d"cleardiv"\x3e\x3c/div\x3e');a.push("\x3c/div\x3e");a.addEventListener("afterRender",this,"_afterRender")},_afterRender:function(){this.dispatch("pm2SectionTopBarRendered")},_handleEditWeightKeyDown:function(a){13===(a.which||a.keyCode)&&this._clickEditWeight(a);
a.preventDefault?a.preventDefault():a.returnValue=!1},_buildEditableWeight:function(a){a.push('\x3cdiv class\x3d"leftpart" onkeyup\x3d"',this.fireCode("_handleEditWeightKeyDown"),';return false;"',"\x3e");a.push('\x3ch2 title\x3d"',escapeHTML(this._sectionTitle),'" id\x3d"',this.id,"sectTitle",'"',"\x3e",escapeHTML(this._sectionTitle));a.push('\x3cspan id\x3d"'+this._weightId+'"\x3e');this._buildSectionWeightPresentation(a);a.push("\x3c/span\x3e");a.push("\x3c/h2\x3e");a.push('\x3ca class\x3d"pmIconTextLink globalPlacematLink" tabIndex\x3d0 id\x3d"'+
this._editWeightId+'"',' onclick\x3d"',this.fireCode("_clickEditWeight"),';return false;"',"\x3e",'\x3cspan  title\x3d"',MSGS.PERFORMANCE_PM2_EDIT_SECTION_WEIGHTS,'" class\x3d"sapIcon"\x3e\x26#xe038;\x3c/span\x3e\x3cspan class\x3d"pmTextLink"\x3e',MSGS.PERFORMANCE_PM2_EDIT_SECTION_WEIGHT,"\x3c/span\x3e\x3c/a\x3e");a.push("\x3c/div\x3e");a.push('\x3cinput type\x3d"hidden" value\x3d"',this._sectionWeight,'" name\x3d"',this._eleId,'" id\x3d"',this._eleId,'"\x3e')},_buildSectionWeightPresentation:function(a){var b=
0!=this._sectionWeight;b&&a.push(" (");b&&a.push(juic.escapeHTML(this._sectionWeight),juic.escapeHTML(this._weightSymbol),")\x26lrm;")},_buildReadWeight:function(a){a.push('\x3cdiv class\x3d"leftpart"\x3e');a.push('\x3ch2 id\x3d"',this.id,"sectTitle",'" title\x3d"',escapeHTML(this._sectionTitle),'"\x3e',escapeHTML(this._sectionTitle));this.weightField&&this.weightField.permission&&"read"==this.weightField.permission.name&&(a.push('\x3cspan id\x3d"'+this._weightId+'"\x3e'),this._buildSectionWeightPresentation(a),
a.push("\x3c/span\x3e"));a.push("\x3c/h2\x3e");a.push("\x3c/div\x3e")},_clickEditCompensation:function(a){this.dispatch("editCompensation");PM2DialogUtil.stopEvent(a)},_handleMouseover:function(){$(this._editWeightId)&&($(this._editWeightId).style.display="inline")},_handleMouseout:function(){$(this._editWeightId)&&($(this._editWeightId).style.display="none")},_clickEditWeight:function(a){this.dispatch("editSectWeights",{triggerElId:this.id+"sectTitle"});PM2DialogUtil.stopEvent(a)},setHiddenInput:function(a){jQuery($(this._eleId)).val(a);
PMUSaveUtils.autoSaveForm()},refresh:function(a){this.weightField&&this.weightField.permission&&"write"==this.weightField.permission.name&&(this._sectionWeight=a,this.setHiddenInput(this._sectionWeight),a=[],this._buildSectionWeightPresentation(a),$(this._weightId).innerHTML=a.join(""))},handleEvent:function(a){switch(a.type){case "action":"addCompetency"==a.actionCommand&&(this.dispatch("addCompetency",{sectionId:this._sectionElementId,sectionIndex:this._sectionIndex,dlgActivatedEl:a.target||a.srcElement}),
PM2DialogUtil.stopEvent(a))}}})})();function PM2Utils(){}PM2Utils.submitForm=function(){var a=document.forms[0];a&&(window.setFormModifiedFlagTrue&&setFormModifiedFlagTrue(),a.onsubmit&&!a.onsubmit()||a.submit())};function PMSectionUtils(){}
PMSectionUtils.buildCommonSectionConfig=function(a,b){var c={};c.rte=a.rte;c.subject=a.subject;c.currentUser=a.currentUser;c.ratingScale=b.ratingScale;c.ratingScalePath="/"+b.sectIndex+"/ratingScale";c.ratingOption=b.ratingOption;c.hasItemComment=b.hasItemComment;c.spellCheck=b.spellCheck;c.legalScan=b.legalScan;c.ezRaterEnabled=b.ezRaterEnabled;c.itemWeightRequired=b.itemWeightRequired;c.weightSymbol=b.hideWeightPercentSign?"":a.weightSymbol;return c};
PMSectionUtils.checkCommentPermission=function(a){return a&&PMSectionUtils.checkPermission(a.commentsPerm)};PMSectionUtils.checkRatingPermission=function(a){return a&&PMSectionUtils.checkPermission(a.ratingPerm)};PMSectionUtils.checkWeightPermission=function(a){return a&&PMSectionUtils.checkPermission(a.permission)};PMSectionUtils.checkPermission=function(a){return a&&("write"==a.name||"read"==a.name)};
PMSectionUtils.buildSectComment=function(a,b,c){var d=null;if(c.hasSectionComment){var e=c.othersSectComments;if(PMSectionUtils.checkCommentPermission(c.sectComment)||e&&0<e.length)a=new PM2SectionOverallComment(a,b),d=new PMPortlet(a)}return d};PMSectionUtils.buildWeightSymbol=function(a,b){return b.hideWeightPercentSign?"":a.weightSymbol};
PMSectionUtils.buildItemWeight=function(a,b,c,d){var e=null;if(a){var f=a.permission;!f||"read"!=f.name&&"write"!=f.name||(e=new PM2ItemWeight(a.key,a.value,"write"==f.name&&!d,b,"itemWeight",c))}return e};PMSectionUtils.buildCustomElements=function(a,b,c){var d=a.getData(b);return d&&0<d.length?new PMCustom(a,b,{spellCheck:!!c.spellCheck,legalScan:!!c.legalScan,waca:!!c.waca,twoColumnsLayout:!0,captureOnClickEvent:!1}):null};
PMSectionUtils.buildManagerSubjectRating=function(a,b,c,d,e,f){var g={},h=b.generateComp(b.getRatingMetaByDataPath(a+"/ratingOfRecord",f));h&&(g.managerRating=h.instance);if(e)if(e=c.subject.userId,c.currentUser.userId==e){if(h=b.generateComp(b.getRatingMetaByDataPath(a+"/itemRatingComment",f)))g.subjectRating=h.instance}else if(d&&0<d.length)for(c=0,h=d.length;c<h;c++){var k=d[c];if(k&&k.userid==e){if(h=b.generateComp(b.getRatingMetaByDataPath(a+"/othersRatingComments/"+c,f)))g.subjectRating=h.instance;
break}}return g};PMSectionUtils.buildGapScaleValues=function(a){var b=[];if(a)for(var c=0,d=a.length;c<d;c++){var e=a[c].value;""==e||isNaN(e)||0>parseFloat(e)||b.push(e.trim())}1<b.length&&parseFloat(b[0])>parseFloat(b[1])&&b.reverse();return b.join(",")};
PMSectionUtils.buildEZRater=function(a,b,c){var d=null;a.rateByBehavior&&(d=a.behaviorRatingScale?a.behaviorRatingScale.scaleValues:null);d||(d=a.ratingScale?a.ratingScale.scaleValues:[]);return new PMEZRater(b,{scaleValues:d?d:[],showGap:a.showGap,showManagerRatingFirst:a.showManagerRatingFirst,showRatingHelpIcon:a.showRatingHelpIcon,expandAll:a.ezRaterExpandAll,rateByBehavior:a.rateByBehavior,subjectRatingLabel:a.subjectRatingLabel?a.subjectRatingLabel:"",managerRatingLabel:a.managerRatingLabel?
a.managerRatingLabel:""},c)};
PMSectionUtils.renderGroup=function(a,b,c,d){if("none"!=c.groupPerm){a.push('\x3cdiv class\x3d"groupDropDown"\x3e\x3cspan class\x3d"groupDropDownLabel"\x3e',juic.escapeHTML(c.groupLabel),"\x3c/span\x3e");if("write"==c.groupPerm){for(var e=[],f=0;f<c.groupList.length;f++){var g=new SFSimpleSelectItem(c.groupList[f],c.groupList[f]);e.push(g)}c=new SFDropDown(e,b.keyGroup);c.setSelectedKey(b.selectedGroup);c.renderHtml(a);c.addEventListener("change",d,"_onGroupChange")}else a.push(juic.escapeHTML(b.selectedGroup));a.push("\x3c/div\x3e")}};
PMSectionUtils.renderEZRater=function(a,b,c,d){var e=b.guid+"_rater";c.expandable&&d._raterContentDomIds.push(e);d._raterDomId2IconDomId[e]=b.guid+"_icon";a.push('\x3ctr id\x3d"',e,'" class\x3d"',c.expandable?c.ezConfig.expandAll?"expanded":"collapsed":"",'"\x3e');a.push('\x3ctd class\x3d"name',c.isBehavior?" behavior":"",'"\x3e');a.push('\x3ca href\x3d"#" onclick\x3d"return false;" class\x3d"anchor_rel" id\x3d"',b.anchor,'" name\x3d"',b.anchor,'"',' aria-hidden\x3d"true" title\x3d"',juic.escapeHTML(b.itemName),
'"\x3e\x26nbsp;\x3c/a\x3e');a.push('\x3cspan id\x3d"',b.guid+"_icon",'" title\x3d"',c.expandAll?MSGS.COLLAPSE_GENERAL:MSGS.EXPAND_GENERAL,'"');c.expandable&&a.push(' class\x3d"arrow" onclick\x3d"',d.fireCode("_toggleItem",b.guid),' return false;" ');a.push("\x3e\x3cspan\x3e\x3c/span\x3e",juic.escapeHTML(b.itemName),"\x3c/span\x3e");b.itemDesc&&(a.push('\x3cspan role\x3d"button" aria-haspopup\x3d"true" tabindex\x3d"0" class\x3d"compDescInfoIcon" id\x3d"',b.guid,'_infoIcon" '),a.push('title\x3d"',juic.escapeHTML(b.itemName),
'"'),a.push('onclick\x3d"',d.fireCode("_onClickDescInfo",b.guid),'" '),a.push('onkeydown\x3d"',d.fireCode("_handleKeyDown",b.guid),'" '),a.push('onkeyup\x3d"',d.fireCode("_handleKeyUp",b.guid),'"\x3e\x3c/span\x3e'));a.push("\x3c/td\x3e");e=c.ezConfig;e.showManagerColumn&&e.showManagerRatingFirst&&(a.push('\x3ctd class\x3d"rating"\x3e'),b.managerRating&&(b.managerRating.addEventListener("rateSelected",d),d._comp2guid[b.managerRating.id]=b.guid,b.managerRating.renderHtml(a)),a.push("\x3c/td\x3e"));
e.showSubjectColumn&&(a.push('\x3ctd class\x3d"rating"\x3e'),b.subjectRating&&(b.subjectRating.addEventListener("rateSelected",d),d._comp2guid[b.subjectRating.id]=b.guid,b.subjectRating.renderHtml(a)),a.push("\x3c/td\x3e"));e.showManagerColumn&&!e.showManagerRatingFirst&&(a.push('\x3ctd class\x3d"rating"\x3e'),b.managerRating&&(b.managerRating.addEventListener("rateSelected",d),d._comp2guid[b.managerRating.id]=b.guid,b.managerRating.renderHtml(a)),a.push("\x3c/td\x3e"));if(e.showGapColumn){if("string"!==
typeof b.gapScaleValues)return;4>=b.gapScaleValues.split(",").length?a.push('\x3ctd class\x3d"gap"\x3e'):a.push('\x3ctd class\x3d"gap RatingScaleAboveFour"\x3e');if(b.managerRating&&b.subjectRating){var f=PMSectionUtils.buildGapImgSrc(b.managerRating,b.subjectRating,b.gapScaleValues);f&&(f=new SFHiResolutionSupportedImage(f),d._guid2comp["img_"+b.guid]=f,f.renderHtml(a))}a.push("\x3c/td\x3e")}e.showActionColumn&&(a.push('\x3ctd class\x3d"action"\x3e'),c.isBehavior?b.removable&&b.deleteButtonKey&&
(a.push('\x3cspan tabIndex\x3d0 class\x3d"sapIcon iconCss" onclick\x3d"',d.fireCode("_deleteBehavior",b.deleteButtonKey),' return false;"'),a.push(' title\x3d"',MSGS.COMMON_Delete,'"\x3e\x26#xe03d;\x3c/span\x3e')):(b.editable&&(a.push('\x3cspan tabIndex\x3d0 class\x3d"sapIcon iconCss" onclick\x3d"',d.fireCode("_editItem",b.guid),' return false;"'),a.push(' title\x3d"',MSGS.COMMON_Edit,'"\x3e\x26#xe038;\x3c/span\x3e')),b.removable&&(a.push('\x3cspan tabIndex\x3d0 class\x3d"sapIcon iconCss" onclick\x3d"',
d.fireCode("_deleteItem"),' return false;"'),a.push(' title\x3d"',MSGS.COMMON_Delete,'"\x3e\x26#xe03d;\x3c/span\x3e'))),a.push("\x3c/td\x3e"));a.push("\x3c/tr\x3e")};
PMSectionUtils.buildGapImgSrc=function(a,b,c){if(b&&a&&(a=a?a.getValue():void 0,b=b?b.getValue():void 0,void 0!=a&&void 0!=b)){if(""==a||isNaN(a)||0>parseFloat(a))a=-1;if(""==b||isNaN(b)||0>parseFloat(b))b=-1;c="/rategap?sc\x3d"+c+("\x26or\x3d"+a)+("\x26sr\x3d"+b);c+="\x26rg\x3d"+Math.random((new Date).getSeconds());return c+="\x26_s.crb\x3d"+window.ajaxSecKey}return null};
PMSectionUtils.updateGapImage=function(a,b){var c=PMSectionUtils.buildGapImgSrc(a.managerRating,a.subjectRating,a.gapScaleValues);if(c&&b){b.setValue(c);var d=juic.$(b.id);d&&d.setAttribute("src",c)}};PMSectionUtils.registerFormCompEvent=function(a,b){if(a&&a.instance&&a.registerEvents)for(var c=0,d=a.registerEvents.length;c<d;c++)a.instance.addEventListener(a.registerEvents[c],b)};
PMSectionUtils.renderComponent=function(a,b,c,d){b&&b.renderHtml(a);d&&a.push("\x3cdiv class\x3d'mlt-Template-name'\x3e",sfMessageFormat.format(MSGS.PERFORMANCE_PM2_MLT_RATING_SUB_TITLE_FROM,juic.escapeHTML(d)),"\x3c/div\x3e");c&&c.renderHtml(a)};
PMSectionUtils.renderLabelCommentBox=function(a,b,c){c.hasWACA&&c.hasWACA()?(a.push('\x3cdiv class\x3d"commentbox"\x3e\x3cdiv class\x3d"commentboxlabel"\x3e'),b&&b.renderHtml(a),a.push("\x3c/div\x3e"),a.push('\x3cdiv class\x3d"wacaBtnContainer"\x3e'),c.getComptenySelector()&&c.getComptenySelector().renderHtml(a),c.getWACAButton()&&c.getWACAButton().renderHtml(a),a.push("\x3c/div\x3e\x3c/div\x3e")):(a.push('\x3cdiv class\x3d"commentboxlabel"\x3e'),b&&b.renderHtml(a),a.push("\x3c/div\x3e"));c.renderHtml(a)};
PMSectionUtils.renderRatingComment=function(a,b,c){b&&("rating"==b.type?PMSectionUtils.renderComponent(a,b.label,b.instance,c):PMSectionUtils.renderLabelCommentBox(a,b.label,b.instance),PMValidationUtil.renderFieldError(a,b.instance.id))};PMSectionUtils.toggleEZRaterElement=function(a,b,c){juic.$(a).className=c?"expanded":"collapsed";if(a=b[a])juic.$(a).title=c?MSGS.COLLAPSE_GENERAL:MSGS.EXPAND_GENERAL};
PMSectionUtils.expandCollapseAllEZRaterItems=function(a,b,c,d){if(d)for(b=document.querySelectorAll("[id\x3d'"+a+"'] .ezrater tr.collapsed"),a=0;a<b.length;a++)b[a].className="expanded",-1<b[a].id.indexOf("_rater")&&c[b[a].id]&&(juic.$(c[b[a].id]).title=MSGS.COLLAPSE_GENERAL);else for(b=document.querySelectorAll("[id\x3d'"+a+"'] .ezrater tr.expanded"),a=0;a<b.length;a++)b[a].className="collapsed",-1<b[a].id.indexOf("_rater")&&c[b[a].id]&&(juic.$(c[b[a].id]).title=MSGS.EXPAND_GENERAL)};
PMSectionUtils.toggleEZRaterItem=function(a,b,c){for(var d="collapsed"==juic.$(a+"_rater").className,e=0,f=b.length;e<f;e++){var g=b[e];0<=g.indexOf(a+"_")&&PMSectionUtils.toggleEZRaterElement(g,c,d)}};
PMSectionUtils.hasItemContent=function(a,b,c){return a.itemWeightVO||b.groupPerm&&"none"!=b.groupPerm||a.customElements&&0<a.customElements.length||c&&0<c.length||a.othersRatingComments||a.cpmAchievements||a.learningVOList||a.lastReviewRatingCommentVO||a.objectiveDetails||a.subDetails||a.devGoalUrl||!b.rateByBehavior&&(1==b.behaviorModeOpt||4==b.behaviorModeOpt||2==b.behaviorModeOpt||5==b.behaviorModeOpt)&&a.behaviorVOs&&0<a.behaviorVOs.length||b.rateByBehavior&&PMSectionUtils.checkRatingPermission(a.ratingOfRecord)||
a.itemCategory||a.deleted||a.objMetric||a.objState?!0:!1};PMSectionUtils.hasBehaviorContent=function(a){return a.weightComp||a.formComps&&0<a.formComps.length||a.othersRatingComp?!0:!1};function PMEZRater(a,b,c){this.register();this.init(a,b,c)}
(function(){extend(PMEZRater,Component,{init:function(a,b,c){this._itemComps=a?a:[];this._config=b?b:{};this._columnConifg=this._buildEzConfig();this.options=c;a=0;for(b=this._itemComps.length;a<b;a++)this._itemComps[a].setEzConfig(this._columnConifg),a+1==b&&this._itemComps[a].setIsLastItem(!0)},_buildEzConfig:function(){for(var a={showManagerColumn:!1,showSubjectColumn:!1,showGapColumn:!1,showActionColumn:!1,columnsCount:1,showManagerRatingFirst:this._config.showManagerRatingFirst,showRatingHelpIcon:this._config.showRatingHelpIcon,
expandAll:this._config.expandAll},b=0,c=this._itemComps.length;b<c;b++){var d=this._itemComps[b];a.showManagerColumn=a.showManagerColumn||d.hasManagerRating();a.showSubjectColumn=a.showSubjectColumn||d.hasSubjectRating();a.showActionColumn=a.showActionColumn||d.hasAction()}a.showGapColumn=this._config.showGap&&a.showManagerColumn&&a.showSubjectColumn;a.columnsCount=1+(a.showManagerColumn?1:0)+(a.showSubjectColumn?1:0)+(a.showGapColumn?1:0)+(a.showActionColumn?1:0);return a},_handleKeyPress:function(a){13==
(a.which||a.keyCode)&&this._handleClick(a);PM2DialogUtil.stopEvent(a)},_handleClick:function(a){var b=a.target.id,c=this.options.ratingScale,d=c.m.getData(c.path),c=new PM2RatingScaleDescription(c);(new SFCalloutPopup({originOptions:{pointerOffset:40},closeOnMouseout:!1,showCloseIcon:!0,originId:b,refocusRef:juic.$(b),title:d.scaleName,content:c})).show(b,{setFocusOnSelf:!0});PM2DialogUtil.stopEvent(a)},renderHtml:function(a){a.push('\x3cdiv id\x3d"',this.id,'" class\x3d"globalPortletBodyBackground globalRoundedCorners pmPortletContainer pmPortletBorder"\x3e');
a.push('\x3cdiv class\x3d"pmPanelContent globalPortletBody"\x3e');a.push('\x3ctable class\x3d"ezrater"\x3e\x3ctr class\x3d"collapsedRow globalPortletSidePanel"\x3e');a.push('\x3cth\x3e\x3ca href\x3d"javascript:void(0);" onclick\x3d"',this.fireCode("_toggleAllItems",this.id,!0),' return false;" title\x3d"',MSGS.LBL_Expand_All,'"\x3e',MSGS.LBL_Expand_All,"\x3c/a\x3e");a.push('\x3ca href\x3d"javascript:void(0);" onclick\x3d"',this.fireCode("_toggleAllItems",this.id,!1),' return false;" title\x3d"',MSGS.LBL_Colapse_All,
'"\x3e',MSGS.LBL_Colapse_All,"\x3c/a\x3e\x3c/th\x3e");this._columnConifg.showManagerColumn&&this._columnConifg.showManagerRatingFirst&&this._config.managerRatingLabel&&(a.push('\x3cth class\x3d"rating"\x3e',this._config.managerRatingLabel),this._columnConifg.showRatingHelpIcon&&a.push('\x3cspan role\x3d"button" aria-haspopup\x3d"true" tabIndex\x3d0  aria-label\x3d"',MSGS.PERFORMANCE_PM2_RATING_HELP_ICON_TITLE,'" title\x3d"',MSGS.PERFORMANCE_PM2_RATING_HELP_ICON_TITLE,'" id \x3d "rating_help_',this.id,
'" class\x3d "sapIcon pmHelpIcon" onkeypress\x3d"',this.fireCode("_handleKeyPress"),'" onclick\x3d"',this.fireCode("_handleClick"),'" \x3e\x26#xe1c4;\x3c/span\x3e\x3c/th\x3e'));this._columnConifg.showSubjectColumn&&this._config.subjectRatingLabel&&(a.push('\x3cth class\x3d"rating"\x3e',this._config.subjectRatingLabel),this._columnConifg.showRatingHelpIcon&&a.push('\x3cspan role\x3d"button" aria-haspopup\x3d"true" tabIndex\x3d0  aria-label\x3d"',MSGS.PERFORMANCE_PM2_RATING_HELP_ICON_TITLE,'" title\x3d"',
MSGS.PERFORMANCE_PM2_RATING_HELP_ICON_TITLE,'" id \x3d "subject_rating_help_',this.id,'" class\x3d "sapIcon pmHelpIcon" onkeypress\x3d"',this.fireCode("_handleKeyPress"),'" onclick\x3d"',this.fireCode("_handleClick"),'" \x3e\x26#xe1c4;\x3c/span\x3e\x3c/th\x3e'));this._columnConifg.showManagerColumn&&!this._columnConifg.showManagerRatingFirst&&this._config.managerRatingLabel&&(a.push('\x3cth class\x3d"rating"\x3e',this._config.managerRatingLabel),this._columnConifg.showRatingHelpIcon&&a.push('\x3cspan role\x3d"button" aria-haspopup\x3d"true" tabIndex\x3d0  aria-label\x3d"',
MSGS.PERFORMANCE_PM2_RATING_HELP_ICON_TITLE,'" title\x3d"',MSGS.PERFORMANCE_PM2_RATING_HELP_ICON_TITLE,'" id \x3d "manager_rating_help_',this.id,'" class\x3d "sapIcon pmHelpIcon" onkeypress\x3d"',this.fireCode("_handleKeyPress"),'" onclick\x3d"',this.fireCode("_handleClick"),'" \x3e\x26#xe1c4;\x3c/span\x3e\x3c/th\x3e'));this._columnConifg.showGapColumn&&a.push('\x3cth class\x3d"gap"\x3e',MSGS.Gap,"\x3c/th\x3e");this._columnConifg.showActionColumn&&a.push('\x3cth class\x3d"action"\x3e',MSGS.Action,
"\x3c/th\x3e");a.push("\x3c/tr\x3e");for(var b=0,c=this._itemComps.length;b<c;b++)this._itemComps[b].renderHtml(a);a.push("\x3c/table\x3e");a.push("\x3c/div\x3e");a.push("\x3c/div\x3e")},_toggleAllItems:function(a,b,c){c=this._itemComps.map(function(a){return a._raterDomId2IconDomId});var d=this._itemComps.map(function(a){return a._raterDomId2IconDomId});PMSectionUtils.expandCollapseAllEZRaterItems(a,c,d,b)}})})();function PMPopupManager(){}PMPopupManager.compDescPopup=void 0;