function PM2OverallScorePod(a){this.register();this.m=a;this.init()}
extend(PM2OverallScorePod,BaseControl,{init:function(){var a=this.m.getData("/statistical/summaryVO");this.showOverallScorePod=a?a.showOverallScorePod:!1;(this.finalRating=a?a.finalRating:null)?(this.ratingLabel=this.finalRating.ratingLabel,this._msg=this.finalRating.textRating?this.finalRating.textRating:this.finalRating.rating,this._msg=juic.escapeHTML(this._msg)):(this.ratingLabel="",this._msg=MSGS.PERFORMANCE_REVIEW_OVERALL_SCORE_INVALID,this._isInvalidScore=!0);this._maxWidth=180;this._curWidth=
this._minWidth=100;this._height=35;this._step=20;a=document.createElement("div");document.body.appendChild(a);a.id=this.id+"evaluateWrap";a.className="overallScoreEvaluateElement";var b=a.style;b.width=this._minWidth+"px";b.backgroundColor="#F1F1F1";this._evaluatEl=a;this.fetchMsg();this.ellipsis()},getH:function(){return this._evaluatEl.offsetHeight},fetchMsg:function(){this._curWidth=100;this._evaluatEl.style.width=this._curWidth+"px";this._evaluatEl.innerHTML=this._msg;for(var a=this._evaluatEl;this._curWidth<
this._maxWidth;)if(this.getH()>this._height)this._curWidth+=this._step,a.style.width=this._curWidth+"px";else break;this._needEllpsis=this.isOverflow()},isOverflow:function(){return this.getH()>this._height},ellipsis:function(){if(this.isOverflow()){for(var a=this._evaluatEl,b=this._evaluatEl.innerHTML;0<b.length&&this.isOverflow();)b=b.substr(0,b.length-1),a.innerHTML=b+"...";this._msg=a.innerHTML}},_handleOverallScoreKeyPress:function(a){var b=SFDOMEvent.getCharCode(a);if(b===SFDOMEvent.KEY_CODE.RETURN||
b===SFDOMEvent.KEY_CODE.SPACE)a.preventDefault(),this._onClick(a)},_onClick:function(a){this.dispatch("overallScoreClick",{event:a,toggleElement:"caretMark"+this.id,focussedElem:"left-"+this.id})},renderHtml:function(a){if(this.showOverallScorePod){a.push('\x3cbutton id \x3d "left-',this.id,'" aria-label\x3d"',MSGS.PERFORMANCE_REVIEW_OVERALL_SCORE,'" ');a.push(' class\x3d"pmuoverallScoreLeft globalRoundedCorners globalPortletBodyBackground globalPortletBody pmPortletBorder" style\x3d"width:',this._curWidth,
"px;");a.push('" onclick \x3d "',this.fireCode("_onClick"),' return false;" aria-haspopup\x3d"true" ');a.push('" onkeypress \x3d "',this.fireCode("_handleOverallScoreKeyPress"),' return false;"');var b;b=this._isInvalidScore?this._msg:MSGS.get("PERFORMANCE_REVIEW_OVERALL_SCORE_TITLE",this._msg);a.push('" title\x3d"',juic.escapeHTML(b),'"');a.push("\x3e");a.push('\x3cdiv id\x3d"overallScoreContainer-',this.id,'" class\x3d"pmuoverallScoreRight"\x3e');a.push('\x3ctable role\x3d"presentation" \x3e\x3ctr\x3e\x3ctd class\x3d"overallScoreCell"\x3e');
isNaN(this._msg)?a.push('\x3cdiv id \x3d "score-',this.id,'" class\x3d"pmuoverallScoreValue"\x3e'):a.push('\x3cdiv id \x3d "score-',this.id,'" class\x3d"pmuoverallScoreNumValue"\x3e');a.push(this._msg);a.push("\x3c/div\x3e");a.push('\x3c/td\x3e\x3c/tr\x3e\x3ctr class\x3d"overallScoreTitleRow"\x3e\x3ctd\x3e');a.push('\x3cdiv id \x3d "sub-title-',this.id,'" class\x3d"pmuoverallScoreSubTitle"\x3e');a.push(juic.escapeHTML(this.ratingLabel));a.push("\x3c/div\x3e");a.push("\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e");
a.push('\x3cspan class\x3d"caretMark" id\x3d"',"caretMark"+this.id,'"\x3e\x3c/span\x3e');a.push("\x3c/div\x3e");a.push("\x3c/button\x3e")}}});function PM2ScoreDetail(a,b){this.register();this._init(a,b)}
PM2ScoreDetail.prototype=function(){return set(new Component,{_init:function(a,b){this.data=a;this.type=b;this.weightSymbol=window.formConfig.weightSymbol;this.ratingsGroup=[];this.detailsGroup=[];if("perfpot"==b){var c=[];a.manualPerfRating&&c.push(a.manualPerfRating);a.manualPotRating&&c.push(a.manualPotRating);this.ratingsGroup.push(c)}else if("ococ"==b){this.showWeightedAverage=a.showWeightedAverage;a.ococRating&&(c=[],c.push(a.ococRating),this.ratingsGroup.push(c),this.detailsGroup.push([]));
c=[];a.objManualRating&&c.push(a.objManualRating);a.objCalcRating&&c.push(a.objCalcRating);var d=[];a.compManualRating&&d.push(a.compManualRating);a.compCalcRating&&d.push(a.compCalcRating);a.objCompOrder?(this.ratingsGroup.push(c),this.detailsGroup.push(a.objSummaryOverview),this.ratingsGroup.push(d),this.detailsGroup.push(a.compSummaryOverview)):(this.ratingsGroup.push(d),this.detailsGroup.push(a.compSummaryOverview),this.ratingsGroup.push(c),this.detailsGroup.push(a.objSummaryOverview))}else"summary"==
b&&(this.showWeightedAverage=a.showWeightedAverage,c=[],a.overallRating&&c.push(a.overallRating),a.calculatedRating&&c.push(a.calculatedRating),a.adjustedRating&&c.push(a.adjustedRating),this.ratingsGroup.push(c),this.detailsGroup.push(a.summaryOverview));this.showWeightedAverage=!1},renderHtml:function(a){for(var b=this.ratingsGroup.length,c=0;c<b;c++){var d=this.ratingsGroup[c],e=this.detailsGroup[c];d&&0<d.length&&this._renderRatings(a,d);e&&0<e.length&&this._renderDetails(a,e)}},_renderRatings:function(a,
b){a.push('\x3ctable class \x3d "detailsTable" cellpadding\x3d0 cellspacing\x3d0\x3e');for(var c=0,d=b.length;c<d;c++){var e=b[c];a.push('\x3ctr class\x3d"ratinglv"\x3e\x3ctd class\x3d"lt"\x3e');a.push(juic.escapeHTML(e.ratingLabel));a.push('\x3c/td\x3e\x3ctd class\x3d"rt"\x3e');a.push(juic.escapeHTML(e.textRating));a.push("\x3c/td\x3e\x3c/tr\x3e")}a.push("\x3c/table\x3e")},_renderDetails:function(a,b){a.push('\x3ctable class \x3d "detailsTable" cellpadding\x3d0 cellspacing\x3d0\x3e\x3cthead\x3e');
a.push('  \x3ctr class\x3d"title ',this.showWeightedAverage?"hasWeightAveg":"",'" \x3e');a.push('    \x3cth class\x3d"lt" scope\x3d"col"\x3e',MSGS.PERFORMANCE_PM2_SECTION_HD,"\x3c/th\x3e");a.push('    \x3cth class\x3d"rt rat" scope\x3d"col"\x3e',MSGS.COMMON_Rating,"\x3c/th\x3e");a.push('    \x3cth class\x3d"rt weight" scope\x3d"col" id\x3d"',this.id,'weight"\x3e',MSGS.PERFORMANCE_PM2_WEIGHT_HD,"\x3c/th\x3e");this.showWeightedAverage&&a.push('    \x3cth class\x3d"rt aveg" scope\x3d"col" id\x3d"',this.id,
'_average"\x3e',MSGS.PERFORMANCE_PM2_WEIGHTED_AVERAGE_HD,"\x3c/th\x3e");a.push("  \x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e");for(var c=0;c<b.length;c++){var d=b[c];formData[d.sectionIndex].hideWeightPercentSign&&(this.weightSymbol="");a.push('  \x3ctr class \x3d "pmusection"\x3e');a.push('    \x3ctd class\x3d"lt"\x3e','\x3ca href\x3d"javascript:" onclick\x3d"',this.fireCode("_click"),'" rel\x3d"anchor_',d.sectionIndex,'"\x3e',juic.escapeHTML(d.name),"\x3c/a\x3e","\x3c/td\x3e");a.push('    \x3ctd class\x3d"rt"\x3e',
juic.escapeHTML(d.value),"\x3c/td\x3e");a.push('    \x3ctd class\x3d"weight rt" headers\x3d"',this.id,'weight"\x3e',d.weight?juic.escapeHTML(d.weight+this.weightSymbol):"","\x3c/td\x3e");this.showWeightedAverage&&a.push('    \x3ctd class\x3d"rt" headers\x3d"',this.id,'_average"\x3e',juic.escapeHTML(d.valueInSummary),"\x3c/td\x3e");a.push("  \x3c/tr\x3e");for(var e=d.items.length,f=0;f<e;f++){var g=d.items[f];a.push('  \x3ctr class \x3d "',f==e-1?"pmulastItem":"pmuitem",'"\x3e');a.push('    \x3ctd class\x3d"lt"\x3e',
'\x3ca href\x3d"javascript:" onclick\x3d"',this.fireCode("_click"),'" rel\x3d"anchor_',d.sectionIndex,"_",g.itemId,'"\x3e',juic.escapeHTML(g.name,"\x3cbr/\x3e"),"\x3c/a\x3e","\x3c/td\x3e");a.push('    \x3ctd class\x3d"rt"\x3e',juic.escapeHTML(g.value),"\x3c/td\x3e");a.push('\x3ctd class\x3d"weight rt" headers\x3d"',this.id,'weight"\x3e',g.weight?juic.escapeHTML(g.weight+this.weightSymbol):"","\x3c/td\x3e");this.showWeightedAverage&&a.push("\x3ctd\x3e\x3c/td\x3e");a.push("  \x3c/tr\x3e")}}a.push("\x3c/tbody\x3e\x3c/table\x3e")},
_click:function(a){a=a.srcElement||a.target;var b=SFDom.getY(a.rel);480<b?window.scrollTo(0,b-175):window.scrollTo(0,0);$(a.rel).focus()}})}();function PM2Score(a){this.register();this._m=a;this._init()}
PM2Score.prototype=function(){return set(new Component,{_init:function(){if(this.perfpotInOverallScoreVO=this._m.getData("/statistical/summaryVO/perfpotInOverallScoreVO")){var a=new PM2ScoreDetail(this.perfpotInOverallScoreVO,"perfpot");this._perfpotRoundConnerSlots=new PMRoundSlots(a)}if(this.ococOverviewVO=this._m.getData("/statistical/summaryVO/objcompInOverallScoreVO"))a=new PM2ScoreDetail(this.ococOverviewVO,"ococ"),this._ococRoundConnerSlots=new PMRoundSlots(a);if(this.summaryOverviewVO=this._m.getData("/statistical/summaryVO/summInOverallScoreVO"))a=
new PM2ScoreDetail(this.summaryOverviewVO,"summary"),this._summaryRoundConnerSlots=new PMRoundSlots(a)},renderHtml:function(a){a.push('\x3cdiv class\x3d"content"\x3e');this._perfpotRoundConnerSlots&&(this.renderSectionName(a,this.perfpotInOverallScoreVO.sectionName,this.perfpotInOverallScoreVO.sectionIndex),this._perfpotRoundConnerSlots.renderHtml(a));this._ococRoundConnerSlots&&(this.renderSectionName(a,this.ococOverviewVO.sectionName,this.ococOverviewVO.sectionIndex),this._ococRoundConnerSlots.renderHtml(a));
this._summaryRoundConnerSlots&&(this.renderSectionName(a,this.summaryOverviewVO.sectionName,this.summaryOverviewVO.sectionIndex),this._summaryRoundConnerSlots.renderHtml(a));a.push("\x3c/div\x3e")},renderSectionName:function(a,b,c){a.push('\x3cdiv class\x3d"scoresectname"\x3e');a.push('\x3ca href\x3d"javascript:" onclick\x3d"',this.fireCode("_click"),'" rel\x3d"anchor_',c,'"\x3e',juic.escapeHTML(b),"\x3c/a\x3e");a.push("\x3c/div\x3e")},_click:function(a){a=a.srcElement||a.target;var b=SFDom.getY(a.rel);
480<b?window.scrollTo(0,b-175):window.scrollTo(0,0);$(a.rel).focus()}})}();function PM2IncompletedItems(a){this.register();this._m=a;this._sections=this._m.getData("/statistical/incompleteItemsVO/incompleteItems")}
PM2IncompletedItems.prototype=function(){return set(new Component,{_click:function(a){a=a.srcElement||a.target;var b=SFDom.getY(a.rel),b="static"===juic.$(TableOfContentsNS.TABLE_OF_CONTENTS.MAIN_POD_ID).style.position?b-(TableOfContentsNS.TABLE_OF_CONTENTS.POD_POSITION_STATIC_HEIGHT-TableOfContentsNS.TABLE_OF_CONTENTS.POD_POSITION_FIXED_HEIGHT):b;480<b?window.scrollTo(0,b-175):window.scrollTo(0,0);$(a.rel).focus()},renderHtml:function(a){a.push('\x3ctable class\x3d"contentPod"\x3e');for(var b=0;b<
this._sections.length;b++){var c=this._sections[b];a.push('\x3ctr\x3e\x3ctd class\x3d"sectionNamePod"\x3e',' \x3ca  onclick\x3d"',this.fireCode("_click"),';return false;" rel\x3d"anchor_',c.sectionIndex,'"\x3e',juic.escapeHTML(c.name),"\x3c/a\x3e\x3c/td\x3e");a.push('\x3ctd class\x3d"numberofItems"\x3e',c.numberOfIncompleteField,"\x3c/td\x3e\x3c/tr\x3e");for(var d=0;d<c.items.length-1;d++)a.push('\x3ctr\x3e\x3ctd class\x3d"itemNamePod"\x3e',' \x3ca   onclick\x3d"',this.fireCode("_click"),';return false;" rel\x3d"anchor_',
c.sectionIndex,"_",c.items[d].itemId,'"\x3e',juic.escapeHTML(c.items[d].name,"\x3cbr/\x3e"),"\x3c/a\x3e\x3c/td\x3e"),a.push('\x3ctd class\x3d"numberofItems"\x3e',c.items[d].numberOfIncompleteField,"\x3c/td\x3e\x3c/tr\x3e");c.items[c.items.length-1]&&(a.push('\x3ctr\x3e\x3ctd class\x3d"lastItemNamePod"\x3e',' \x3ca   onclick\x3d"',this.fireCode("_click"),';return false;" rel\x3d"anchor_',c.sectionIndex,"_",c.items[c.items.length-1].itemId,'"\x3e',juic.escapeHTML(c.items[c.items.length-1].name,"\x3cbr/\x3e"),
"\x3c/a\x3e\x3c/td\x3e"),a.push('\x3ctd class\x3d"numberofItems"\x3e',c.items[c.items.length-1].numberOfIncompleteField,"\x3c/td\x3e\x3c/tr\x3e"))}a.push("\x3c/table\x3e")}})}();function PM2TeamRank(a){this.register();this._m=a;this._teamRank=this._m.getData("/statistical/teamRank");this._teamUsers=this._teamRank.teamUsers;this._isShowValue=this._m.getData("/statistical/summaryVO/summInOverallScoreVO/overallRating/ratingScale/showValue")}
PM2TeamRank.prototype=function(){return set(new Component,{getRatingLabel:function(a){return(new PMRating(0,a.rating,a.textRating,this._isShowValue)).toString()},renderHtml:function(a){a.push('\x3cdiv class\x3d"contents" tabIndex\x3d0\x3e');if(this._teamUsers)for(var b=0,c=this._teamUsers.length;b<c;b++){var d=this._teamUsers[b];a.push('\x3cdiv class\x3d"pm2FloatContainer teamRank"\x3e');a.push('\x3cdiv class\x3d"pm2LFloatBlock rankNo"\x3e');a.push(juic.escapeHTML(d.rankNo));a.push("\x3c/div\x3e");
a.push('\x3cdiv class\x3d"pm2LFloatBlock avatars"\x3e');a.push('\x3cimg alt\x3d"" src\x3d"',d.commentBy.photoUrl,'"/\x3e');a.push("\x3c/div\x3e");a.push('\x3cdiv class\x3d"pm2LFloatBlock information"\x3e');a.push('\x3cdiv class\x3d"name"\x3e',juic.escapeHTML(d.commentBy.formattedFullName),"\x3c/div\x3e");a.push('\x3cdiv class\x3d"rating"\x3e',juic.escapeHTML(this.getRatingLabel(d)),"\x3c/div\x3e");a.push("\x3c/div\x3e");a.push("\x3c/div\x3e")}a.push("\x3c/div\x3e")}})}();
function PM2HistoryNotes(a){this.register();this._m=a;this.init()}
PM2HistoryNotes.prototype=function(){return set(new Component,{init:function(){if(this._notes=this._m.getData("/statistical/supportingInformationVO/noteHistory"))this._selfNotes=this._notes.selfNotes||[],this._othersNotes=this._notes.otherNotes||[],this._currentUserName=formConfig.currentUser.formattedFullName,this._selfLen=this._selfNotes.length,this._othersLen=this._othersNotes.length},_renderSelfNotes:function(a){a.push('        \x3cdiv class\x3d"noteHistorySect"\x3e');a.push('          \x3cdiv class\x3d"pmSupportingTitle" tabIndex\x3d0\x3e',
sfMessageFormat.format(MSGS.PERFORMANCE_PM2_NOTE_HISTORY_SELF_TITLE,juic.escapeHTML(this._currentUserName),this._selfLen),"\x26#x200E;\x3c/div\x3e");for(var b,c=0;c<this._selfLen;c++)b=this._selfNotes[c],c==this._selfLen-1?a.push('          \x3cdiv class\x3d"contentLast"\x3e'):a.push('          \x3cdiv class\x3d"content"\x3e'),a.push('            \x3cdiv class\x3d"pmsubTitle"\x3e',juic.escapeHTML(b.title),"\x3c/div\x3e"),a.push('            \x3cdiv class\x3d"pmSupportingDate"\x3e',juic.escapeHTML(b.lastModifiedStr),
"\x3c/div\x3e"),a.push('            \x3cp class\x3d"pmpara"\x3e',juic.escapeHTML(b.desc),"\x3c/p\x3e"),a.push("          \x3c/div\x3e");a.push("      \x3c/div\x3e")},_renderOtherNotes:function(a){a.push('        \x3cdiv class\x3d"noteHistorySect"\x3e');a.push('          \x3cdiv class\x3d"pmSupportingTitle" tabIndex\x3d0\x3e',sfMessageFormat.format(MSGS.PERFORMANCE_PM2_NOTE_HISTORY_OTHER_TITLE,this._othersLen),"\x26#x200E;\x3c/div\x3e");for(var b,c=0;c<this._othersLen;c++)b=this._othersNotes[c],c==
this._othersLen-1?a.push('          \x3cdiv class\x3d"contentLast"\x3e'):a.push('          \x3cdiv class\x3d"content"\x3e'),a.push('            \x3cdiv class\x3d"pmsubTitle"\x3e'),a.push('              \x3cdiv class\x3d"photoFrame"\x3e'),a.push('                \x3cimg alt\x3d"portait" src\x3d"',b.portaitUrl,'"\x3e\x3c/img\x3e'),a.push("              \x3c/div\x3e"),a.push('              \x3cdiv class\x3d"secondaryInfo"\x3e'),a.push('                \x3cdiv class\x3d"title"\x3e',juic.escapeHTML(b.title),
"\x3c/div\x3e"),a.push('                \x3cdiv class\x3d"writenBy"\x3e',sfMessageFormat.format(MSGS.PERFORMANCE_PM2_NOTE_HISTORY_OTHER_WRITTEN_BY,juic.escapeHTML(b.creatorFullName)),"\x3c/div\x3e"),a.push('                \x3cdiv class\x3d"pmSupportingDate"\x3e',juic.escapeHTML(b.lastModifiedStr),"\x3c/div\x3e"),a.push("              \x3c/div\x3e"),a.push('              \x3cdiv style\x3d"clear:both"\x3e\x3c/div\x3e'),a.push("            \x3c/div\x3e"),a.push("            \x3cp class\x3dpmpara\x3e",
juic.escapeHTML(b.desc),"\x3c/p\x3e"),a.push("          \x3c/div\x3e");a.push("        \x3c/div\x3e")},renderHtml:function(a){this._notes&&0<this._selfLen&&this._renderSelfNotes(a);this._notes&&0<this._othersLen&&this._renderOtherNotes(a)}})}();
function PM2FeedbackComments(a){this.register();this._m=a;this._commentsMap=this._m.getData("/statistical/supportingInformationVO/feedbacksByDate");this._comments={};var b=[];if(this._commentsMap)for(var c in this._commentsMap){var d=this._commentsMap[c],e;for(e in d){var f=d[e];"object"===typeof f&&(this._comments.hasOwnProperty(c)?this._comments.push(f):(b.push(f),this._comments=b))}}this._comments=this._comments||{};this._touchbase=this._m.getData("/statistical/supportingInformationVO/touchBaseItemVOMap");
this._touchbase||(this._touchbase={});this._noteHistory=new PM2HistoryNotes(a);a=this._m.getData("/statistical/supportingInformationVO/noteHistory/selfNotes");b=this._m.getData("/statistical/supportingInformationVO/noteHistory/otherNotes");this._noteHistoryLen=a?a.length:0;this._noteHistoryLen+=b?b.length:0;this._attachmentModel=this._m.getData("/statistical/supportingInformationVO/attachments");this._isAttachmentEnabled()&&(this._attachements=new PM2FileAttachmentComponent(this._attachmentModel),
this._attachements.addEventListener("handleFileUploadDialog",this),this._attachements.addEventListener("updateAttachementCount",this))}
PM2FeedbackComments.prototype=function(){return set(new Component,{_renderComments:function(a,b){for(var c=0;c<b.length;c++){a.push('\x3cp class\x3d"responseDate"\x3e',juic.escapeHTML(b[c].responseDate),"\x3c/p\x3e");a.push('\x3cdiv class\x3d"comment"\x3e');if(b[c].comment){for(var d=b[c].comment.split("\n"),e=0;e<d.length;e++)d[e]=d[e].replace(/\w+$/,""),d[e]=d[e].replace(/\n/g,"\x3c/br\x3e"),d[e]=d[e].replace(/<\/?mailto:[^>]*>/g,"");d=d.join("\x3c/br\x3e");a.push(d)}a.push("\x3c/div\x3e")}},_scrollTo:function(a,
b){var c=gebi(this.id+a),d=jQuery,e=d(c).position().top;d(c).offsetParent().scrollTop(e);PM2DialogUtil.stopEvent(b)},_isNoData:function(){var a=this._comments&&void 0!=this._comments.length?this._comments.length:0,a=a+this._touchbaseLen,a=a+this._noteHistoryLen,a=a+this._getAttachmentListLength();return 0==a?!0:!1},_getAttachmentListLength:function(){return this._attachmentModel?this._attachmentModel.attachmentsList.length:0},_isAttachmentEnabled:function(){return this._attachmentModel&&this._attachmentModel.showAttachment},
renderHtml:function(a){this._touchBaseMonthCount=this._touchbaseLen=0;var b=!1,c;for(c in this._touchbase)this._touchbaseLen+=this._touchbase[c].length,this._touchBaseMonthCount++;a.push('\x3cdiv class\x3d"pmSupportingJumpTo" tabIndex\x3d0\x3e');this._isNoData()?this._isAttachmentEnabled()?a.push(MSGS.PERFORMANCE_PM2_COMMENTS_JUMP_TO):a.push(MSGS.FB_COMP_STOCK_FACTOR_MGR_MSG_NO_DATA_FOUND):a.push(MSGS.PERFORMANCE_PM2_COMMENTS_JUMP_TO);null!=this._comments&&void 0!=this._comments&&0<this._comments.length&&
(a.push('\x3ca href\x3d"#" onclick\x3d"',this.fireCode("_scrollTo","comments"),'"\x3e\x26nbsp',MSGS.ANALYTICS_LIST_VIEW_BUILDER_SUBDOMAIN_hris_payroll_FEEDBACK," (",this._comments.length,")\x26#x200E;\x26nbsp","\x3c/a\x3e"),b=!0);0<this._touchbaseLen&&(b?a.push("|"):b=!0,a.push('\x3ca href\x3d"#" onclick\x3d"',this.fireCode("_scrollTo","touchbase"),'"\x3e\x26nbsp',MSGS.ADMIN_MOBILE_TOUCHBASE_SHORT," (",this._touchbaseLen,")\x26#x200E;\x26nbsp","\x3c/a\x3e"));0<this._noteHistoryLen&&(b?a.push("|"):
b=!0,a.push('\x3ca href\x3d"#" onclick\x3d"',this.fireCode("_scrollTo","notehistory"),'"\x3e\x26nbsp',MSGS.ADMINV2_TEMPLATE_FD_DESC_LABEL," (",this._noteHistoryLen,")\x26#x200E;\x26nbsp","\x3c/a\x3e"));this._isAttachmentEnabled()&&(b&&a.push("|"),a.push('\x3ca href\x3d"#" id\x3d"'+this.id+'_attachementsScroll" onclick\x3d"',this.fireCode("_scrollTo","attachments"),'"\x3e',this._getAttachementScrollText(),"\x3c/a\x3e"));a.push("\x3c/div\x3e");a.push('\x3cdiv class\x3d"pm2FeedbackCommentWrapper"\x3e');
null!=this._comments&&void 0!=this._comments&&0<this._comments.length&&(a.push('\x3cdiv class\x3d"pmSupportingTitle" tabIndex\x3d0\x3e'),a.push(MSGS.PERFORMANCE_PM2_COLUMN_GET_FEEDBACK," (",this._comments.length,")\x26#x200E;"),a.push("\x26nbsp;"),a.push("\x26nbsp;"),a.push("\x3c/div\x3e\x3c/br/\x3e"),this.renderComment(a));0<this._touchBaseMonthCount&&this.renderTouchBase(a);a.push('  \x3cdiv id \x3d "',this.id,'notehistory" \x3e');this._noteHistory.renderHtml(a);a.push("  \x3c/div\x3e");this._attachmentModel&&
this._attachements&&(a.push("\x3cdiv id\x3d'",this.id,"attachments'\x3e"),this._attachements.renderHtml(a),a.push("\x3c/div\x3e"))},renderTouchBase:function(a){a.push('\x3cdiv class\x3d"pmSupportingTitle" id\x3d"',this.id,"touchbase",'"\x3e');a.push(MSGS.ADMIN_MOBILE_TOUCHBASE_SHORT," (",this._touchbaseLen,")\x26#x200E;");a.push("\x3c/div\x3e");a.push('\x3cdiv class\x3d"pm2FeedbackCommentTouchbase"\x3e');var b=0,c;for(c in this._touchbase){month=c;b++;a.push('\x3cdiv class\x3d"touchbaseMonth"\x3e');
a.push(juic.escapeHTML(month));a.push("\x3c/div\x3e");for(var d=this._touchbase[c].length,e,f=0;f<d;f++){e=this._touchbase[c][f];a.push('\x3cdiv class\x3d"touchbaseItem"\x3e');a.push('  \x3cdiv class\x3d"touchbaseItemName"\x3e',juic.escapeHTML(e.name),"\x3c/div\x3e");a.push('  \x3cdiv class\x3d"touchbaseInfo"\x3e');a.push(MSGS.EMPFILE_HRIS_CREATED_BY," ",juic.escapeHTML(e.assignerProfileId)," ");switch(e.status){case "open":a.push(MSGS.PERFORMANCE_PM2_TOUCHBASE_OPEN);break;case "complete":a.push(MSGS.COMMON_Completed);
break;case "postponed":a.push(MSGS.PERFORMANCE_PM2_TOUCHBASE_POSTPONED)}a.push(" ",juic.escapeHTML(e.createdAt));switch(e.status){case "open":a.push(" - ",MSGS.PERFORMANCE_PM2_PRESENT);break;case "complete":a.push(" - ",juic.escapeHTML(e.completedAt));break;case "postponed":a.push(". ",MSGS.PERFORMANCE_PM2_POSTPONED_TO," ",juic.escapeHTML(e.updatedAt));break;default:a.push(" - ",MSGS.PERFORMANCE_PM2_PRESENT)}e.duration&&a.push(" (",juic.escapeHTML(e.duration),")\x26#x200E;");a.push("  \x3c/div\x3e");
a.push("\x3c/div\x3e");f==d-1&&b!=this._touchBaseMonthCount&&a.push('\x3cdiv class\x3d"touchbaseItemSpreator"\x3e\x3c/div\x3e')}}a.push("\x3c/div\x3e")},renderComment:function(a){this._feedbackMap={};a.push('\x3cdiv id\x3d"',this.id,"comments",'"\x3e');for(var b in this._commentsMap){var c=this._commentsMap[b];a.push('\x3cdiv class\x3d"sentDate"\x3e');var d=sfMessageFormat.format(MSGS.PERFORMANCE_PM2_FEEDBACK_SENT_ON_LABEL,b);a.push(juic.escapeHTML(d));a.push("\x3c/div\x3e");for(d=0;d<c.length;d++){var e=
c[d];"object"===typeof e&&e.responsed&&(a.push('\x3cdiv class\x3d"pmFeedbackComment"\x3e'),a.push('\x3cdiv class\x3d"pm2FloatContainer appraiser"\x3e'),a.push('\x3cdiv class\x3d"pm2LFloatBlock pmavatar"\x3e'),a.push('\x3cimg alt\x3d"" src\x3d"',e.appraiser.photoUrl,'"/\x3e'),a.push("\x3c/div\x3e"),a.push('\x3cdiv class\x3d"pm2LFloatBlock feedbackInfo"\x3e'),a.push("\x3ch6\x3e",MSGS.get("PERFORMANCE_PM2_FEEDBACK_TITLE",juic.escapeHTML(e.subject.firstName)),"\x3c/h6\x3e"),a.push("\x3cp\x3e",juic.escapeHTML(e.appraiser.formattedFullName),
"\x3c/p\x3e"),a.push("\x3c/div\x3e"),a.push("\x3c/div\x3e"),this._renderComments(a,e.comments),a.push("\x3c/div\x3e"))}}a.push("\x3c/div\x3e")},_updateAttachementsLink:function(){var a=juic.$(this.id+"_attachementsScroll");a&&(a.innerHTML=this._getAttachementScrollText())},_getAttachementScrollText:function(){return"\x3cspan class\x3d'attachmentScrollPadding'\x3e"+MSGS.PERFORMANCE_FILE_ATTACHMENT_DESCRIPTION.replace("{0}",this._attachmentModel.attachmentsList.length)+"\x26#x200E;\x3c/span\x3e"},handleEvent:function(a){switch(a.type){case "handleFileUploadDialog":document.body.style.overflow=
a.status?"visible":"hidden";this.dispatchEvent(a);break;case "updateAttachementCount":this.dispatchEvent(a),this._updateAttachementsLink()}}})}();function PM2GapDetail(a,b){this.register();this._m=a;this._isUpGap=b;this._gapDetail=this._m.getData("/statistical/gapAnalysisVO/"+(b?"gapUpList":"gapDownList"));this._summary=b?MSGS.PERFORMANCE_PM2_UP_GAP_TABLE_SUMMARY:MSGS.PERFORMANCE_PM2_DOWN_GAP_TABLE_SUMMARY}
PM2GapDetail.prototype=function(){return set(new Component,{_click:function(a){a=a.srcElement||a.target;var b=SFDom.getY(a.rel);480<b?window.scrollTo(0,b-175):window.scrollTo(0,0);$(a.rel).focus()},renderHtml:function(a){a.push("\x3cdiv tabindex\x3d0  title\x3d'",MSGS.PERFORMANCE_PM2_TABLE_TITLE,"'\x3e\x3ctable summary\x3d'",this._summary,"'\x3e\x3ctbody\x3e");for(var b=0;b<this._gapDetail.length;b++){var c=this._gapDetail[b],d=this._hasGap(c.sectionId);a.push('\x3ctr class\x3d"gapAnalysisDetail"\x3e');
a.push('\x3cth class\x3d"pm2LFloatBlock name" id\x3d"',this.id,"sectionId",c.sectionId,'"\x3e',juic.escapeHTML(c.name)," ","(",c.items.length,")","\x26#x200E;\x3c/th\x3e");d?a.push('\x3cth class\x3d"value" id\x3d"',this.id,"gap",c.sectionId,'"\x3e',MSGS.PERFORMANCE_REVIEW_GAP,"\x3c/th\x3e"):a.push('\x3cth class\x3d"value" id\x3d"',this.id,"gap",c.sectionId,'"\x3e\x26nbsp\x3c/th\x3e');a.push("\x3c/tr\x3e");for(var e=0;e<c.items.length;e++){a.push('\x3ctr class\x3d"pm2FloatContainer ');e===c.items.length-
1?a.push("gapAnalysisItem-last"):a.push("gapAnalysisItem");a.push('"\x3e');a.push('\x3ctd class\x3d"pm2LFloatBlock name" headers\x3d"',this.id,"sectionId",c.sectionId,'"\x3e\x3ca href\x3d"javascript:" onclick\x3d"',this.fireCode("_click"),'" rel\x3d"anchor_',c.sectionId,"_",c.items[e].itemId,'" \x3e');a.push(juic.escapeHTML(c.items[e].name,"\x3cbr/\x3e"));a.push("\x3c/a\x3e\x3c/td\x3e");if(d){a.push('\x3ctd class\x3d"value" headers\x3d"',this.id,"gap",c.sectionId,'"\x3e');var f=MSGS.COMMON_NA;c.items[e].value&&
(f=(this._isUpGap?"+":"")+c.items[e].value);a.push(juic.escapeHTML(f));a.push("\x3c/td\x3e")}else a.push('\x3ctd class\x3d"value" headers\x3d"',this.id,"gap",c.sectionId,'"\x3e\x26nbsp\x3c/td\x3e');a.push("\x3c/tr\x3e")}}0==this._gapDetail.length&&(a.push("\x3ctr\x3e"),a.push("\x3ctd tabindex\x3d0\x3e",MSGS.COMMON_NA,"\x3c/td\x3e"),a.push("\x3c/tr\x3e"));a.push("\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e")},_hasGap:function(a){return!!this._m.getData("/"+a+"/ratingScale/showValue")}})}();
function PM2GapAnalysis(a){this.register();this._m=a;a=new PM2GapDetail(this._m,!0);var b=new PM2GapDetail(this._m,!1);this._upSlots=new PMRoundSlots(a);this._downSlots=new PMRoundSlots(b)}
PM2GapAnalysis.prototype=function(){return set(new Component,{renderHtml:function(a){var b=this._m.traverse("/statistical/gapAnalysisVO/gapUpList",["itemId"],[]).length,c=this._m.traverse("/statistical/gapAnalysisVO/gapDownList",["itemId"],[]).length;a.push('\x3cdiv class\x3d"wrap"\x3e');a.push('\x3cdiv class\x3d"pm2FloatContainer gapContent" role\x3d"document"\x3e');a.push('\x3cdiv class\x3d"pm2LFloatBlock upGap" \x3e');a.push('\x3cdiv class\x3d"description"\x3e');a.push(sfMessageFormat.format(MSGS.PERFORMANCE_REVIEW_UP_RATING_LABEL,
b,juic.escapeHTML(formConfig.subject.firstName)));a.push("\x3c/div\x3e");a.push('\x3cdiv class\x3d"wrapUpSlots"\x3e');this._upSlots.renderHtml(a);a.push("\x3c/div\x3e");a.push("\x3c/div\x3e");a.push('\x3cdiv class\x3d"pm2LFloatBlock downGap" \x3e');a.push('\x3cdiv class\x3d"description"\x3e');a.push(sfMessageFormat.format(MSGS.PERFORMANCE_REVIEW_DOWN_RATING_LABEL,c,juic.escapeHTML(formConfig.subject.firstName)));a.push("\x3c/div\x3e");a.push('\x3cdiv class\x3d"wrapDownSlots"\x3e');this._downSlots.renderHtml(a);
a.push("\x3c/div\x3e");a.push("\x3c/div\x3e");a.push("\x3c/div\x3e");a.push("\x3c/div\x3e")}})}();function PM2ReviewSummary(a){this.register();this._init(a)}
PM2ReviewSummary.prototype=function(){return set(new Component,{_init:function(a){this._m=a;this._domIdForCommentsButton=this.id+"_commentsButton";this._userAvartar=this.id+"_avatar";this._htmlIdOverallScore=this.id+"_sco";this._htmlIdImcompleteItems=this.id+"imcp";this._htmlIdRank=this.id+"_rank";this._htmlIdRankIcon=this.id+"_rankIcon";this._htmlIdGapAnalysis=this.id+"manager_gap";this._htmlIdSupport=this.id+"support";this._htmlIdSupportContent=this.id+"support_content";this._htmlIdAttaments=this.id+
"attachment-doc";a=window.formConfig.infoPodStatusVO;this._isShowOverallScore=!!a.overallScorePodEnabled;this._isShowIncompleteItems=!!a.incompleteItemsPodEnabled;this._isShowTeamRank=!!a.teamRankPodEnabled;this._isShowSupportingInfo=!!a.supportingInformationPodEnabled;this._isShowGapAnalysis=!!a.gapAnalysisPodEnabled;this._isShowOverallScore&&(this._overallScoreComp=new PM2OverallScorePod(this._m),this._overallScoreComp.addEventListener("overallScoreClick",this));this.userPhoto=new SFPhoto({photoSrc:formConfig.subject.photoUrl,
fullName:formConfig.subject.formattedFullName},{profile:"PORTRAIT_60_80",nameDirection:"EAST",showUserName:!0,passedInNameStyle:"userName globalPlacematAction",focusable:!0});this.userPhoto.addEventListener("click",this);this.userPhoto.addEventListener("keydown",this)},refreshFeedbackComp:function(){var a=0,b=0,c=0,d=!1,e=!1,f=this._m.getData("/statistical/supportingInformationVO/feedbackPermissionsEnabled");if(this._isLoggedInUserIsSubjectUser()&&!f)c++,e=!0,b=this._getAttachmentCount();else{c++;
d=!0;if(f=this._m.getData("/statistical/supportingInformationVO/feedbacksByDate"))for(var g in f)a+=f[g].length;a+=this._m.traverse("/statistical/supportingInformationVO/touchBaseItemVOMap",["name"],[]).length;g=this._m.getData("/statistical/supportingInformationVO/noteHistory/selfNotes");f=this._m.getData("/statistical/supportingInformationVO/noteHistory/otherNotes");a+=g?g.length:0;a+=f?f.length:0;juic.$(this.getDomIdForCommentsButton()).setAttribute("title",MSGS.get("PERFORMANCE_PM2_SUPPORTING_TITLE",
a));this._isAttachmentEnabled()&&(c++,e=!0,b=this._getAttachmentCount())}g=[];g.push('\x3cspan class\x3d"',1==c?"onevaluewrp":"valuewrp",'"\x3e');c=1==c?"podOneIconSize":"podSmallIconSize";d&&(g.push('\x3cspan class\x3d"sfSuppIcon globalPortletCalloutTextColor ',c,'"\x3e\x26#xe068;\x3c/span\x3e'),g.push('\x3cspan class\x3d"number" \x3e',a,"\x3c/span\x3e"));e&&(g.push('\x3cspan class\x3d"sapIcon globalPortletCalloutTextColor ',c,'"\x3e\x26#xe04a;\x3c/span\x3e'),g.push('\x3cspan class\x3d"number" id\x3d"',
this._htmlIdAttaments,'"\x3e',b,"\x3c/span\x3e"));g.push('\x3cspan class\x3d"clr"\x3e\x3c/span\x3e');if(a=juic.$(this._htmlIdSupportContent))a.innerHTML=g.join("");this.supportingInformationReturned=!0},_isLoggedInUserIsSubjectUser:function(){return formConfig.subject.userId===formConfig.currentUser.userId},_getAttachmentCount:function(){var a=this._attachmentModel=this._m.getData("/statistical/supportingInformationVO/attachments");return a?a.attachmentsList.length:0},_isAttachmentEnabled:function(){var a=
this._attachmentModel=this._m.getData("/statistical/supportingInformationVO/attachments");return a?a.showAttachment:!1},_refreshAttachmentCount:function(){juic.$(this._htmlIdAttaments).innerHTML=this._getAttachmentCount()},refreshTeamRankComp:function(){var a=this.id+"_TeamRankButton";if($(a)){var b=$(this._htmlIdRankIcon),c=$(this._htmlIdRank+"_subjectValue"),d=$(this._htmlIdRank+"_loading"),e=$(this._htmlIdRank+"_teamValue"),f=$(this._htmlIdRank+"_outofno"),g=this._m.getData("/statistical/teamRank");
if(g){if(g.errorMessage)c.className="sapIcon globalPortletAlertTextColor podIconSize",c.innerHTML="\x26#xe201;",f.style.display="none",juic.$(a).setAttribute("title",g.errorMessage);else{var h=g.rankNo,g=g.teamUsers?g.teamUsers.length:0;c.className="";c.innerHTML=sfMessageFormat.format(MSGS.PERFORMANCE_REVIEW_TEAM_RANK_SYMBOL,juic.escapeHTML(h));e.innerHTML=sfMessageFormat.format(MSGS.PERFORMANCE_REVIEW_OUT_OF,g);f.style.display="";e=MSGS.get("PERFORMANCE_TEAMRATER_STACK_RANKER_TITLE",h,g);juic.$(a).setAttribute("title",
e)}b.style.display="";c.style.display="";d.style.display="none"}else b.style.display="none",c.style.display="none",f.style.display="none",d.style.display=""}},handleEvent:function(a){switch(a.type){case "overallScoreClick":this._htmlIdOverallScore=a.toggleElement;this._clickOverallScore(a);break;case "click":this._clickUserAvatar(a);break;case "keydown":"RETURN"===a.keyName&&this._clickUserAvatar(a)}},renderHtml:function(a){a.push('\x3cdiv id\x3d"',this.id,'" class\x3d"pmureviewsummary"\x3e');a.push('  \x3cdiv class\x3d"pmuFloatBlockContainer"\x3e');
a.push('\x3cdiv class\x3d"pmuLFloatBlock"\x3e');a.push('\x3cdiv class\x3d"userPhoto" role\x3d"button" aria-haspopup\x3d"true" \x3e');this.userPhoto.renderHtml(a);a.push("\x3c/div\x3e");this._isShowOverallScore&&this._overallScoreComp&&this._overallScoreComp.renderHtml(a);if(this._isShowIncompleteItems){for(var b=this._m.traverse("/statistical/incompleteItemsVO/incompleteItems",["numberOfIncompleteField",""],[]),c=0,d=0,e=b.length;d<e;d++)c+=parseInt(b[d]);a.push('\x3cbutton id\x3d"',this.id,'_IncompleteItemsButton" ');
a.push('aria-haspopup\x3d"true" aria-label\x3d"',MSGS.PERFORMANCE_REVIEW_INCOMPLETE_ITEMS,'" ');a.push('title\x3d"',juic.escapeHTML(MSGS.get("PERFORMANCE_REVIEW_INCOMPLETE_ITEMS_TITLE",c)),'" ');a.push('onkeypress\x3d"',this.fireCode("_handleIncompleteItemsOnKeyPress"),';return false;"');a.push('class\x3d"leftsum globalRoundedCorners globalPortletBodyBackground globalPortletBody pmPortletBorder" onClick\x3d"',this.fireCode("_clickIncompleteItems"),';return false;" \x3e');a.push('\x3cspan class\x3d"imcomp"\x3e\x3cspan class\x3d"sapIcon globalPortletCalloutTextColor podIconSize"\x3e');
0<c?a.push("\x26#xe201;"):a.push("\x26#xe05b;");a.push('\x3c/span\x3e\x3cspan id\x3d"',this._htmlIdImcompleteItems,'_value"\x3e',c,"\x3c/span\x3e\x3c/span\x3e");a.push('\x3cspan class\x3d"sumlink"\x3e\x3cspan class\x3d"down"\x3e\x3cspan class\x3d"up"\x3e',MSGS.PERFORMANCE_REVIEW_INCOMPLETE_ITEMS,"\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e");a.push('\x3cspan class\x3d"caretMark" id\x3d"',this._htmlIdImcompleteItems,'"\x3e\x3c/span\x3e');a.push("\x3c/button\x3e")}this._isShowTeamRank&&(a.push('\x3cbutton id\x3d"',
this.id,'_TeamRankButton"  title\x3d"',MSGS.PERFORMANCE_PM2_LOADING_STACK_RANKER,'" '),a.push('aria-haspopup\x3d"true" '),a.push('class\x3d"leftsum globalRoundedCorners globalPortletBodyBackground globalPortletBody pmPortletBorder" onClick\x3d"',this.fireCode("_clickRank"),';return false;" '),a.push('onkeypress\x3d"',this.fireCode("_handleTeamRankKeyPress"),';return false;"\x3e'),a.push('\x3cspan class\x3d"rank"\x3e\x3cspan style\x3d"display: none;font-size: 20px;font-weight: bold;" id\x3d"',this._htmlIdRankIcon,
'" class\x3d"globalPortletCalloutTextColor"\x3e\x3c/span\x3e'),a.push('\x3cspan style\x3d"display: none;" id\x3d"',this._htmlIdRank,'_subjectValue"\x3e\x3c/span\x3e'),a.push('\x3cspan class\x3d"loading" id\x3d"',this._htmlIdRank+"_loading",'"\x3e',MSGS.COMMON_loading,"\x3c/span\x3e"),a.push("\x3c/span\x3e"),a.push('\x3cspan id\x3d"',this._htmlIdRank,'_outofno" style\x3d"display: none;" class\x3d"sumlink"\x3e'),a.push('\x3cspan class\x3d"down"\x3e\x3cspan class\x3d"up"\x3e\x3cspan id\x3d"',this._htmlIdRank,
'_teamValue"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e'),a.push("\x3c/span\x3e"),a.push('\x3cspan class\x3d"caretMark" id\x3d"',this._htmlIdRank,'"\x3e\x3c/span\x3e'),a.push("\x3c/button\x3e"));a.push("\x3c/div\x3e");a.push('\x3cdiv class\x3d"pmuRFloatBlock"\x3e');this._isShowSupportingInfo&&(a.push('\x3cbutton id\x3d"',this.getDomIdForCommentsButton(),'" '),a.push('aria-haspopup\x3d"true" aria-label\x3d"',MSGS.PERFORMANCE_PM2_SUPPORTING,'" '),a.push('title\x3d"',MSGS.PERFORMANCE_PM2_LOADING_SUPPORTING,
'" '),a.push('onkeypress\x3d"',this.fireCode("_handleSupportingInfoKeyPress"),';return false;"'),a.push(' class\x3d"leftsum globalRoundedCorners globalPortletBodyBackground globalPortletBody  pmPortletBorder" onClick\x3d"',this.fireCode("_clickComments"),';return false;" \x3e'),a.push('\x3cspan class\x3d"comts" id\x3d"',this._htmlIdSupportContent,'"\x3e\x3cspan class\x3d"loading"\x3e',MSGS.COMMON_loading,"\x3c/span\x3e\x3c/span\x3e"),a.push('\x3cspan class\x3d"sumlink"\x3e\x3cspan class\x3d"down"\x3e\x3cspan class\x3d"up"\x3e',
MSGS.PERFORMANCE_PM2_SUPPORTING,"\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e"),a.push('\x3cspan class\x3d"caretMark" id\x3d"',this._htmlIdSupport,'"\x3e\x3c/span\x3e'),a.push("\x3c/button\x3e"));this._isShowGapAnalysis&&(b=this._m.traverse("/statistical/gapAnalysisVO/gapUpList",["itemId"],[]).length,c=this._m.traverse("/statistical/gapAnalysisVO/gapDownList",["itemId"],[]).length,a.push('\x3cbutton id\x3d"',this.id,'_GapAnalysisButton" '),a.push('aria-haspopup\x3d"true" aria-label\x3d"',MSGS.PERFORMANCE_REVIEW_GAP_ANALYSIS,
'" '),a.push('title\x3d"',juic.escapeHTML(MSGS.get("PERFORMANCE_REVIEW_GAP_ANALYSIS_TITLE",b,c)),'" '),a.push('onkeypress\x3d"',this.fireCode("_handleGapAnalysisKeyPress"),';return false;"'),a.push(' class\x3d"leftsum globalRoundedCorners globalPortletBodyBackground globalPortletBody pmPortletBorder" onClick\x3d"',this.fireCode("_clickGapAnalysis"),';return false;" \x3e'),a.push('\x3cspan class\x3d"rate"\x3e\x3cspan class\x3d"valuewrp"\x3e'),a.push('\x3cspan class\x3d"sapIcon globalPortletCalloutTextColor podSmallIconSize"\x3e\x26#xe1e4;\x3c/span\x3e\x3cspan class\x3d"number" \x3e',
b,"\x3c/span\x3e"),a.push('\x3cspan class\x3d"sapIcon globalPortletAlertTextColor podSmallIconSize"\x3e\x26#xe1e3;\x3c/span\x3e\x3cspan class\x3d"number" \x3e',c,"\x3c/span\x3e"),a.push('\x3cspan class\x3d"clr"\x3e\x3c/span\x3e'),a.push("\x3c/span\x3e\x3c/span\x3e"),a.push('\x3cspan class\x3d"sumlink"\x3e\x3cspan class\x3d"down"\x3e\x3cspan class\x3d"up"\x3e',MSGS.PERFORMANCE_REVIEW_GAP_ANALYSIS,"\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e"),a.push('\x3cspan class\x3d"caretMark" id\x3d"',this._htmlIdGapAnalysis,
'"\x3e\x3c/span\x3e'),a.push("\x3c/button\x3e"));a.push("\x3c/div\x3e");a.push("\x3c/div\x3e");window.formConfig.tableofcontents||a.push('\x3cdiv id\x3d"',this.getTableOfContentsPlaceHolder(),'" class\x3d"pm2-table-of-contents-links-div"\x3e \x3c/div\x3e');a.push("\x3c/div\x3e")},getTableOfContentsPlaceHolder:function(){return this.id+"tableOfContents"},_handleToggleInstruction:function(){var a=juic.$(this.id+"_instructionContainer");juic.$(this.id+"_instructionLink").innerHTML="true"==a.getAttribute("aria-hidden")?
MSGS.PERFORMANCE_HIDE_INSTRUCTION:MSGS.PERFORMANCE_SHOW_INSTRUCTION;Util.toggleHide(a);SFDom.toggleAriaAttribute(a,"aria-hidden")},getDomIdForCommentsButton:function(){return this._domIdForCommentsButton},getDomIdForGapAnalysisButton:function(){return $(this.id+"_GapAnalysisButton")},getDomIdForAvatarButton:function(){return $(this.id+"_avatarButton")},getDomIdForTeamRankButton:function(){return $(this.id+"_TeamRankButton")},getDomIdForIncompleteItemsButton:function(){return $(this.id+"_IncompleteItemsButton")},
_clickUserAvatar:function(a,b){function c(a){f._quickcard._clickHandlerRegistered&&f._quickcard.hide()}if(!this._quickcard){var d=juic.$(a.target.id).parentElement.offsetHeight;this._quickcard=Quickcard.newInstance({userId:formConfig.subject.userId,movePos:{vertical:d,horizontal:0},useNameAnchor:!1,showOrgChart:!0});this._quickcard.show(a.target.id,!0,a.target.id);var e=setTimeout(function(){if(0<document.getElementsByClassName("qcWrapper globalRoundedCorners  qcWithPhoto").length){var a=document.getElementsByClassName("qcWrapper globalRoundedCorners  qcWithPhoto")[0];
void 0!=a&&(a.setAttribute("role","dialog"),a.setAttribute("aria-modal","true"),a.setAttribute("aria-label","user profile"))}},500),f=this,g={onClose:function(){f._quickcard&&f._quickcard._qc&&f._quickcard._qc.removeEventListener&&f._quickcard._qc.removeEventListener("hide",g);jQuery(window).off("scroll",c);f._quickcard=void 0;clearTimeout(e)}};this._quickcard.addEventListener("hide",g,"onClose");if(!b)jQuery(window).on("scroll",c)}},_clickOverallScore:function(a){var b=this._m.getData("/statistical/summaryVO/finalRating/ratingLabel"),
c=new PM2Score(this._m),b=new PM2DetailCanvas(c,b);b.setCSSClass("scoreDetailCanvas");a=a.focussedElem?$(a.focussedElem):null;this._calloutPopup=this._popupDialog(this._calloutPopup,b.title,b,this._htmlIdOverallScore,a)},_handleIncompleteItemsOnKeyPress:function(a){var b=SFDOMEvent.getCharCode(a);if(b===SFDOMEvent.KEY_CODE.RETURN||b===SFDOMEvent.KEY_CODE.SPACE)a.preventDefault(),this._clickIncompleteItems(a)},_clickIncompleteItems:function(a){a=new PM2IncompletedItems(this._m);a=new PM2DetailCanvas(a,
MSGS.PERFORMANCE_REVIEW_INCOMPLETE_ITEMS);var b=this.getDomIdForIncompleteItemsButton();this._calloutPopup=this._popupDialog(this._calloutPopup,a.title,a,this._htmlIdImcompleteItems,b)},_handleTeamRankKeyPress:function(a){var b=SFDOMEvent.getCharCode(a);if(b===SFDOMEvent.KEY_CODE.RETURN||b===SFDOMEvent.KEY_CODE.SPACE)a.preventDefault(),this._clickRank(a)},_clickRank:function(a){if(a=this._m.getData("/statistical/teamRank")){var b=a.errorMessage;b?(a=new PM2LegendLable(b,null,!0,"padding: 1em;"),a=
new PM2DetailCanvas(a,MSGS.PERFORMANCE_REVIEW_TEAM_RANK)):(b=new PM2TeamRank(this._m),a=new PM2DetailCanvas(b,sfMessageFormat.format(MSGS.PERFORMANCE_REVIEW_IN_THE_TEAM_OF_LABEL,formConfig.subject.firstName,a.rankNo,a.teamUsers?a.teamUsers.length:0)));b=this.getDomIdForTeamRankButton();this._calloutPopup=this._popupDialog(this._calloutPopup,a.title,a,this._htmlIdRank,b)}},_handleSupportingInfoKeyPress:function(a){var b=SFDOMEvent.getCharCode(a);if(b===SFDOMEvent.KEY_CODE.RETURN||b===SFDOMEvent.KEY_CODE.SPACE)a.preventDefault(),
this._clickComments(a)},_clickComments:function(a){if(this.supportingInformationReturned){a=new PM2FeedbackComments(this._m);a.addEventListener("handleFileUploadDialog",this,"_handleFileUploadDialogToggle");a.addEventListener("updateAttachementCount",this,"_refreshAttachmentCount");a=new PM2DetailCanvas(a,MSGS.PERFORMANCE_PM2_SUPPORTING);a.setCSSClass("pmuDetailCanvas");var b=juic.$(this.getDomIdForCommentsButton());this._calloutPopup=this._popupDialog(this._calloutPopup,a.title,a,this._htmlIdSupport,
b)}},_handleFileUploadDialogToggle:function(a){this._calloutPopup.setCloseOnClick(a.status)},_handleGapAnalysisKeyPress:function(a){var b=SFDOMEvent.getCharCode(a);if(b===SFDOMEvent.KEY_CODE.RETURN||b===SFDOMEvent.KEY_CODE.SPACE)a.preventDefault(),this._clickGapAnalysis(a)},_clickGapAnalysis:function(a){a=new PM2GapAnalysis(this._m);a=new PM2DetailCanvas(a,MSGS.PERFORMANCE_REVIEW_GAP_ANALYSIS);a.setCSSClass("gapCanvas");var b=this.getDomIdForGapAnalysisButton();this._calloutPopup=this._popupDialog(this._calloutPopup,
a.title,a,this._htmlIdGapAnalysis,b)},_popupDialog:function(a,b,c,d,e){a=new SFCalloutPopup({originOptions:{pointerOffset:40},closeOnMouseout:!1,showCloseIcon:!0,originId:d,refocusRef:e,title:b,content:c});a.show(d,{setFocusOnSelf:!0});return a}})}();function PMStatisticalUtil(){}
PMStatisticalUtil.updateDataModel=function(a){var b=a.getData("/statistical/calcRatings");if(b)for(var c=0,d=b.length;c<d;c++){var e=b[c];if(e){var f="/"+e.sectIndex+"/sectItems/"+e.itemIndex+"/ratingOfRecord/";null!=e.rating&&a.setData(f+"rating",e.rating);null!=e.textRating&&a.setData(f+"textRating",e.textRating)}}b=a.getData("/statistical/groupMatrixVO/groupMatrix");c=a.getData("/statistical/groupMatrixVO/sectIndex");b&&a.setData(c+"/groupMatrix",b)};