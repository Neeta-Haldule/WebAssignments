function PM2Dialog(a,b){this.register();a||(a={isModal:!1,isShowCaretArrow:!1});this.init(a,b||null)}
juic.extend(PM2Dialog,SFDialogBox,{init:function(a,b){this._isEventHooked=this._preventClose=!1;this._buttons=[];this.isHidden=!0;this._css_head_close_image=IMAGES["/ui/pm2/img/icon_popup_close.gif"];this.options||(SFPositionManager.addEventListener("positionFixed",this),SFOverlayMgr.addEventListener("overlayRendered",this),SFOverlayMgr.addEventListener("CompCentered",this),this.options={});this._isArrowPrepared=!1;b&&this._setListenerObj(b)},_prepareArrow:function(){},setOptions:function(a){assert(a.component,
"PM2Dialog: the options have to contain the JUIC component!");this.setComponent(a.component);this.options=a||{};this.setButtons(a.buttons||[]);this.isAutoClose=a.isAutoClose||!1;this.autoCloseMS=a.autoCloseMS||2E3;this.isModal=a.isModal;this.triggerElId=a.triggerElId||"caret_"+this.id;this.isShowCloseButton=void 0!==a.isShowCloseButton?a.isShowCloseButton:!0;this.isShowTitle=a.isShowTitle?a.isShowTitle:!0;this.dialogTitle=a.dialogTitle?a.dialogTitle:"\x26nbsp;";this._css_prefix=this.isShowTitle?"blue-":
"";this.isShowCaretArrow=a.isShowCaretArrow?a.isShowCaretArrow:!0;this.maxHeight=a.maxHeight||0;this._defaultFocus=0==a.defaultFocus?!1:!0;this.buttonRowClass=a.buttonRowClass?" "+a.buttonRowClass:""},_handleKeydown:function(a){var b=a.target||a.srcElement,d=a.which||a.keyCode,c=juic.$(this.id+"pm2Dialog-start"),e=juic.$(this.id+"pm2Dialog-end"),f=!1;9===d?a.shiftKey||b!=e?a.shiftKey&&b==c&&(f=!0,e.focus()):(f=!0,c.focus()):27==d&&(this._cancel(),PM2DialogUtil.stopEvent(a));f&&(a.preventDefault?a.preventDefault():
a.returnValue=!1)},setDlgFocus:function(){var a;(a=juic.$(this.id))&&a.focus()},_usesStandardHeader:function(){return!1},renderHtml:function(a){a.push('\x3cdiv tabIndex\x3d-1 onkeydown\x3d"',this.fireCode("_handleKeydown"),'" id\x3d"',this.id,'" class\x3d"dialogBoxWrapper scrollableDialog pm2Dialog" style\x3d"display:block;" ');this.isShowTitle&&a.push(' aria-labelledby\x3d"pm2dialog-label"');a.push("\x3e");a.push('\x3cspan tabIndex\x3d"0" class\x3d"dialogMarkerAnchors" id\x3d"',this.id,'pm2Dialog-start" \x3e',
MSGS.PERFORMANCE_PM2_DIALOG_START," ",juic.escapeHTML(this.dialogTitle),"\x3c/span\x3e");a.push('\x3ctable role\x3d"presentation" cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"',this.isModal?"modal":"",'"\x3e');a.push('\x3ctr\x3e\x3ctd class \x3d "',this._css_prefix,'top-left"\x3e\x3cdiv style\x3d"width:20px;height:20px"\x3e\x3c/idv\x3e\x3c/td\x3e\x3ctd class \x3d"',this._css_prefix,'top-center"\x3e\x3c/td\x3e\x3ctd class\x3d"',this._css_prefix,'top-right"\x3e\x3c/td\x3e\x3c/tr\x3e');this.isShowTitle&&
(a.push('\x3ctr\x3e\x3ctd class \x3d"',this._css_prefix,'head-left"\x3e\x3c/td\x3e'),a.push('\x3ctd class\x3d"',this._css_prefix,'head-content"\x3e'),a.push('\x3cdiv tabIndex\x3d-1 class \x3d "',this._css_prefix,'head-title" id\x3d"pm2dialog-label"\x3e',juic.escapeHTML(this.dialogTitle),"\x3c/div\x3e"),this.isShowCloseButton&&a.push('\x3ca href\x3d"javascript:void(0)" title\x3d"',MSGS.COMMON_Close,'" onclick\x3d"',this.fireCode("close"),'"\x3e\x3cimg class\x3d "',this._css_prefix,'close-icon" src\x3d"',
this._css_head_close_image,'" alt\x3d"" /\x3e\x3c/a\x3e'),a.push("\x3c/td\x3e"),a.push('\x3ctd class \x3d "',this._css_prefix,'head-right"\x3e\x3c/td\x3e'),a.push("\x3c/tr\x3e"));a.push('\x3ctr\x3e\x3ctd class \x3d "',this._css_prefix,'min-left"\x3e\x3c/td\x3e\x3ctd class \x3d"body"\x3e');var b="";0!=this.maxHeight&&(b='style\x3d"max-height:'+this.maxHeight+'px; overflow-y:auto;"; ');a.push("\x3cdiv ",b,'class \x3d "cont" id \x3d "pm2Dialog_cont',this.id,'"\x3e');this._contentComponent.renderHtml(a);
a.push('\x3c/div\x3e\x3c/td\x3e\x3ctd class\x3d"',this._css_prefix,'min-right"\x3e\x3cdiv style\x3d"width:20px;"\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e');if(this._buttons&&0<this._buttons.length){a.push('\x3ctr\x3e\x3ctd class\x3d"',this._css_prefix,'min-left"\x3e\x3c/td\x3e\x3ctd class\x3d"body buttonRow',this.buttonRowClass,'" id\x3d"',this.id,'"\x3e');a.push('\x3cdiv style\x3d"display: none;"\x3e\x3c/div\x3e');for(b=this._buttons.length-1;-1<b;b--){var d=this._buttons[b];d&&d.renderHtml(a)}a.push('\x3c/td\x3e\x3ctd class\x3d"',
this._css_prefix,'min-right"\x3e\x3c/td\x3e\x3c/tr\x3e')}a.push('\x3ctr\x3e\x3ctd class \x3d "',this._css_prefix,'bottom-left"\x3e\x3c/td\x3e\x3ctd class \x3d"',this._css_prefix,'bottom-center"\x3e\x3c/td\x3e\x3ctd class\x3d"',this._css_prefix,'bottom-right"\x3e\x3c/td\x3e\x3c/tr\x3e');a.push("\x3c/table\x3e");a.push('\x3cspan class\x3d"dialogMarkerAnchors" tabIndex\x3d0  id\x3d"',this.id,'pm2Dialog-end" \x3e',MSGS.PERFORMANCE_PM2_DIALOG_END,"\x3c/span\x3e");a.push("\x3c/div\x3e")},_cleanupButtons:function(){for(var a=
0,b=this._buttons.length;a<b;a++){var d=this._buttons[a];d&&(d.unregister&&d.unregister(),this._buttons[a]=null)}this._buttons=[]},cleanup:function(){this._cleanupButtons();this.unregister()},setButtons:function(a){for(var b=0,d=a.length;b<d;++b){var c=a[b];c.eventType||(c.eventType="action");var e=!1;c.colorType&&"secondary"===c.colorType&&(e=!0);c.disabled||(c.disabled=!1);c.useCommon?(e=new SFCommandButton(c.label,!!c.isPrimary,!c.disabled,!0,{baseButtonWrapperClass:"sfDialogBoxButtonWrapper"}),
e.setActionCommand(c.eventType),c.listener&&e.addEventListener("action",c.listener),"hideDialog"==c.eventType&&e.addEventListener("action",this)):(e=new PM2Button(c.label,{disabled:c.disabled,listener:c.listener,actionCommand:c.eventType,isGrayText:e}),e.addEventListener(c.eventType,this));this._buttons.push(e)}},getButtons:function(){return this._buttons},setComponent:function(a){this._contentComponent=a;var b="pm2Dialog_cont"+this.id;juic.$(b)&&a.render(b)},getComponentId:function(){return this._contentComponent.id},
_cancel:function(){this.close()},handleEvent:function(a){switch(a.type){case "action":if("hide"==a.actionCommand||"hideDialog"==a.actionCommand){var b=this;setTimeout(function(){b.close();b.hide()},0)}this.dispatchEvent(a);break;case "hideDialog":b=this;setTimeout(function(){b.close();b.hide()},0);this.dispatchEvent(a);break;case "positionFixed":var d=juic.$(a.positionInfo.overlay.overlayId);d&&d.lastChild.id==this.id&&(this._adjustDialog(a),this._defaultFocus&&this.setDlgFocus());break;case "overlayRendered":this.isModal&&
(d=juic.$(a.overlayId),this._defaultFocus&&this.setDlgFocus());break;case "contentSizeChanged":this.resize()}},disableButtons:function(){for(var a=0,b=this._buttons.length;a<b;++a)this._buttons[a].disable?this._buttons[a].disable():this._buttons[a].setEnabled&&this._buttons[a].setEnabled(!1)},enableButtons:function(){for(var a=0,b=this._buttons.length;a<b;++a)this._buttons[a].enable?this._buttons[a].enable():this._buttons[a].setEnabled&&this._buttons[a].setEnabled(!0)},disableButton:function(a){this._buttons[a].disable?
this._buttons[a].disable():this._buttons[a].setEnabled&&this._buttons[a].setEnabled(!1);this.dispatch("buttonsDisabled")},enableButton:function(a){this._buttons[a].enable?this._buttons[a].enable():this._buttons[a].setEnabled&&this._buttons[a].setEnabled(!0);this.dispatch("buttonsEnabled")},setPreventCloseState:function(a){this._preventClose=a},getPreventCloseState:function(){return this._preventClose},_setListenerObj:function(a){this.removeListenerObj();(this._listenerObj=a||null)&&this.addEventListener(this._listenerObj.getEventName(),
this._listenerObj)},removeListenerObj:function(){this._listenerObj&&this._listenerObj.getEventName&&this.removeEventListener(this._listenerObj.getEventName(),this._listenerObj)},close:function(){this._preventClose?this.dispatch("action",{actionCommand:"hideRequest"}):(this.dispatch("action",{actionCommand:"hide"}),this.hide(),this.dispatch("hide",{compentId:this._contentComponent.id}),this._isEventHooked=!1,this._cleanupButtons());this.removeEventListener("action",this._contentComponent);"undefined"!=
typeof PM2DialogManager&&PM2DialogManager.removeOpenDialog()},show:function(a,b){this.isHidden||this.close();"undefined"!=typeof PM2DialogManager&&PM2DialogManager.closeOpenDialog();this._prepareArrow();this._getViewportWidthHeight();a&&this.setOptions(a);b&&this._setListenerObj(b);this.fixPoint={origin:{vertical:"bottom",horizontal:"right"},menu:{vertical:"top",horizontal:"left"}};this.isModal?SFOverlayMgr.showOverlay(this,!0,{left:0,top:0}):SFPositionManager.show(this,this.triggerElId,this.fixPoint);
this.isHidden=!1},_adjustDialog:function(a){this._pinfo=a?a.positionInfo:this._pinfo;a=juic.$(this.triggerElId);a=getAbsolutePosition(a);this._targetDims={left:a.x,top:a.y,width:a.w,height:a.h};juic.$(this.id);a=juic.$("caret_"+this.id);pos.isOnAboveOrDown&&(a.className=pos.isOnTop?"dialogCaretDown":"dialogCaretTop");pos.isOnSides&&(a.className=pos.isOnLeft?"dialogCaretRight":"dialogCaretLeft");SFOverlayMgr.repositionComponent(this._pinfo.overlay.overlayId,{left:pos.dlgLeft,top:pos.dlgTop});a.style.left=
pos.left+"px";a.style.top=pos.top+"px";juic.$("caret_"+this.id).style.display=this.isShowCaretArrow&&!this.options.isModal?"block":"none";this._isEventHooked||this._hookEvent()},m2:function(){},resize:function(){this.isHidden||this._adjustDialog()},hide:function(){this.isHidden=!0;this._listenerObj&&this._listenerObj._config&&this._listenerObj._config.elemorId&&this._listenerObj._config.elemorId.id&&juic.$("dlgButton_"+this._listenerObj._config.elemorId.id)&&juic.$("dlgButton_"+this._listenerObj._config.elemorId.id).focus()},
display:function(){document.getElementById("caret_"+this.id).style.display="";this.isHidden=!1},_getViewportWidthHeight:function(){this.screenHeight=SFDom.getViewportHeight();this.screenWidth=SFDom.getViewportWidth()},_getCaretPos:function(a,b,d){},_hookEvent:function(){function a(){clearTimeout(c._timer);c._timer=null}function b(){clearTimeout(c._timer);c._timer=null;c._timer=setTimeout(function(){clearTimeout(c._timer);c._timer=null;c.close()},c.autoCloseMS)}if(this.isAutoClose){var d=document.getElementById(this.id);
if(d){var c=this;d.onmousemove=a;d.onmouseover=a;d.onmouseout=b;b();this._isEventHooked=!0}}}});PM2Dialog.isIE=document.all?!0:!1;PM2Dialog.me=new PM2Dialog;PM2Dialog.show=function(a,b){PM2Dialog.me.show(a,b);return PM2Dialog.me};PM2Dialog.close=function(){PM2Dialog.me.close()};PM2Dialog.setComponent=function(a){PM2Dialog.me.setComponent(a)};PM2Dialog.hide=function(){PM2Dialog.me.hide()};PM2Dialog.display=function(){PM2Dialog.me.display()};PM2Dialog.removeListenerObj=function(){PM2Dialog.me.removeListenerObj()};
function PM2CalloutDialog(a){a=a?a:{};null==a.closeOnMouseout&&(a.closeOnMouseout=!1);null==a.footer&&(a.footer=" ");this._ariaSet=!1;this._super(a)}
juic.extend(PM2CalloutDialog,SFCalloutPopup,{disableButtons:function(){},_usesStandardHeader:function(){return!1},show:function(){this._super.apply(this,arguments);var a=juic.$(this.id);a.tabIndex=-1;a.setAttribute("role","dialog");a.setAttribute("aria-labelledby",this.id+"pm2dialog-label");juic.$(this.id).focus()},close:function(){this.hide()},resize:function(){this.reposition();this.adjustDOM()},setPM2Option:function(a){this.setContent(a.component);this.setHeader(a.dialogTitle);this.setShowCloseIcon(a.isShowCloseButton)},
_setListenerObj:function(a){this.removeListenerObj();(this._listenerObj=a||null)&&this.addEventListener(this._listenerObj.getEventName(),this._listenerObj)},removeListenerObj:function(){this._listenerObj&&this._listenerObj.getEventName&&this.removeEventListener(this._listenerObj.getEventName(),this._listenerObj)},_renderContent:function(a,b,d){switch(b){case "header":a.push('\x3cspan tabIndex\x3d0 class\x3d"dialogMarkerAnchors" id\x3d"',this.id,'pm2Dialog-start" \x3e',MSGS.PERFORMANCE_PM2_DIALOG_START,
"\x3c/span\x3e",'\x3cspan id\x3d"',this.id,'pm2dialog-label"\x3e',juic.escapeHTML(this.getHeader()),"\x3c/span\x3e");break;case "footer":a.push('\x3cspan class\x3d"dialogMarkerAnchors" tabIndex\x3d0  id\x3d"',this.id,'pm2Dialog-end" \x3e',MSGS.PERFORMANCE_PM2_DIALOG_END,"\x3c/span\x3e")}this._super(a,b,d)},_handleKeydown:function(a){var b=a.target||a.srcElement,d=a.which||a.keyCode,c=juic.$(this.id+"pm2Dialog-start"),e=juic.$(this.id+"pm2Dialog-end"),f=!1;9===d?a.shiftKey||b!=e?a.shiftKey&&b==c&&
(f=!0,e.focus()):(f=!0,c.focus()):27==d&&(this.hide(),PM2DialogUtil.stopEvent(a));f&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}});PM2CalloutDialog.convertOpt=function(a){return{header:a.dialogTitle,content:a.component,buttonDefinitions:a.buttons,footer:"",showCloseIcon:isShowCloseButton}};PM2CalloutDialog.isIE=PM2Dialog.isIE;PM2CalloutDialog.me=new PM2CalloutDialog({originOptions:{pointerOffset:40}});
PM2CalloutDialog.show=function(a,b){PM2CalloutDialog.me.show(a,b);var d=PM2CalloutDialog.me;d.setPM2Option(a);d._setListenerObj(b);d.show(a.triggerElId)};PM2CalloutDialog.close=function(){PM2CalloutDialog.me.close()};PM2CalloutDialog.setComponent=function(a){PM2CalloutDialog.me.setComponent(a)};PM2CalloutDialog.hide=function(){PM2CalloutDialog.me.hide()};function PM2Loading(){this.register()}PM2Loading.prototype=function(){return set(new Component,{renderHtml:function(a){a.push('\x3cdiv class\x3d"PM2Loading"\x3e\x3cdiv class\x3d"loadingcontaindiv"\x3e\x3cdiv class\x3d"licondiv" style\x3d"margin:0px;"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e')}})}();