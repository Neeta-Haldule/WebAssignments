function MessageFormat(e){var b;(function(){function m(){switch(f){case 1:c.index=parseInt(a);a="";++f;break;case 2:c.type=a;a="";++f;break;case 3:c.style=a,a+=d}}var c,a="",k=e.length,f=0,h=!1,g,d,l=0;b=[];for(g=0;g<k;++g)if(d=e.charAt(g),0==f)"'"==d?g+1<k&&"'"==e.charAt(g+1)?(a+="'",++g):h=!h:"{"!=d||h?a+=d:(b[b.length]=a,a="",b[b.length]=c={},f=1);else if(h)a+=d,"'"==d&&(h=!1);else switch(d){case ",":m();break;case "{":++l;a+=d;break;case "}":0==l?(m(),f=0):(--l,a+=d);break;case "'":h=!0;default:a+=
d}if(f)throw"Unmatched braces in pattern";b[b.length]=a})();this.format=function(e){var c=[];c[c.length]=b[0];for(var a=1,k=b.length;a<k;a+=2)c[c.length]=e[b[a].index],c[c.length]=b[a+1];return c.join("")}}MessageFormat.format=function(e,b){return(new MessageFormat(e)).format(b)};