/*
 !! BEGIN /ui/juic/js/components/peopleNav/sfPeopleSelectDAO.js !!! !! BEGIN /ui/juic/js/components/sfNameFormatter.js !!! !! BEGIN /ui/juic/js/components/peopleNav/sfLazyLoadingPicture.js !!! !! BEGIN /ui/juic/js/components/peopleNav/sfNavigationDropDown.js !!! !! BEGIN /ui/juic/js/components/peopleNav/sfPeopleSelect.js !!!*/
function SFPeopleSelectDAO(){this.ajaxService=AjaxService.getMBeanInstance("peopleNavigationController");juic.assert(this.ajaxService,"Error loading People Navigation. Please check if peopleNavigationController ajax service is included in current page.")}
SFPeopleSelectDAO.prototype=function(){return set(new EventTarget,{loadHierarchy:function(a){var c={me:this,callback:function(b){c.me.dispatch("employeeHierarchyLoaded",{hierarchyData:b})},exceptionHandler:function(b){c.me.dispatch("failedLoad",{errObj:b})}};this.ajaxService.getEmployeesHierarchy(a,c)},getPermittedURL:function(a,c,b){var d={me:this,callback:function(b){d.me.dispatch("urlready",{url:b,userId:a})},exceptionHandler:function(b){d.me.dispatch("failedURLLoad",{errObj:b})}};this.ajaxService.getPermittedURL(a,
c,b,d)},findUser:function(a,c){var b={me:this,callback:function(d){b.me.dispatch("searchResultReady",{data:d,tokens:a,inactiveUsers:c})},exceptionHandler:function(a){b.me.dispatch("failedSearchLoad",{errObj:a})}};this.ajaxService.findUser(a,c,b)}})}();
var SFNameFormatter={formatters:{DEFAULT:function(a,c){var b=null!=a.firstName?a.firstName:"",d=null!=a.mi?a.mi:"",e=null!=a.lastName?a.lastName:"";a.isHaveMiddleNamePermission||(d="");return c(b)||c(d)||c(e)?(b=MSGS.get("User_Display_Name",b,d,e),b=b.trim(),b=b.replace(/\s{2,}/g," ")):""},FORMATTED_NAME:function(a,c){return a.formattedName}},format:function(a,c){var b=function(b){return!(!b||0===b.length||/^\s*$/.test(b))};if(!a)return"";"undefined"==typeof c&&(c=!0);a.isHaveMiddleNamePermission=
c;var d=this.formatters.DEFAULT;b(a.formattedName)&&(d=this.formatters.FORMATTED_NAME);return d(a,b)}};
(function(){var a={"012":[[0,1],[2]],"021":[[0],[2,1]],120:[[1,2],[0]],102:[[1,0],[2]],201:[[2],[0,1]],210:[[2],[1,0]]},c=function(b){for(var c=[],e=0,f=0;3>f;f++){var g=b.indexOf("{"+f+"}");0<=g&&e++;c.push({index:f,included:0<=g,formatIndex:g})}switch(e){case 0:return null;case 1:return[b];case 2:if(c[1].included)return[b];case 3:e=c.concat();e.sort(function(b,a){return b.included&&a.included?b.formatIndex<a.formatIndex?-1:1:b.included?-1:a.included?1:0});g="";for(f=0;3>f;f++)if(g+=e[f].index,e[f].included){for(var h=
f-1;0<=h&&!e[h].included;)h--;h=0>h?"^":"\\{"+e[h].index+"\\}[^\\s\\{]*";h+="(.*\\{"+e[f].index+"\\}";h=2==f?h+".*)$":h+"[^\\s\\{]*)";e[f].message=(new RegExp(h)).exec(b)[1]}b=a[g];e=[];for(f=0;f<b.length;f++){for(var g=b[f],h="",k=0;k<g.length;k++){var l=c[g[k]];l.included&&(h+=l.message)}e.push(h)}return e}}(MSGS.COMMON_User_Display_Name);SFNameFormatter.splitFullName=function(b){for(var a=[],e=0;e<c.length;e++){var f=sfMessageFormat.format(c[e],b.firstName||"",b.middleInitial||"",b.lastName||"");
/^\s*$/.exec(f)||a.push(f)}return a}})();(function(){var a=MSGS.COMMON_User_Display_Name.indexOf(MSGS.COMMON_First_Name),c=MSGS.COMMON_User_Display_Name.indexOf(MSGS.COMMON_Last_Name);SFNameFormatter.isFirstNameFirst=function(){return a<c}})();function SFLazyLoadingPicture(a,c,b,d){this.register();this.init(a,c,b,d)}SFLazyLoadingPicture.defaultPicture=IMAGES["/ui/uicore/img/silhouette.jpg"];SFLazyLoadingPicture.defaultDelay=1E3;
SFLazyLoadingPicture.prototype=function(){return set(new Component,{init:function(a,c,b,d){this.userId=a;this.directory=c;this.photoMod=c.photoMod;this.delay=b?b:SFLazyLoadingPicture.defaultDelay;this.isInteractive=d},renderHtml:function(a){var c=this.directory[this.userId],b="";c&&(b=EDUNameFormatter.format(c));this.isInteractive?a.push('\x3cimg  alt\x3d"',b,'" title\x3d"',b,'"  onmouseover\x3d"',this.fireCode("_handleMouseover"),'" onmouseout\x3d"',this.fireCode("_handleMouseout"),'" onclick\x3d"',
this.fireCode("_handleClick"),'" id\x3d"',this.id,'" class\x3d"photo" src\x3d"',SFLazyLoadingPicture.defaultPicture,'"/\x3e'):a.push('\x3cimg  alt\x3d"',b,'" title\x3d"',b,'"  id\x3d"',this.id,'" class\x3d"photo currentEmployee" src\x3d"',SFLazyLoadingPicture.defaultPicture,'"/\x3e');this._onRender()},_handleMouseover:function(){this._showHighlighted()},_handleMouseout:function(){this._hideHighlighted()},_handleClick:function(){this.dispatch("gotoProfile",{userId:this.userId})},_onRender:function(){var a=
this;this.loadId=setTimeout(function(){a.initLoading()},this.delay)},_showHighlighted:function(){juic.$(this.id).className+=" selectedEmployee"},_hideHighlighted:function(){juic.$(this.id).className=juic.$(this.id).className.replace(/\bselectedEmployee\b/,"")},initLoading:function(){if(juic.$(this.id)){var a;if("string"==typeof this.directory.photoSrc)a=this.directory.photoSrc;else{a=[];var c;c=this.photoMod?this.photoMod:SFPhoto.getPhotoMod(this.photoId,this.photoLastModified);a.push(SFPhoto.url({urlType:SFPhoto.URL_TYPE_EDU,
photoType:SFPhoto.PHOTO_TYPE.QUICK_CARD,userId:this.userId,mod:c}));a=a.join("")}juic.$(this.id).src=a}else this.loadId&&(clearTimeout(this.loadId),delete this.loadId)},navigateToProfile:function(){this.dispatch("gotoProfile",{userId:this.userId})},handleEvent:function(a){"action"!=a.type&&("gotoProfileNewPage"==a.type?this.dispatch("gotoProfileNewPage",{userId:a.userId}):"gotoProfile"==a.type&&this.dispatch("gotoProfile",{userId:a.userId}))}})}();var labelsMenuGroup={EMPFILE_EDU_NAV_GROUP_EMPLOYEE_RECORDS:MSGS.COMMON_PEOPLE_SELECT_EMPLOYEE_RECORDS};
function SFNavigationDropDown(a,c){this.register();this.init(a,c)}
SFNavigationDropDown.prototype=function(){return set(new Component,{init:function(a,c){this.intialLabel=a;this._domIdForLabel="label_"+this.id;this.sfList=new SFList("CheckBoxList");this.wrapper=new SFOptionsWrapper(this.sfList);this.wrapper.setType("moduleNavigation");this._popup=new SFContextPopup(this.wrapper,{originId:this.getDomIdForLabel(),offset:{vertical:0,horizontal:-9}});this._popup.addEventListener("clickedOutsidePopup",this,"_lostFocus");c?this.setNavList(c):this.setLoading();this._triangleIcon=
new SFTriangle({direction:"bottom",inherit:!0})},getDomIdForLabel:function(){return this._domIdForLabel},renderHtml:function(a){a.push('\x3ca href\x3d"Javascript:void(0);" id\x3d"',this.getDomIdForLabel(),'" class\x3d"label globalPlacematNavigationText" onclick\x3d"',this.fireCode("_showMenu"),'return false;" \x3e');this._renderContent(a);a.push("\x3c/a\x3e")},_renderContent:function(a){a.push(escapeHTML(this.intialLabel));a.push(this._triangleIcon)},changeInitialLabel:function(a){this.intialLabel=
this._getLabelFromId(a);a=juic.createRenderContext();this._renderContent(a);juic.$(this.getDomIdForLabel()).innerHTML=a.join("")},_getLabelFromId:function(a){for(var c=0;c<this.navItems.length;c++)for(var b=this.navItems[c],d=0;d<b.items.length;d++){var e=b.items[d];if(a==e.id)return e.label}},_isPopupOpen:function(){return this._popup&&this._popup.isShown()},_showMenu:function(){this._isPopupOpen()||(this._popup.show(),SFDOMEvent.addListener(window.document,"keydown",this._onWindowKeyDown,this))},
setNavList:function(a){if(a){this.navItems=a;this.navItemList=[];this.groups=[];this.cleanupNavItemList();this.sfList=new SFList("CheckBoxList");this.wrapper.setNumberOfColl(this.navItems.length);for(a=0;a<this.navItems.length;a++){var c=new SFList("CheckBoxList"),b=[],d=this.navItems[a],e=d.label;e&&(labelsMenuGroup[d.label]&&(e=MSGS[d.label]),e=new SFLink(e),e.setCss("groupHeader first"),this.navItemList.push(e),b.push(e));for(e=0;e<d.items.length;e++){var f=d.items[e],g=new SFLink(f.label,{clickParam:this._createItemRef(a,
e,f.id),onMouseOut:!0,onMouseOver:!0});g.setCss("globalMenuItem");window.isV2Enabled&&window.isMyBenefitAvailable&&0<=f.label.indexOf("(***$$#***)")?(g.setValue(f.label.replace(/\(\*\*\*\$\$\#\*\*\*\)/i,"")),g.addEventListener("click",this,"_openBenefit")):(0<=f.label.indexOf("(***$$#***)")&&g.setValue(f.label.replace(/\(\*\*\*\$\$\#\*\*\*\)/i,"")),g.addEventListener("click",this));this.navItemList.push(g);b.push(g)}c.add(b);this.groups.push(c)}this.sfList.add(this.groups);this.wrapper.setContent(this.sfList);
this._isPopupOpen()&&this.reRenderWrapperContent()}},_openBenefit:function(){window.open("https://www.benefitenroll.com","myBenefits")},setLoading:function(){var a=new SFLoading("",null,{isNewLoadingIndicator:!0,isSectionLoadingIndicator:!0});this.sfList.add(a);this.wrapper.setContent(this.sfList);this._isPopupOpen()&&this.reRenderWrapperContent()},reRenderWrapperContent:function(){this.wrapper.reRenderContent()},_lostFocus:function(){var a=this;setTimeout(function(){a._hideMenu()},0)},_hideMenu:function(){this._popup&&
this._popup.hide();SFDOMEvent.removeListener(window.document,"keydown",this._onWindowKeyDown,this)},_onWindowKeyDown:function(a){a=a||window.event;switch(SFDOMEvent.getKeyName(a)){case "ESCAPE":this._hideMenu(),SFDOMEvent.stopEvent(a)}},handleEvent:function(a){switch(a.type){case "click":var c={newViewId:a.param};c.externalURL=this._getExternalUrl(a.param);this._hideMenu();this.dispatch("actionMenuClicked",c)}},_createItemRef:function(a,c,b){var d=b;"CUSTOM"==b&&(d+="_"+a+"_"+c);return d},_getExternalUrl:function(a){for(var c=
0;c<this.navItems.length;c++)for(var b=this.navItems[c],d=0;d<b.items.length;d++){var e=b.items[d];if(a==this._createItemRef(c,d,e.id))return e.url}},postProcess:function(){},cleanupNavItemList:function(){for(var a=0;a<this.navItemList.length;a++)this.navItemList[a].cleanup();for(var a=0,c=this.groups.length;a<c;a++)this.groups[a].cleanup();this.sfList.cleanup()},cleanup:function(){this.cleanupNavItemList();this._popup.hide();this.unregister()}})}();
function SFOptionsWrapper(a,c){this.register();this.init(a,c)}
SFOptionsWrapper.prototype=function(){return set(new Component,{init:function(a){this.wrapped=a;this._type=""},setType:function(a){this._type=a},setNumberOfColl:function(a){this._numberOfCollClass=2==a?"eduModuleNavTwoColumn ":"eduModuleNavOneColumn "},renderHtml:function(a){a.push("\x3cdiv id\x3d'",this.id,"' class\x3d'module-nav eduViewNavigationDropDown globalRoundedCorners globalContainerHoverSansFocus ",this._numberOfCollClass,this._type);Util.browserInfo.ie&&9>Util.ieVersion()&&a.push(" edudropdownborder ");
a.push(" '\x3e");this.wrapped.renderHtml(a);a.push("\x3c/div\x3e")},setContent:function(a){this.wrapped=a},reRenderContent:function(){var a=[];this.wrapped.renderHtml(a);juic.$(this.id).innerHTML=a.join("")},setFixedHeight:function(a){}})}();function SFPeopleSelect(a,c,b){this.register();this.init(a,c,b)}
(function(){var a={dao:[juic.EventTarget,null]},c={dao:void 0};juic.extend(SFPeopleSelect,juic.Component,{init:function(b,d,e){juic.assert(b,"Error initializing People navigation. User information not specified");d=d?d:{};d.type||(d.type=window.PEOPLE_NAVIGATION_VIEW_TYPE?window.PEOPLE_NAVIGATION_VIEW_TYPE:"scorecard");d.id||(d.id=window.PEOPLE_NAVIGATION_VIEW_VIEWID);e=new juic.Config(e,c,a);this.userInfo=b;this.viewInfo=d;this.config=e;this._peopleData=null;this.setKeywordTO={};this._searchStore=
{};this.createDAO(e.dao);this.createDropdown(e.useGenericGroups);this._loaded=!1},_createDAO:function(){return new SFPeopleSelectDAO},createDAO:function(b){b=b||this._createDAO();b.addEventListener("employeeHierarchyLoaded",this);b.addEventListener("failedLoad",this);b.addEventListener("urlready",this);b.addEventListener("failedURLLoad",this);b.addEventListener("searchResultReady",this);b.addEventListener("failedSearchLoad",this);this.peopleNavigationDAO=b},renderHtml:function(b){this.navigationDropDown.renderHtml(b)},
_createPeopleSelectDropDown:function(b,a){return new SFPeopleSelectDropDown(b,a)},createDropdown:function(b){b=this._createPeopleSelectDropDown(this.viewInfo,{useGenericGroups:b});b.addEventListener("personSelected",this);b.addEventListener("showMenu",this);b.addEventListener("setSearchKeyword",this);this.navigationDropDown=b},setPeople:function(b){this.navigationDropDown.setPeopleLinks(b)},setSearchResult:function(b,a){this.navigationDropDown.setSearchLinks(b,a)},_cleanSearchresultsFromNavigationDropDown:function(){this.navigationDropDown._cleanSearchResults()},
showNoAccessDialog:function(){SFMessageBox.alert(new SFProfileAccessDenied,{title:MSGS.COMMON_PEOPLE_SELECT_NO_ACCESS_TITLE,width:320})},hide:function(){},showSearchAndUserList:function(b){this.navigationDropDown.showMenu(b)},handleEvent:function(b){if("personSelected"==b.type)void 0!=b.userId&&null!=b.userId||alert("Error SFPeopleSelect: Invalid userid!!"),this.viewInfo.uriNavigate?this._getAuthorizedUrl(b.userId):this.dispatchEvent(b);else if("showMenu"==b.type)this._loaded||(this._loaded=!0,this.loadPeopleNavigation());
else if("employeeHierarchyLoaded"==b.type)this._peopleData=b.hierarchyData,this.setPeople(b.hierarchyData);else if("urlready"==b.type)b.url?(this.dispatchEvent(b),this._applyUrl(b.url)):this.showNoAccessDialog();else if("setSearchKeyword"==b.type){this.setKeywordTO&&(clearTimeout(this.setKeywordTO),delete this.setKeywordTO);var a=this,c=this._getSearchStoreKey(b);this._searchStore[c]?this.setSearchResult(this._searchStore[c],b.tokens):""==b.tokens?(this._cleanSearchresultsFromNavigationDropDown(),
this.setPeople(this._peopleData)):this.setKeywordTO=setTimeout(function(){a.peopleNavigationDAO.findUser(b.tokens,b.inactiveUsers)},400)}else"searchResultReady"==b.type&&(c=this._getSearchStoreKey(b),this._searchStore[c]=b.data,this.setSearchResult(b.data,b.tokens))},_getSearchStoreKey:function(a){var b=a.tokens;a.inactiveUsers&&(b+="_inactive");return b},cleanup:function(){delete this._searchStore;this.navigationDropDown.cleanup();this._super()},_getAuthorizedUrl:function(a){this.peopleNavigationDAO.getPermittedURL(a,
this.viewInfo.type,this.viewInfo.id)},loadPeopleNavigation:function(){this.peopleNavigationDAO.loadHierarchy(this.userInfo.userId)},_applyUrl:function(a){Util.gotoURL(a)},postProcess:function(){}})})();function SFFindUser(){this.register();this.init()}
(function(){var a=MSGS.COMMON_PEOPLE_SELECT_INACTIVE_EMPLOYEE_SEARCH;juic.extend(SFFindUser,juic.Component,{init:function(){this._inactiveEmployeeSearchrendered=this.inactiveEmployeeSearchEnabled=this._focused=!1;this.minSearchKeyLength=2;this._value="";this._inactiveCheckSelected=!1},renderHtml:function(a){var b=this.isInactiveEmployeeSearchEnabled(),c="invalidUserCheck"+(b?" inactiveUserSearchEnabled":"");a.push('\x3cdiv class\x3d"sfFinduser"\x3e');this._renderFindUserInput(a);a.push('\x3cdiv id\x3d"',
this._getCheckContainerId(),'" class\x3d"',c,'"\x3e');b&&this._renderInactiveCheckBox(a);a.push("\x3c/div\x3e");a.push("\x3c/div\x3e")},_renderFindUserInput:function(a){a.push('\x3cdiv class\x3d"sfFinduserField ');Util.browserInfo.ie&&9>Util.ieVersion()&&a.push(" sfdropdownborder ");a.push('"\x3e\x3cdiv class\x3d"sfFinduserFieldIcon"\x3e');a.push('\x3cinput id\x3d"',this.id,'_input" type\x3d"text" onkeyup\x3d"',this.fireCode("_onKeyUp"),'" value\x3d"',this._value,'"oninput\x3d"',this.fireCode("_onInput"),
'" aria-describedby\x3d"',this.id,'_desc" aria-label\x3d"',MSGS.COMMON_Search_for_people,'" aria-autocomplete\x3d"list" /\x3e');a.push('\x3cdiv class\x3d"hiddenAriaContent" id\x3d"',this.id,'_desc"\x3e',MSGS.get("COMMON_PEOPLE_SELECT_SEARCH_PEOPLE",this.minSearchKeyLength),"\x3c/div\x3e");a.push("\x3c/div\x3e\x3c/div\x3e")},setAriaControlsId:function(a){var b=juic.$(this.id+"_input");b&&b.setAttribute("aria-controls",a)},setActiveDescendantId:function(a){var b=juic.$(this.id+"_input");b&&b.setAttribute("aria-activedescendant",
a)},_renderInactiveCheckBox:function(c){c.push('\x3cdiv class\x3d"',"sfFindUserInactiveSearchBox",'"\x3e\x3cspan class\x3d"globalFloatLeft ',"sfFindUserInactiveSearchCheckBox",'"\x3e\x3cinput id\x3d"',this.id,'_inactiveSearch" type\x3d"checkbox" ');this._inactiveCheckSelected&&c.push(' checked\x3d"checked" ');c.push(' /\x3e\x3c/span\x3e\x3clabel for\x3d"',this.id,'_inactiveSearch" class\x3d"globalFloatLeft ',"sfFindUserInactiveSearchText",'" title\x3d"',a,'"\x3e',a,"\x3c/label\x3e");c.push("\x3c/div\x3e");
(c=juic.$(this._getCheckContainerId()))&&Util.addClass(c,"inactiveUserSearchEnabled")},setFieldFocus:function(){var a=juic.$(this.id+"_input");if(a){a.focus();var b=a.value;a.value="";a.value=b}},isInactiveEmployeeSearchEnabled:function(){return this.inactiveEmployeeSearchEnabled},isInactiveUserSearchSelected:function(){var a=!1;this.isInactiveEmployeeSearchEnabled()&&(a=juic.$(this.id+"_inactiveSearch").checked?!0:!1);return a},setInactiveEmployeeSearchEnabled:function(a){var b=[],c=!1,e=juic.$(this._getCheckContainerId());
!1===this.inactiveEmployeeSearchEnabled&&!0===a?(this._renderInactiveCheckBox(b),c=!0):!0===this.inactiveEmployeeSearchEnabled&&!1===a&&(c=!0);c&&e&&(e.innerHTML=b.join(""));this.inactiveEmployeeSearchEnabled=!!a},_onKeyUp:function(a){switch(SFDOMEvent.getKeyName(a||window.event)){case "ALPHA":case "NUMERIC":case "SPACEBAR":case "BACKSPACE":case "OTHER":this._onInput()}},_onInput:function(){var a=juic.$(this.id+"_input").value;if((this._value=a)&&a.length>=this.minSearchKeyLength){var b=this.isInactiveUserSearchSelected();
this._inactiveCheckSelected=b;this.dispatch("setSearchKeyword",{tokens:a,inactiveUsers:b})}else a||(this._inactiveCheckSelected=!1,this.dispatch("setSearchKeyword",{tokens:"",inactiveUsers:this.isInactiveUserSearchSelected()}))},_getCheckContainerId:function(){return this.id+"_checkContainer"},cleanup:function(){this._super()}})})();function SFPeopleSelectPopupContainer(a,c){this.register();this.init(a,c)}
(function(){juic.extend(SFPeopleSelectPopupContainer,SFAbstractAdjustableHeight,{init:function(a,c){assert(a,"Error while creating people navigation popup container. Wrong Finduser component supplied");assert(c,"Error while creating people navigation popup container. Wrong People Links component supplied");this.findUserComponent=a;this.linksArray=c},renderHtml:function(a){var c=AccessibilityPrefs.getLowVisionType()+"LowVision";a.push('\x3cdiv id\x3d"',this.id,'" class\x3d"module-nav sfPeopleSelect globalRoundedCorners globalContainerHoverSansFocus ',
c,'" \x3e');this.findUserComponent.renderHtml(a);a.push('\x3cdiv id\x3d"',this.id,'_scrollDiv" \x3e');a.push('\x3cul class\x3d"sfPeopleSelectPopupContainer ');a.push(' " id\x3d"',this.getListDomId(),'" role\x3d"listbox" \x3e');for(c=0;c<this.linksArray.length;c++)a.push('\x3cli id\x3d"',this.getListItemDomId(c),'" role\x3d"option"\x3e'),this._renderLink(c,a),a.push("\x3c/li\x3e");a.push("\x3c/ul\x3e");a.push("\x3c/div\x3e");a.push("\x3c/div\x3e");if(a.addAfterRenderListener)a.addAfterRenderListener(this,
"_afterRender");else{var b=this;setTimeout(function(){b._afterRender()},0)}},_afterRender:function(a){this.findUserComponent&&this.findUserComponent.setAriaControlsId(this.getListDomId())},setWidth:function(){var a=juic.$(this.id);if(a){a.style.width="auto";var c=juic.$(this.getListDomId()).offsetWidth;a.style.width=(220>c?220:c)+"px"}},getWidth:function(){var a=juic.$(this.id);return a&&a.style?a.style.width:""},setHeight:function(a){a=Math.max(100,a-100)+"px";var c=juic.$(this.id+"_scrollDiv");
this.setWidth();c&&c.style.height!=a&&(SFDom.addClass(c,"sfPeopleSelectFixedHeight"),c.style.height=a,this.dispatch("changeDimensions"))},scrollTo:function(a){var c=juic.$(this.id+"_scrollDiv");if(SFDom.hasClass(c,"sfPeopleSelectFixedHeight")){var b=juic.$(a.id),d=SFDom.getY(c),e=SFDom.getY(b);a=e-d;b=e+b.offsetHeight-d-c.offsetHeight;if(0>a||0<b)c.scrollTop+=0>a?a:b}},_renderLink:function(a,c){this.linksArray[a].renderHtml(c)},reRenderLinks:function(){var a=juic.$(this.getListDomId());if(a){for(;1<=
a.children.length;)a.removeChild(a.lastChild);for(var c=0;c<this.linksArray.length;c++){var b=a.appendChild(document.createElement("li"));b.setAttribute("id",this.getListItemDomId(c));b.setAttribute("role","option");b=[];this._renderLink(c,b);a.children[c].innerHTML=b.join("")}}if(a=juic.$(this.id+"_scrollDiv"))SFDom.removeClass(a,"sfPeopleSelectFixedHeight"),a.style.height="auto",this.dispatch("changeDimensions")},setLinks:function(a){this.linksArray=a},setSelectedIndex:function(a){this.findUserComponent&&
this.findUserComponent.setActiveDescendantId(-1<a&&a<this.linksArray.length?this.getListItemDomId(a):"")},getListDomId:function(){return this.id+"_peoplecontainer"},getListItemDomId:function(a){return this.getListDomId()+"_li_"+a},cleanup:function(){this.findUserComponent&&"function"==typeof this.findUserComponent.cleanup&&this.findUserComponent.cleanup();for(var a=0;a<this.linksArray.length;a++)"finction"==typeof this.linksArray[a].cleanup&&this.linksArray[a].cleanup();this._super()}})})();
function SFPeopleSelectDropDown(a){this._super(this,a)}
(function(){var a={};a.managers=MSGS.Managers;a.peers=MSGS.COMMON_PEOPLE_SELECT_PEERS;a.reports=MSGS.COMMON_PEOPLE_SELECT_DIRECT_REPORTS;var c=["managers","peers","reports"];juic.extend(SFPeopleSelectDropDown,SFNavigationDropDown,{init:function(a){this.inactiveEmployeeSearchEnabled=a.inactiveEmployeeSearchEnabled?!0:!1;this._isInactiveSearchEnabled=this.isPhotoDisabled=!1;this._isHaveMiddleNamePermission=!0;this._createPeoplePopup()},_createFindUser:function(){return new SFFindUser},_createPopupContainer:function(a,
c){return new SFPeopleSelectPopupContainer(a,c)},_createPopup:function(a,c){return new SFContextPopup(a,c)},_createLoading:function(){return new SFLoading("",null,{isNewLoadingIndicator:!0,isSectionLoadingIndicator:!0})},_createEmployeePhotoNameOptions:function(a,c){return new SFEmployeePhotoNameOption(a,c)},_createPeoplePopup:function(){this._findUser=this._createFindUser();this._findUser.addEventListener("setSearchKeyword",this);this._links||(this._links=[this._getLoading()]);this._container=this._createPopupContainer(this._findUser,
this._links);this._container.addEventListener("focusOut",this,"_hideMenu");var a={originId:this.id,offset:{vertical:1,horizontal:-9}};Util.isRTL()&&(a.offset={vertical:1,horizontal:11});this._popup=this._createPopup(this._container,a);this._popup.addEventListener("clickedOutsidePopup",this,"_hideMenu");this._popup.addEventListener("focusOutside",this,"_hideMenu")},_getLoading:function(){return this._createLoading()},setInactiveSearchEnabled:function(a){this._isInactiveSearchEnabled=a;this._findUser.setInactiveEmployeeSearchEnabled(this._isInactiveSearchEnabled)},
setPhotoDisabled:function(a){this.isPhotoDisabled=a},setHaveMiddleNamePermission:function(a){this._isHaveMiddleNamePermission=a},setIdToPhotoModMap:function(a){this._idToPhotoModMap=a?a:null},setPeopleLinks:function(b){this._data=b;this.setPhotoDisabled(b.photoDisabled);this.setInactiveSearchEnabled(b.inactiveSearchEnabled);this.setHaveMiddleNamePermission(b.haveMiddleNamePermission);this.setIdToPhotoModMap(b.idToPhotoModMap);b=[];this._resetSelectList();var d=this._data.groups||c;if(this._data)for(var e=
0,f=d.length;e<f;e++){var g=d[e];this._data[g]&&this._getPeopleNavGroupItems(b,{groupName:g,groupTitle:this._data[g].title||a[g],groupHeaderCss:"groupHeader first"})}this._links=b;this._isPopupOpen()&&(this.renderLinks(),this._popup.reposition(),this._container.setWidth())},setSearchLinks:function(a,c){this._resetSelectList();a=a?a:{};this._searchTokens=c||"";var b=[];a.result&&this._getNavLink(a.result,b);this._links=b;this.renderLinks();this._popup.reposition();this._container.setWidth()},_resetSelectList:function(){this._selectableItems=
[];this._selectedIndex=-1;this._container&&this._container.setSelectedIndex(this._selectedIndex)},_cleanSearchResults:function(){this._links=[];this._searchTokens=""},moveFocusUp:function(){0<this._selectedIndex&&this.focusTo(this._selectedIndex-1)},moveFocusDown:function(){this._selectedIndex<this._selectableItems.length-1&&this.focusTo(this._selectedIndex+1)},focusTo:function(a){0<=this._selectedIndex&&this._selectedIndex<this._selectableItems.length&&this._selectableItems[this._selectedIndex].setFocus(!1);
this._selectedIndex=a;a=this._selectableItems[this._selectedIndex];a.setFocus(!0);this._container.scrollTo(a);this._container.setSelectedIndex(this._selectedIndex);SFDom.setFocus(a.id+"_link")},selectFocus:function(){0<=this._selectedIndex&&this._selectedIndex<this._selectableItems.length&&this._selectableItems[this._selectedIndex].selectUser()},renderLinks:function(){this._container.setLinks(this._links);this._container.reRenderLinks()},_setPhotoModToEmployeePhotoInfo:function(a){var b=this._idToPhotoModMap;
b&&b[a.userId]&&(a.photoMod=b[a.userId])},_getNavLink:function(a,c){if(0<a.length)for(var b=0;b<a.length;b++){var d=a[b];this._setPhotoModToEmployeePhotoInfo(d);d=this._createEmployeePhotoNameOptions(d,{photoDisabled:this.isPhotoDisabled,highlight:this._searchTokens,isHaveMiddleNamePermission:this._isHaveMiddleNamePermission});d.addEventListener("personSelected",this,"dispatchEvent");d.addEventListener("focus",this,"_focusFindUser");c.push(d);this._selectableItems.length==this._selectedIndex&&d.setFocus(!0);
this._selectableItems.push(d)}else d=new SFSpan("\x26#160;"),d._escapeHTML=!1,c.push(d)},_getPeopleNavGroupItems:function(a,c){c=c?c:{};var b=c.groupName,d=c.groupHeaderCss,g=c.isLastGroup;if(b){var b=this._data[b],h=new SFSpan(c.groupTitle);h.setCSSClass(d);a.push(h);this._getNavLink(b,a);g&&1<a.length&&"function"==typeof a[a.length-1].setLast&&a[a.length-1].setLast()}},showMenu:function(a){var b=juic.$(this.id);b&&(b.className="floatleft SFPeopleSelectIcon toggle");this._popup.show(a);SFDOMEvent.addListener(window.document,
"keydown",this._onWindowKeyDown,this);var c=this,f=null;clearInterval(this._intervalId);this._intervalId=setInterval(function(){var b=SFDom.getXY(a);f=f||b;b[0]==f[0]&&b[1]==f[1]||c._hideMenu()},500);c=this;setTimeout(function(){c._findUser&&(c._focusFindUser(),c._container.setWidth())},200);this.dispatch("showMenu")},setRefocusId:function(a){this._popup.setRefocusId(a)},_focusFindUser:function(){this._findUser.setFieldFocus()},_hideMenu:function(){this._popup&&this._popup.hide();SFDOMEvent.removeListener(window.document,
"keydown",this._onWindowKeyDown,this);var a=juic.$(this.id);a&&(a.className="floatleft SFPeopleSelectIcon");clearInterval(this._intervalId)},_isPopupOpen:function(){return this._popup&&this._popup.isShown()},_onWindowKeyDown:function(a){a=a||window.event;switch(SFDOMEvent.getKeyName(a)){case "ESCAPE":case "TAB":this._hideMenu();SFDOMEvent.stopEvent(a);break;case "ARROWUP":this.moveFocusUp();SFDOMEvent.stopEvent(a);break;case "ARROWDOWN":this.moveFocusDown();SFDOMEvent.stopEvent(a);break;case "RETURN":this.selectFocus(),
SFDOMEvent.stopEvent(a)}},_isFindUserFocused:function(){return this._findUser.isFocused()},renderHtml:function(a){a.push('\x3cdiv class\x3d"floatleft SFPeopleSelectIcon" id\x3d"',this.id,'"\x3e\x3ca href\x3d"#" onclick\x3d"',this.fireCode("showMenu"),'; return false;" \x3e\x26#160;\x3c/a\x3e\x3c/div\x3e')},handleEvent:function(a){switch(a.type){case "setSearchKeyword":this.dispatch("setSearchKeyword",{tokens:a.tokens,inactiveUsers:a.inactiveUsers})}},cleanup:function(){this._popup&&(this._popup.hide(),
this._popup.cleanup());this.unregister()}})})();function SFEmployeePhotoNameOption(a,c){this.register();this.init(a,c)}
(function(){juic.extend(SFEmployeePhotoNameOption,juic.Component,{init:function(a,c){this.userId=a.userId;(this._photoDisabled=c.photoDisabled)||this._createPicture(a);this._fullName=this._formattedFN=Util.escapeHTML(this._getNameFormatter(a,c.isHaveMiddleNamePermission));this._inactive=a.inactive||!1;(this._highlight=c.highlight)&&this._formattedFN&&this._highlightNameForSearch()},_getNameFormatter:function(a,c){return SFNameFormatter.format(a,c)},_createPicture:function(a){this.photo=new SFLazyLoadingPicture(this.userId,
a,0,!1)},setLast:function(){this._isLast=!0},renderHtml:function(a){a.push('\x3cdiv class\x3d"sfPhotoNameOption ');this._inactive&&a.push(" sfPhotoNameOptionDisabled");a.push('" id\x3d"',this.id,'" \x3e');a.push('\x3ca id\x3d"',this.id,'_link" href\x3d"javascript:void(0);" class\x3d"link globalMenuItem ');this._isLast&&a.push(" last");a.push('" onclick\x3d"',this.fireCode("_click"),';return false;" onfocus\x3d"',this.fireCode("_focusUser"),'" \x3e');this._photoDisabled||(this.photo.renderHtml(a),
a.push("\x26#160;\x26#160;"));a.push('\x3cspan class\x3d"sfPeopleSelectLabel"\x3e',this._formattedFN,"\x3c/span\x3e\x3c/a\x3e");a.push("\x3c/div\x3e")},handleEvent:function(a){},setFocus:function(a){this._focus=a;var c=juic.$(this.id+"_link");if(c)SFDom[a?"addClass":"removeClass"](c,"fieldFocus")},selectUser:function(){this._click()},_click:function(){this.dispatch("personSelected",{userId:this.userId,fullName:this._fullName})},_focusUser:function(){var a=this;setTimeout(function(){a.dispatch("focus")},
0)},cleanup:function(){this.unregister()},_highlightNameForSearch:function(){var a=this._formattedFN,c=Util.escapeHTML(this._highlight),b=c.indexOf(",");if(-1!=b){var d=c.substring(0,b);this._formattedFN=this._replaceMatchWithHighlightMarkup(a,d.trim());a=c.substring(b+1);this._formattedFN=this._replaceMatchWithHighlightMarkup(this._formattedFN,a.trim())}else this._formattedFN=this._replaceMatchWithHighlightMarkup(a,c)},_replaceMatchWithHighlightMarkup:function(a,c){var b=a||"";c&&a&&(b=new RegExp(RegExp.escape(c),
"i"),b=a.replace(b,function(a){return["\x3cstrong\x3e",a,"\x3c/strong\x3e"].join("")}));return b}})})();function SFProfileAccessDenied(){this.register()}(function(){juic.extend(SFProfileAccessDenied,juic.Component,{renderHtml:function(a){a.push("\x3cdiv class\x3d'accessdeniedBox'\x3e"+MSGS.COMMON_PEOPLE_SELECT_NO_ACCESS+"\x3c/div\x3e")}})})();