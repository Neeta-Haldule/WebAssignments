"undefined"==typeof PMFormInputFactory&&(window.PMFormInputFactory=function(){return set(new EventTarget,{genInputCtrl:function(a){var b;switch(a.getInputType()){case "input":switch(a.getMetas().type){case "text":b=new PMInput(a.getName(),a.getValue(),a.getMetas().readonly,{size:a.getMetas().size});break;case "checkbox":b=new PMCheckBox(a.getName(),a.getLabel(),a.getValue(),a.getMetas().checked,a.getMetas().readonly,a.getMetas().required);break;case "hidden":a.getMetas().readonly||(b=new SFHiddenInput(a.getValue(),
a.getName()))}break;case "RTE":b=new PMTextArea(a.getName(),a.getValue(),a.getMetas().readonly,{spellCheck:a.getMetas().spellCheck,legalScan:a.getMetas().legalScan,waca:a.getMetas().waca,maxChars:a.getMetas().maxChars,label:a.getLabel()});break;case "selector":b=new PMComboList(a.getName(),a.getValue(),a.getMetas().readonly,{items:a.getMetas().items});break;case "date":b=new PMDate(a.getName(),a.getValue(),a.getMetas().readonly,a.getMetas().ariaLabel)}return b},genLabel:function(a,b,c){return new PMLabel(a,
b,c)}})}());function PMInputEle(a,b,c,d,e){this.setLabel(a);this.setName(b);this.setValue(c);this.setInputType(d);this.setMetas(e)}
PMInputEle.prototype=function(){return{setLabel:function(a){this._label=a},getLabel:function(){return this._label},setName:function(a){this._name=a},getName:function(){return this._name},setValue:function(a){this._value=a},getValue:function(){return this._value},setInputType:function(a){this._inputType=a},getInputType:function(){return this._inputType},setMetas:function(a){this._metas=a},getMetas:function(){return this._metas}}}();
function PMLabel(a,b,c){this.register();this.label=a;this.forId=b?b:"";this.options=c?c:{};this.cssClass=this.options.cssClass?this.options.cssClass:""}
PMLabel.prototype=function(){return set(new Component,{setClass:function(a){this.cssClass=a;juic.$(this.id)&&SFDom.addClass(this.id,a)},destory:function(){this.unregister()},renderHtml:function(a){a.push('\x3clabel  id\x3d"',this.id,'" class\x3d"',this.cssClass,'" for\x3d"',this.forId,'"\x3e');this.options.required&&(a.push('\x3cspan title\x3d"',MSGS.COMMON_Required,'" class\x3d"requiredMark"\x3e'),a.push("* "),a.push("\x3c/span\x3e"));a.push(escapeHTML(this.label));a.push("\x3c/label\x3e")}})}();
function PMCheckBox(a,b,c,d,e,f){this.register();this.init(a,b,c,d,e,f)}
(function(){extend(PMCheckBox,Component,{init:function(a,b,c,d,e,f){this.value=c?c:" ";this.name=a;this.readonly=e;this.checked=d;this._checkbox=new SFCheckBoxInput(this.value,f?'\x3cspan title\x3d"'+MSGS.COMMON_Required+'" class\x3d"requiredMark"\x3e* \x3c/span\x3e'+b:b,d,!this.readonly,"",!1,"",!0);this._checkbox.addEventListener("change",this)},isChecked:function(){return this._checkbox.isChecked()},getValue:function(){return this._checkbox.isChecked()?"checked":""},getCheckBoxValue:function(){return this._checkbox.getValue()},
getName:function(){return this.name},isReadOnly:function(){return this.readonly},handleEvent:function(a){switch(a.type){case "change":a.checked?juic.$(this.name).removeAttribute("disabled"):juic.$(this.name).setAttribute("disabled","disabled"),this.dispatch("change")}},renderHtml:function(a){a.push('\x3cspan id\x3d"',this.id,'"\x3e');this._checkbox.renderHtml(a);this.readonly||(a.push('\x3cinput type\x3d"hidden" id\x3d"',juic.escapeHTML(this.name),'" name\x3d"',juic.escapeHTML(this.name),'" value\x3d"',
juic.escapeHTML(this.value),'"'),this.checked||a.push(' disabled\x3d"disabled"'),a.push("\x3e"),a.push('\x3cinput type\x3d"hidden" name\x3d"',juic.escapeHTML(this.name),'_x" value\x3d"1"\x3e'));a.push("\x3c/span\x3e")}})})();function PMTextArea(a,b,c,d){this.register();this.init(a,b,c,d)}
(function(){extend(PMTextArea,juic.Component,{init:function(a,b,c,d){this.name=a;this.value=b;this.readonly=c;this.config=d;if(!this.readonly)if(a=this.config.maxChars,formConfig.rte){if(0<a&&100>a)a=100;else if(4E3<a||0>a)a=4E3;this.rte=new PM2RteWrap(b,{hideWaca:!0,hideSpellCheck:d.spellCheck?!1:!0,hideLegalScan:d.legalScan?!1:!0,wacaEnabled:!!d.waca,maxChars:a,eleId:this.name,label:d.label});this.rte.addEventListener("change",this);this.rte.addEventListener("blur",this);d.waca&&this.rte.addEventListener("openWritingAssistant",
this)}else 0>a&&(a=4E3),this.rte=new PM2PlainTextWrap(b,{eleId:this.name,maxLength:a,rows:3,width:"100%;"}),this.rte.addEventListener("change",this),this.rte.addEventListener("blur",this)},handleEvent:function(a){switch(a.type){case "change":this.dispatch("change");PMUSaveUtils.autoSaveForm();break;case "blur":this.dispatch("blur");break;case "openWritingAssistant":this.dispatch("openWritingAssistant",{name:this.name,buttonId:a.target.getWACAButtonId()})}},bindProperty:function(a,b){this.rte&&this.rte.bindProperty(a,
b)},getValue:function(){return this.rte.getValue()},setValue:function(a){this.rte.setValue(a)},isReadOnly:function(){return this.readonly},renderHtml:function(a){this.readonly?formConfig.rte?a.push('\x3cdiv class\x3d"nrte_content"\x3e',this.value,"\x3c/div\x3e"):formConfig.unEscapePlainText?a.push('\x3cdiv class\x3d"nrte_content"\x3e',this.value,"\x3c/div\x3e"):a.push('\x3cdiv class\x3d"nrte_content"\x3e',this.value.replace(/(?:\r\n|\r|\n)/g,"\x3cbr/\x3e"),"\x3c/div\x3e"):(this.rte.getWACAButton&&
this.rte.getWACAButton()&&(a.push('\x3cdiv class\x3d"wacaButton"\x3e'),this.rte.getWACAButton().renderHtml(a),a.push("\x3c/div\x3e")),this.rte.renderHtml(a))},getContentId:function(){return this.rte&&this.rte instanceof PM2RteWrap?this.rte.getContentId():this.rte&&this.rte instanceof PM2PlainTextWrap?this.name:""}})})();function PMDate(a,b,c,d){this.register();this.init(a,b,c,d)}
(function(){extend(PMDate,Component,{init:function(a,b,c,d){this.name=a;this.value=b;this.readonly=c;this.readonly||(this.date=new SFDatePicker(b),this.date.addEventListener("change",this),d&&this.date.setAriaLabel(d))},renderHtml:function(a){this.readonly?a.push(juic.escapeHTML(this.value)):(this.date.renderHtml(a),a.push('\x3cinput type\x3d"hidden" id\x3d"',juic.escapeHTML(this.name),'" name\x3d"',juic.escapeHTML(this.name),'" value\x3d"',juic.escapeHTML(this.value),'"/\x3e'))},getName:function(){return this.name},
isReadOnly:function(){return this.readonly},getValue:function(){return this.readonly?this.value:this.date.getValue()},getInputDomId:function(){return this.readonly?"":this.name},handleEvent:function(a){switch(a.type){case "change":juic.$(this.name).value=a.target.getValueLocalFormat(),this.dispatch("change")}}})})();function PMInput(a,b,c,d){this.register();this.init(a,b,c,d)}
(function(){extend(PMInput,Component,{init:function(a,b,c,d){this.name=a;this.value=b;this.readonly=c;this.config=d},renderHtml:function(a){this.readonly?a.push(this.value):(a.push('\x3cinput type\x3d"text"  id\x3d"',juic.escapeHTML(this.name),'" name\x3d"',juic.escapeHTML(this.name),'" value\x3d"',juic.escapeHTML(this.value),'" ','onkeyup\x3d"',this.fireCode("_keyup"),'" ','onblur\x3d"',this.fireCode("_blur"),'" '),this.config&&this.config.size&&a.push(' size\x3d"',juic.escapeHTML(this.config.size),
'"'),a.push(" /\x3e"))},_keyup:function(){this.dispatch("change")},_blur:function(){this.dispatch("blur")},getName:function(){return this.name},getValue:function(){return $(this.name).value},isReadOnly:function(){return this.readonly},getInputDomId:function(){return this.readonly?"":this.name},setValue:function(){}})})();function PMComboList(a,b,c,d){this.register();this.init(a,b,c,d)}
(function(){extend(PMComboList,Component,{init:function(a,b,c,d){this.name=a;this.value=b;this.readonly=c;this.config=d;if(this.readonly){if(this.selectedLabel="",this.config&&this.config.items)for(a=0,b=this.config.items.length;a<b;a++)if(c=this.config.items[a],this.value==c.getValue()){this.selectedLabel=c.toString();break}}else this.comboList=new SFDropDown(this.config.items),this.comboList.setSelectedKey(this.value),this.comboList.addEventListener("change",this)},renderHtml:function(a){this.readonly?
a.push(juic.escapeHTML(this.selectedLabel)):(this.comboList.renderHtml(a),a.push('\x3cinput type\x3d"hidden" id\x3d"',juic.escapeHTML(this.name),'" name\x3d"',juic.escapeHTML(this.name),'" value\x3d"',juic.escapeHTML(this.value),'"\x3e'))},getName:function(){return this.name},getValue:function(){return this.comboList.getValue()},isReadOnly:function(){return this.readonly},handleEvent:function(a){switch(a.type){case "change":this.updateHiddenInput(this.comboList.getValue()),this.dispatch("change")}},
updateHiddenInput:function(a){$(this.name).value=a},getInputDomId:function(){return this.readonly?"":this.comboList.getReferenceId()}})})();