function PM2Rating(a,b,c,g,d,e,h,f){this.register();this._eleId=a;this._ratedValue=b;this._sourceRating=f?f:b;this._ratedText=c;this._options=g;this._type=d?d.toUpperCase():d;this._component=null;this._showValue=e;this._options.showValue=e;this._expRating=h;this.init()}
(function(){extend(PM2Rating,BaseControl,{init:function(){if(!this._type||"DROPDOWN"!=this._type){var a=this._options&&this._options.ratingValues;a&&(7<a.length?this._type="DROPDOWN":this._type||(this._type="STAR"))}if(void 0==this._showValue||null==this._showValue||"null"==this._showValue)this._showValue=!0;this._buildComponent()},applyEMOS:function(a,b){this._component.applyEMOS(a,b)},resetEMOS:function(){this._component.resetEMOS()},_buildComponent:function(){this._showValue?"DROPDOWN"==this._type?
this._component=new TalentRatingDropdown(this._eleId,this._ratedValue,this._ratedText,this._options,!0):(this._component=new TalentFiveRating(this._ratedValue,this._options,this._type,this._sourceRating),this._renderHidden=this._options&&!this._options.readOnly):this._component=new TalentRatingDropdown(this._eleId,this._ratedValue,this._ratedText,this._options,!1);this._component.addEventListener("rateSelected",this);this._component.addEventListener("emosApplied",this)},setHiddenInput:function(a){var b=
$(this._eleId);b&&(b.value=a);PMUSaveUtils.autoSaveForm()},renderHtml:function(a){a.push('\x3cdiv class\x3d"pm2RatingContainer"\x3e');a.push('\x3cdiv id\x3d"',this.id,'"\x3e');this._component.renderHtml(a);void 0!=this._expRating&&a.push('\x3cdiv class\x3d"globalPortletDimmedTextColor expRating"\x3e',MSGS.Expected_Rating," ",juic.escapeHTML(this._expRating),"\x3c/div\x3e");a.push("\x3c/div\x3e");this._renderHidden&&a.push('\x3cinput type\x3d"hidden" value\x3d"',juic.escapeHTML(this._ratedValue),'" name\x3d"',
this._eleId,'" id\x3d"',this._eleId,'"\x3e');a.push("\x3c/div\x3e")},setShowSuperior:function(a){this._component.setShowSuperior(a)},getRatedValue:function(){return this._component.getRatedValue()},getValue:function(){return this.getRatedValue()},setRequired:function(a){return this._component.setRequired?this._component.setRequired(a):!1},handleEvent:function(a){switch(a.type){case "rateSelected":this.setHiddenInput(a.rating);this.updateModel(a.rating);this.dispatch("rateSelected",{rating:a.rating,
originalId:a.originalId});break;case "emosApplied":this.updateModel(a.rating);var b=$(this._eleId);b&&(b.value=a.rating)}},updateModel:function(a){if(void 0!=this.oBinding){var b=this.oBinding.getModel(),c=this.oBinding.getPath();b.setData(c,a,!0)}},updateBinding:function(){if(void 0!=this.oBinding){var a=this.oBinding.getModel(),b=this.oBinding.getPath();this._ratedValue=a.getData(b);this._component.removeEventListener("rateSelected",this);this._buildComponent();a=[];this._component.renderHtml(a);
$(this.id).innerHTML=a.join("");if(a=$(this._eleId))a.value=this._ratedValue}}})})();