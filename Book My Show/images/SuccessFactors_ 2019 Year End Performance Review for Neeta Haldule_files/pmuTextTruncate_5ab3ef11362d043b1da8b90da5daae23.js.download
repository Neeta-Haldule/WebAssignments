function PMUTextTruncate(a,b){this.register();this.init(a,b)}
PMUTextTruncate.prototype=function(){return set(new Component,{init:function(a,b){this.defaultHeight=92;if(0<Util.ffVersion()||Util.browserInfo.ie)this.defaultHeight=95;this.str=null!=a&&void 0!=a?a:"";this.config=b?b:{};this.rtSupport=this.config.rtSupport?this.config.rtSupport:!0;this.displayHeight=this.config.displayHeight?this.config.displayHeight:this.defaultHeight;this.displayWidth=this.config.displayWidth?this.config.displayWidth:400;this.displayLineHeight=this.config.displayLineHeight;this.showAllByDefault=
!!this.config.showAllByDefault},setValue:function(a){null!=a&&void 0!=a&&(this.str=a)},_getTruncateString:function(a,b,c){b=void 0===b?200:b;c=void 0===c?"...":c;return(this.isReadMore=a.length>b)?a.substring(0,b-c.length)+c:a},_readMore:function(a,b){var c=juic.$(this.id+"_truncText"),d=juic.$(this.id+"_fullText");c&&(c.style.cssText="display:none");d&&(d.style.cssText="",this._focusInnerLink(d))},_readLess:function(a,b,c){a=juic.$(this.id+"_truncText");b=juic.$(this.id+"_fullText");a&&(a.style.cssText=
"",this._focusInnerLink(a));b&&(b.style.cssText="display:none")},createInvisableDiv:function(){var a=document.createElement("DIV");a.id=this.id+"_execMapInvisableDiv";a.style.width=this.displayWidth+"px";this.displayLineHeight&&(a.style.lineHeight=this.displayLineHeight+"px");document.body.appendChild(a);return a},removeInvisableDiv:function(){var a=juic.$(this.id+"_execMapInvisableDiv");document.body.removeChild(a)},getScrollHeight:function(){var a=this.createInvisableDiv();a.innerHTML=this.str;
a=a.scrollHeight;this.removeInvisableDiv();return a},_readLessRt:function(a){this._stopDefault(a);if(a=juic.$(this.id+"_fullRichText"))a.style.cssText="overflow:hidden;height:"+this.displayHeight+"px;";a=juic.$(this.id+"_readLessRt");var b=juic.$(this.id+"_readMoreRt");a&&(a.style.cssText="display:none");b&&(b.style.cssText="text-align:right;",this._focusInnerLink(b))},_readMoreRt:function(a){this._stopDefault(a);if(a=juic.$(this.id+"_fullRichText"))a.style.cssText="";a=juic.$(this.id+"_readLessRt");
var b=juic.$(this.id+"_readMoreRt");a&&(a.style.cssText="text-align:right;",this._focusInnerLink(a));b&&(b.style.cssText="display:none")},_focusInnerLink:function(a){(a=jQuery(a).children("a").get(0))&&a.focus()},_stopDefault:function(a){a=a?a:window.event;window.event?a.cancelBubble=!0:a.stopPropagation()},_isRtReadMore:function(){return this.getScrollHeight()>this.displayHeight},renderHtml:function(a){this.rtSupport?0==this.str.length&&void 0!==this.config.defaultStr?(a.push('\x3cdiv class\x3d"nocomment"\x3e'),
a.push(this.config.defaultStr),a.push("\x3c/div\x3e")):0<this.str.length&&(a.push('\x3cdiv class\x3d"nrte_content"'),this._isRtReadMore()&&!this.showAllByDefault&&a.push('style\x3d"overflow:hidden;height:',this.displayHeight,'px;"'),a.push(' id\x3d"',this.id,'_fullRichText"\x3e'),a.push(this.str),a.push('\x3cdiv id\x3d"',this.id,'_readLessRt" style\x3d"text-align:right;',this.showAllByDefault?"":"display:none;",'"\x3e','\x3ca href\x3d"javascript:void(0)" onclick\x3d"',this.fireCode("_readLessRt"),
'return false;"\x3e',MSGS.COMMON_Less,"\x3c/a\x3e\x3c/div\x3e"),a.push("\x3c/div\x3e"),this._isRtReadMore()&&a.push('\x3cdiv id\x3d"',this.id,'_readMoreRt" style\x3d"text-align:right;',this.showAllByDefault?"display:none;":"",'" class\x3d"textTuncateReadMoreLink"\x3e','\x3ca href\x3d"javascript:void(0)" onclick\x3d"',this.fireCode("_readMoreRt"),'return false;"\x3e',MSGS.COMMON_More,"\x3c/a\x3e\x3c/div\x3e")):(0==this.str.length&&void 0!==this.config.defaultStr&&(a.push('\x3cdiv class\x3d"nocomment"\x3e'),
a.push(this.config.defaultStr),a.push("\x3c/div\x3e")),0<this.str.length&&(a.push("\x3cdiv "),this.isReadMore&&a.push(' onclick\x3d"',this.fireCode("_readMore"),'return false;"'),a.push(' style\x3d"" id\x3d"',this.id,'_truncText"\x3e'),a.push(this._getTruncateString(this.str,this.config.displayChars)),this.isReadMore&&a.push('\x3c/span\x3e\x3ca href\x3d"javascript:void(0)" onclick\x3d"',this.fireCode("_readMore"),'return false;"\x3e',MSGS.COMMON_More,"\x3c/a\x3e\x3c/span\x3e"),a.push("\x3c/div\x3e")),
this.isReadMore&&(a.push('\x3cdiv onclick\x3d"',this.fireCode("_readLess"),'return false;" style\x3d"display: none;" id\x3d"',this.id,'_fullText"\x3e'),a.push(this.str),a.push('\x3c/span\x3e  \x3ca href\x3d"javascript:void(0)" onclick\x3d"',this.fireCode("_readLess"),'return false;"\x3e',MSGS.COMMON_Less,"\x3c/a\x3e\x3c/span\x3e"),a.push("\x3c/div\x3e")))}})}();