function SignatureSection(a,b){this.register();this.init(a,b)}
(function(){extend(SignatureSection,PM2BaseSection,{init:function(a,b){this.m=a;this.dataPath=b;this.sectionData=this.m.getData(this.dataPath);var c=new SignatureSectionContent(this.m,this.dataPath);this.itemPortlet=new PMPortlet(c,this.sectionData.sectName,!0)},renderHtml:function(a){a.push('\x3ca href\x3d"#" class\x3d"anchor_rel" id\x3d"anchor_',this.sectionData.sectIndex,'" name\x3d"anchor_',this.sectionData.sectIndex,'"');a.push('title\x3d"',juic.escapeHTML(this.sectionData.sectName),'" aria-hidden\x3d"true" \x3e\x26nbsp;\x3c/a\x3e');
this.itemPortlet.renderHtml(a)},getSectionTitle:function(){return this.sectionData.sectName},getFocusId:function(){return this.itemPortlet.getFocussableAnchor()}})})();function SignatureSectionContent(a,b){this.register();this.init(a,b)}
(function(){extend(SignatureSectionContent,Component,{init:function(a,b){this.m=a;this.dataPath=b;this.sectionData=this.m.getData(this.dataPath);this.sectionData.sectDesc&&(this.sectionCaption=""!==this.sectionData.sectDesc.trim()?new PM2SectionCaption(this.m,this.dataPath):null)},renderHtml:function(a){this.sectionCaption&&this.sectionCaption.renderHtml(a);if(this.sectionData.signVOs&&0<this.sectionData.signVOs.length){a.push('\x3cdiv class\x3d"signContent"\x3e\x3ctable\x3e');for(var b=this.sectionData.signVOs,
c=0,e=b.length;c<e;c++){var d=b[c];a.push('\x3ctr\x3e\x3ctd class\x3d"roleType"\x3e');a.push(juic.escapeHTML(d.roleType));a.push("\x3c/td\x3e");a.push("\x3ctd\x3e");"new"==d.status?this.renderNew(a,d):"current"==d.status?this.renderCurrent(a,d):"done"==d.status?this.renderDone(a,d):"skipped"==d.status&&this.renderSkipped(a,d);a.push("\x3c/td\x3e\x3c/tr\x3e")}a.push("\x3c/table\x3e\x3c/div\x3e")}},renderNew:function(a,b){this._renderNotSigned(a,b)},_renderNotSigned:function(a,b){a.push('\x3cdiv class\x3d"signature"\x3e');
a.push('\x3cdiv class\x3d"pm2FloatContainer nextSign"\x3e');a.push('\x3cdiv class\x3d"pm2LFloatBlock"\x3e',sfMessageFormat.format(MSGS.PERFORMANCE_PM2_NOT_SIGNED_YET,juic.escapeHTML(b.signedBy)),"\x3c/div\x3e");a.push("\x3c/div\x3e");b.signedComment&&null!=b.signedComment.comment&&(a.push('\x3cdiv class\x3d"comment"\x3e'),(new PMUTextTruncate(b.signedComment.comment,{displayChars:300,defaultStr:""})).renderHtml(a),a.push("\x3c/div\x3e"));a.push("\x3c/div\x3e")},renderCurrent:function(a,b){if(b.signedComment){var c=
b.signedComment;a.push('\x3cdiv class\x3d"signature"\x3e');a.push('\x3cdiv class\x3d"pm2FloatContainer nextSign"\x3e');a.push('\x3cdiv class\x3d"pm2LFloatBlock"\x3e',sfMessageFormat.format(MSGS.PERFORMANCE_PM2_NOT_SIGNED_YET,juic.escapeHTML(b.signedBy)),"\x3c/div\x3e");a.push("\x3c/div\x3e\x3cbr\x3e");a.push('\x3cdiv class\x3d"pm2FloatContainer onSign"\x3e');c.commentLabel&&(c.commentRequired&&a.push('\x3cspan class\x3d"requiredMark"\x3e* \x3c/span\x3e'),a.push(juic.escapeHTML(c.commentLabel)));a.push("\x3c/div\x3e");
if(c.commentsPerm)if("write"==c.commentsPerm.name){if(formConfig.rte){var e=this.m.getData(this.dataPath+"/sectionCommentsMaxLimit"),d=c.commentRequired;d&&(e=c.commentRequiredMaxValue);this.rteWrapper=new PM2RteWrap(c.comment?c.comment:"",{eleId:c.commentKey,maxChars:e,hideLegalScan:this.sectionData.legalScan?!1:!0,label:c.commentLabel,hideSpellCheck:this.sectionData.spellCheck?!1:!0});d&&(PMValidationUtil.bindRequiredValidator(this.rteWrapper),PMValidationUtil.bindLengthValidator(this.rteWrapper,
c.commentRequiredMinValue,c.commentRequiredMaxValue),this.rteWrapper.addEventListener("change",this));window[c.commentKey]=this.rteWrapper;a.push('\x3cdiv class\x3d"comment"\x3e');this.rteWrapper.renderHtml(a);PMValidationUtil.renderFieldError(a,this.rteWrapper.id)}else{e=this.m.getData(this.dataPath+"/sectionCommentsMaxLimit");if(d=c.commentRequired)e=c.commentRequiredMaxValue;this.rteWrapper=new PM2PlainTextWrap(c.comment?c.comment:"",{eleId:c.commentKey,maxLength:e,rows:3,cols:90});window[c.commentKey]=
this.rteWrapper;a.push('\x3cdiv class\x3d"comment"\x3e');this.rteWrapper.renderHtml(a)}a.push("\x3c/div\x3e")}else"read"==c.commentsPerm.name&&(a.push('\x3cdiv class\x3d"comment"\x3e'),(new PMUTextTruncate(c.comment,{displayChars:300,defaultStr:""})).renderHtml(a),a.push("\x3c/div\x3e"));a.push("\x3c/div\x3e")}else this._renderNotSigned(a,b)},renderDone:function(a,b){a.push('\x3cdiv class\x3d"signature"\x3e');a.push('\x3cdiv class\x3d"pm2FloatContainer signed"\x3e');a.push('\x3cdiv class\x3d"pm2LFloatBlock"\x3e',
juic.escapeHTML(b.signedBy),"\x3c/div\x3e");a.push('\x3cdiv class\x3d"pm2RFloatBlock"\x3e',juic.escapeHTML(b.signedDate),"\x3c/div\x3e");a.push("\x3c/div\x3e");b.actionInfo&&a.push('\x3cdiv class\x3d"actionInfo"\x3e',juic.escapeHTML(b.actionInfo),"\x3c/div\x3e");b.signedComment&&b.signedComment.comment&&(a.push('\x3cdiv class\x3d"comment"\x3e'),(new PMUTextTruncate(b.signedComment.comment,{displayChars:300,defaultStr:""})).renderHtml(a),a.push("\x3c/div\x3e"));a.push("\x3c/div\x3e")},renderSkipped:function(a,
b){a.push('\x3cdiv class\x3d"signature"\x3e');a.push('\x3cdiv class\x3d"pm2FloatContainer nextSign"\x3e');a.push('\x3cdiv class\x3d"pm2LFloatBlock"\x3e\x26nbsp;\x3c/div\x3e');a.push("\x3c/div\x3e");b.actionInfo&&a.push('\x3cdiv class\x3d"actionInfo"\x3e',juic.escapeHTML(b.actionInfo),"\x3c/div\x3e");b.signedComment&&b.signedComment.comment&&(a.push('\x3cdiv class\x3d"comment"\x3e'),(new PMUTextTruncate(b.signedComment.comment,{displayChars:300,defaultStr:""})).renderHtml(a),a.push("\x3c/div\x3e"));
a.push("\x3c/div\x3e")},_handleValidation:function(a){var b=PMValidationUtil.validate(a);b.result?PMValidationUtil.clearFieldError(a.id):PMValidationUtil.insertFieldError(a.id,b.message)},handleEvent:function(a){switch(a.type){case "change":this._handleValidation(a.target)}}})})();