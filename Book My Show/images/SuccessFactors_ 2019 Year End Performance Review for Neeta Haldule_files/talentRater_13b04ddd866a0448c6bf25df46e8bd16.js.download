function TalentFiveRating(a,b,c,d){this.register();this._ratedValue=a;this._sourceRating=d?d:a;this._supportTNTR=!1;this._readOnly=b&&b.readOnly?b.readOnly:!1;this._ratingValues=b&&b.ratingValues?b.ratingValues:"-1972 -1971 1.0 2.0 3.0 4.0 5.0".split(" ");this._ratingDesc=b&&b.ratingDesc?b.ratingDesc:"Unrated;Too new to rate;Poor;Fair;Good;Excellent;Awesome".split(";");this._ratingValuesJSON={};this._isShowValue=b&&b.showValue?b.showValue:!0;this._showHalfStar=!1;this._type=c.toLowerCase();this._options=
b;this._ratedStarIndexFound=!1;"star"==this._type?this._clsName="trrRatingStar":"circle"==this._type&&(this._clsName="trrRatingCircle");for(a=0;a<this._ratingValues.length;a++)this._ratingValuesJSON[this._ratingValues[a]]=a;this._ratedValue&&(this._ratedStarIndex=(a=this.getIndexForStarRating())?a.index:NaN,a&&a.showHalfStar&&(this._showHalfStar=a.showHalfStar));this._ratedStarIndexFound=isNaN(this._ratedStarIndex)?!1:!0;this._ratedStarIndex=isNaN(this._ratedStarIndex)?0:this._ratedStarIndex;"-1971"!=
this._ratingDesc[1]&&(this._supportTNTR=!0)}
TalentFiveRating.prototype=function(){return set(new Component,{getIndexForStarRating:function(){for(var a=parseFloat(this._sourceRating),b=0;b<this._ratingValues.length;b++){var c=parseFloat(this._ratingValues[b]),d=parseFloat(this._ratingValues[b+1]);if(a===c)return{index:b};if(-1972!==c&&-1971!==c&&a>c&&a<d)return{index:b,showHalfStar:!0}}},renderRatingItem:function(a,b,c){a.push('\x3cli id\x3d"talentRatingStar_',this.id,"_",b,'" class\x3d"',c,'"',' onfocus\x3d"',this.fireCode("_handleMouseOver",
b),'"',' onblur\x3d"',this.fireCode("_handleMouseOut"),'"',' onmouseover\x3d"',this.fireCode("_handleMouseOver",b),'"',' onmouseout\x3d"',this.fireCode("_handleMouseOut"),'"','  onclick\x3d"',this.fireCode("_handleSelectRating",b),'"',"\x3e\x3c/li\x3e")},renderHtml:function(a){a.push('\x3ctable role\x3d"presentation" style\x3d"page-break-inside: avoid;"\x3e\x3ctr\x3e\x3ctd\x3e');a.push("\x3cdiv");this.readOnly||a.push(' class\x3d"trrFiveRating ',this._clsName,'" id\x3d"talentFiveRating_'+this.id+
'"',' onmouseover\x3d"',this.fireCode("_handleMouseOver"),'"',' onmouseout\x3d"',this.fireCode("_handleMouseOut"),'"',"\x3e");this._readOnly?a.push('\x3cul class\x3d"trrRatingReadOnly"\x3e'):a.push('\x3cul role\x3d"listbox" aria-multiselectable\x3d"true" class\x3d"trrRatingWritable "  title\x3d"',MSGS.PERFORMANCE_PM2_RATING_STAR_WIDGET_TITLE,'" tabIndex\x3d0 onkeydown\x3d"',this.fireCode("_handleKeyDown"),'"\x3e');if(!this._readOnly&&this._supportTNTR){var b="trrCleanRating";1==this._ratedStarIndex&&
(b="trrOver_tntr");a.push('\x3cli role\x3d"option" class\x3d"',b,'" id\x3d"talentTNTR_',this.id,'"',' onfocus\x3d"',this.fireCode("_handleMouseOver",1),'"',' onblur\x3d"',this.fireCode("_handleMouseOut"),'"',' onmouseover\x3d"',this.fireCode("_handleMouseOver",1),'"',' onmouseout\x3d"',this.fireCode("_handleMouseOut"),'"','  onclick\x3d"',this.fireCode("_handleTNTR",1),'"',"\x3e\x26nbsp;\x3c/li\x3e")}if(this._readOnly){if(2>this._ratedStarIndex)this._showHalfStar?(a.push('\x3cli class\x3d"trrHalfRated"\x3e\x3cdiv class\x3d"trrInnerHalf"\x3e\x3c/div\x3e\x3c/li\x3e'),
b=3):b=2;else if(this._showHalfStar){for(b=2;b<=this._ratedStarIndex;b++)a.push('\x3cli class\x3d"trrRated"\x3e\x3c/li\x3e');a.push('\x3cli class\x3d"trrHalfRated"\x3e\x3cdiv class\x3d"trrInnerHalf"\x3e\x3c/div\x3e\x3c/li\x3e');b=this._ratedStarIndex+2}else{for(b=2;b<=this._ratedStarIndex;b++)a.push('\x3cli class\x3d"trrRated"\x3e\x3c/li\x3e');b=this._ratedStarIndex+1}for(;b<this._ratingValues.length;b++)a.push('\x3cli class\x3d"trrUnrated"\x3e\x3c/li\x3e')}else{if(2>this._ratedStarIndex)b=2;else{for(b=
2;b<=this._ratedStarIndex;b++)this.renderRatingItem(a,b,"trrRated");b=this._ratedStarIndex+1}for(;b<this._ratingValues.length;b++)this.renderRatingItem(a,b,"trrUnrated")}b=this._ratingDesc[this._ratedStarIndex];"0.0"==this._ratedValue&&null==this._ratingValuesJSON["0.0"]&&(b="0.0");this._options&&this._options.calculatedRatingLabel&&!this._options.isMLT&&(b=this._options.calculatedRatingLabel);this._options.isMLT&&this._ratedValue&&!this._ratedStarIndexFound&&(b=this._ratedValue);this._showHalfStar&&
(b=this._ratedValue);a.push("\x3c/ul\x3e");a.push('\x3cdiv  tabIndex\x3d0  class\x3d"trrRatingDesc" id\x3d"ratingDesc_',this.id,'"');this._readOnly||a.push(' role\x3d"alert" ');a.push("\x3e",juic.escapeHTML(b));this._showSuperior&&a.push('\x3cspan style\x3d"color: blue; font-weight: bold;"\x3e*\x3c/span\x3e');a.push("\x3c/div\x3e");a.push('\x3cdiv class\x3d"cleardiv"\x3e\x3c/div\x3e');a.push("\x3c/div\x3e");a.push("\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")},setShowSuperior:function(a){this._showSuperior=
a},getRatedValue:function(){return this._ratedValue?this._ratedValue:this._ratingValues[this._ratedStarIndex]},_getMaxScoreIndex:function(a){for(var b=0;b<this._ratingValues.length&&this._ratingValues[b]!=a;b++);return b},applyEMOS:function(a,b){var c=this._getMaxScoreIndex(a);this.disableOptionAfter(c);b&&(this._ratedValue=this._ratingValues[c],this._ratedStarIndex=c,this._updateRatingDesc(this._ratedStarIndex),this.dispatch("emosApplied",{rating:this._ratedValue}))},resetEMOS:function(){this.enableAllOptions()},
disableOption:function(a,b,c){if(a=juic.$(a))if(c)a.onfocus=null,a.onblur=null,a.onmouseover=null,a.onmouseout=null,a.onclick=null,a.className="unrated";else{var d=this;a.onfocus=a.onmouseover=function(a){d._handleMouseOver(b,a)};a.onblur=a.onmouseout=function(a){d._handleMouseOut(a)};a.onclick=function(a){d._handleSelectRating(b,a)}}},disableOptionAfter:function(a){for(a+=1;a<this._ratingValues.length;a++)this.disableOption("talentRatingStar_"+this.id+"_"+a,a,!0)},enableAllOptions:function(){for(var a=
0;a<this._ratingValues.length;a++)this.disableOption("talentRatingStar_"+this.id+"_"+a,a,!1)},_handleMouseOver:function(a){a=parseInt(a);if(!this._readOnly&&!isNaN(a)){if(1==a){var b=juic.$("talentTNTR_"+this.id);b&&(1==parseInt(this._ratedStarIndex)?b.className="trrCleanRating":b.className="trrOver_tntr")}else if(b=juic.$("talentTNTR_"+this.id))b.className="trrCleanRating";if(parseInt(this._ratedStarIndex)==parseInt(a)){for(var c=2;c<this._ratingValues.length;c++)b=juic.$("talentRatingStar_"+this.id+
"_"+c),b.className="trrUnrated";(a=juic.$("talentRatingStar_"+this.id+"_"+a))&&Util.addClass(a,"selectedItem");this._updateRatingDesc(0)}else{for(c=2;c<=a;c++)b=juic.$("talentRatingStar_"+this.id+"_"+c),b.className="trrRated";for(c=a+1;c<this._ratingValues.length;c++)b=juic.$("talentRatingStar_"+this.id+"_"+c),b.className="trrUnrated";this._updateRatingDesc(a)}}},_handleMouseOut:function(){if(!this._readOnly){var a=juic.$("talentTNTR_"+this.id);a&&(1==parseInt(this._ratedStarIndex)?a.className="trrOver_tntr":
a.className="trrCleanRating");if(2>this._ratedStarIndex)var b=2;else{for(b=2;b<=this._ratedStarIndex;b++)a=juic.$("talentRatingStar_"+this.id+"_"+b),a.className="trrRated";b=this._ratedStarIndex+1}for(;b<this._ratingValues.length;b++)a=juic.$("talentRatingStar_"+this.id+"_"+b),a.className="trrUnrated";this._updateRatingDesc(this._ratedStarIndex)}},_handleKeyDown:function(a){var b=a.which||a.keyCode,c=!1,d=juic.$("talentTNTR_"+this.id);index=this._ratedStarIndex;35<=b&&40>=b&&((38==b||39==b)&&index+
1<this._ratingValues.length&&0<=index?(index++,d||1!=index||index++,c=!0):(40==b||37==b)&&index<=this._ratingValues.length&&0<index?(--index,c=!0):36==b?(index=0,c=!0):35==b&&(index=this._ratingValues.length-1,c=!0),c&&(2>index?this._handleTNTR(index,a):this._handleSelectRating(index,a)),a.preventDefault?a.preventDefault():a.returnValue=!1)},_handleSelectRating:function(a,b){var c=juic.$("talentTNTR_"+this.id);c&&(c.className="trrCleanRating",c.setAttribute("class","trrCleanRating"));if(!this._readOnly){var c=
window.event?event.srcElement.id:b?b.target.id:null,d=parseInt(a);if(parseInt(this._ratedStarIndex)==parseInt(d)){this._ratedValue=this._ratingValues[0];this._ratedStarIndex=0;for(var e=2;e<this._ratingValues.length;e++){var f=juic.$("talentRatingStar_"+this.id+"_"+e);f.className="trrUnrated selectedItem";f.setAttribute("class","trrUnrated selectedItem")}}else{this._ratedValue=this._ratingValues[d];this._ratedStarIndex=d;for(e=2;e<=d;e++)f=juic.$("talentRatingStar_"+this.id+"_"+e),f.className="trrRated",
f.setAttribute("class","trrRated");for(d+=1;d<this._ratingValues.length;d++)f=juic.$("talentRatingStar_"+this.id+"_"+d),f.className="trrUnrated",f.setAttribute("class","trrUnrated")}this._updateRatingDesc(this._ratedStarIndex);this.dispatch("rateSelected",{rating:this._ratedValue,originalId:c})}},_handleTNTR:function(a,b){if(!this._readOnly){var c=window.event?event.srcElement.id:b?b.target.id:null,d=parseInt(a);if(parseInt(this._ratedStarIndex)==parseInt(d)){this._ratedValue=this._ratingValues[0];
this._ratedStarIndex=0;var e=2}else(d=juic.$("talentTNTR_"+this.id))?0!=a?(this._ratedValue=this._ratingValues[1],this._ratedStarIndex=1,d.className="trrOver_tntr"):(this._ratedValue=this._ratingValues[0],this._ratedStarIndex=0,d.className="trrCleanRating"):(this._ratedValue=this._ratingValues[0],this._ratedStarIndex=0),e=2;for(;e<this._ratingValues.length;e++)d=juic.$("talentRatingStar_"+this.id+"_"+e),d.className="trrUnrated",d.setAttribute("class","trrUnrated");this._updateRatingDesc(this._ratedStarIndex);
this.dispatch("rateSelected",{rating:this._ratedValue,originalId:c})}},_updateRatingDesc:function(a){this._ratingDesc[a]&&(juic.$("ratingDesc_"+this.id).innerHTML=juic.escapeHTML(this._ratingDesc[a]))}})}();
function TalentRatingDropdown(a,b,c,d,e){this.register();this.eleId=a;this._ratedValue=b;this._ratedText=c;this._supportTNTR=!1;this._readOnly=d&&d.readOnly?d.readOnly:!1;this._ratingValues=d&&d.ratingValues?d.ratingValues:"-1972 -1971 1.0 2.0 3.0 4.0 5.0".split(" ");this._ratingDesc=d&&d.ratingDesc?d.ratingDesc:"Unrated;Too new to rate;Poor;Fair;Good;Excellent;Awesome".split(";");this._calculatedRatingLabel=d&&d.calculatedRatingLabel?d.calculatedRatingLabel:null;"-1971"!=this._ratingDesc[1]&&(this._supportTNTR=
!0);this._showValue=e;this._isRequired=!1;this._isMLT=d&&d.isMLT?d.isMLT:!1}
TalentRatingDropdown.prototype=function(){return set(new Component,{renderHtml:function(a){a.push('\x3cdiv class\x3d"trrRatingDropdown"\x3e');if(this._readOnly){var b=this._ratedText;!this._showValue&&this._calculatedRatingLabel&&(b=this._calculatedRatingLabel);!this._showValue&&this._isMLT&&""==b&&(b=this._ratedValue);a.push('\x3cspan style\x3d"margin-left:0px;"\x3e',juic.escapeHTML(b),"\x3c/span\x3e")}else{for(var c=[],d=b=0,e=0;e<this._ratingValues.length;e++)if(this._supportTNTR||"-1971"!=this._ratingDesc[e]){var f=
"";this._showValue&&0>this._ratingValues[e].indexOf("-1971")&&0>this._ratingValues[e].indexOf("-1972")&&(f=this._ratingDesc[e]?this._ratingValues[e]+" - ":this._ratingValues[e]);var f=f+this._ratingDesc[e],g;g=this._ratedValue;var l=this._ratingValues[e],h=parseFloat(g),k=parseFloat(l);h===k?g=!0:(h=parseInt(g),k=parseInt(l),g=!isNaN(h)&&-1971>=h&&h===k?!0:!1);g&&(b=d);this.applyMaxScore&&this.maxScoreIndex&&this.maxScoreIndex<this._ratingValues.length&&e>this.maxScoreIndex&&(f=f+" "+MSGS.PERFORMANCE_PM2_EMOS_NOT_SELECTABLE);
this._ratingValues[e].value=f;this._ratingValues[e].disabled=!0;f=new SFSimpleSelectItem(this._ratingValues[e],f);c.push(f);d++}c=new SFDefaultSingleSelectModel(c);c.setSelectedIndex(b);sfDropDown=new TRDropDown(c,this.eleId,MSGS.PERFORMANCE_REVIEW_RATING);sfDropDown.addEventListener("change",this,"_changeValue");a.push(sfDropDown)}a.push("\x3c/div\x3e")},_getMaxScoreIndex:function(a){for(var b=0;b<this._ratingValues.length&&this._ratingValues[b]!=a;b++);return b},setOptionText:function(a){},disableOption:function(a,
b){var c=$(a);jQuery(c).prop("disabled",b)},disableOptionAfter:function(a){for(a+=1;a<this._ratingValues.length;a++)this.disableOption(this.id+"-"+this._ratingValues[a],!0)},enableAllOptions:function(){for(var a=0;a<this._ratingValues.length;a++)this.disableOption(this.id+"-"+this._ratingValues[a],!1)},setMaxScore:function(a,b){this.applyMaxScore=b;this.maxScoreIndex=this._getMaxScoreIndex(a)},applyEMOS:function(a,b){var c=this._getMaxScoreIndex(a);this.disableOptionAfter(c);b&&(juic.$(this.id+"-"+
this._ratingValues[c]).selected=!0,this._ratedValue=$(this.eleId).value,this.dispatch("emosApplied",{rating:this._ratedValue}))},resetEMOS:function(){this.enableAllOptions()},_changeValue:function(a){this._ratedValue=a.target.getValue();this.dispatch("rateSelected",{rating:a.target.getValue(),originalId:a.target.getReferenceId()});PMUSaveUtils.autoSaveForm()},setRequired:function(a){this._isRequired=a},getRatedValue:function(){return this._ratedValue}})}();
function TRDropDown(a,b,c){this._super(a,b,c)}(function(){juic.extend(TRDropDown,SFDropDown,{getReferenceId:function(){return this._name?this._name:this._isWrapped?this.id+"_select":this.id}})})();