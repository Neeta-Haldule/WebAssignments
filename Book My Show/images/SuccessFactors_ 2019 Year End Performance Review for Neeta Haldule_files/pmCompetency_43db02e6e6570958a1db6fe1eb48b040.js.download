function CompetencySection(a,b){this.register();this.init(a,b)}
(function(){extend(CompetencySection,PM2BaseSection,{init:function(a,b){this.itemComps=[];this.m=a;this.dataPath="/"+b;this.sectionData=this.m.getData(this.dataPath);this.weightSymbol=PMSectionUtils.buildWeightSymbol(window.formConfig,this.sectionData);this.itemComps.push(this._buildSectCaption());this.itemComps=this.itemComps.concat(this._buildItems());var c=PMSectionUtils.buildSectComment(this.m,this.dataPath,this.sectionData);c&&this.itemComps.push(c)},_buildSectCaption:function(){var a=null!=
this.sectionData.sectDesc&&""!==this.sectionData.sectDesc.trim()?new PM2SectionCaption(this.m,this.dataPath):null;this._sectionTopBar=new PM2SectionTopBar(this.m,this.dataPath,"competency");this._sectionTopBar.addEventListener("editSectWeights",this);this._sectionTopBar.addEventListener("addCompetency",this);return this._competenciesSecCaptionSlots=new PMPortlet(a,this._sectionTopBar,!0)},_buildItems:function(){var a=PMSectionUtils.buildCommonSectionConfig(window.formConfig,this.sectionData);a.waca=
this.sectionData.waca;a.compCategoryFilters=this.sectionData.compCategoryFilters;a.rateByBehavior=this.sectionData.rateByBehavior;a.behaviorModeOpt=this.sectionData.behaviorModeOpt;a.behaviorRatingScale=this.sectionData.behaviorRatingScale;a.behaviorRatingScalePath="/"+this.sectionData.sectIndex+"/behaviorRatingScale";a.groupLabel=this.sectionData.groupLabel;a.groupPerm=this.sectionData.groupPerm;a.groupList=this.sectionData.groupList;a.teamRaterEnabled=this.sectionData.teamRaterEnabled;a.isShowRatingHelpIcon=
this.sectionData.showRatingHelpIcon;for(var b=[],c=this.sectionData.sectItems,e=0;e<c.length;e++){var d=this.dataPath+"/sectItems/"+e,d=a.ezRaterEnabled?new PMCompetencyItemEZRater(this.m,d,a):new PMCompetencyItemNormal(this.m,d,a);d.addEventListener("editWeights",this);d.addEventListener("itemSelected",this);b.push(d)}c=this.dataPath+"/ratingScale";return a.ezRaterEnabled?PMSectionUtils.buildEZRater(this.sectionData,b,{ratingScale:{m:this.m,path:c}}):b},_submitForm:function(){PMUSaveUtils.submitForm()},
refreshItemWeights:function(){for(var a=0,b=this.itemComps.length;a<b;a++){var c=this.itemComps[a];if("undefined"!=typeof c.refreshWeights&&c.dataPath){var e=this.m.getData(c.dataPath+"/itemWeight");c.refreshWeights(e)}}},_editWeights:function(a){this.pm2EditWeight=new PM2EditWeight(this.m,a.dataPath,{title:"behaviorWeight"==a.weightType?MSGS.PERFORMANCE_PM2_EDIT_BEHAVIOR_WEIGHTS:MSGS.PERFORMANCE_PM2_EDIT_COMPETENCY_WEIGHTS,sectionName:this.sectionData.sectName,weightTotal:"behaviorWeight"==a.weightType?
"":this.sectionData.weightTotal,weightTotalOption:"behaviorWeight"==a.weightType?"":this.sectionData.weightTotalOption,weightSymbol:this.weightSymbol});this.pm2EditWeight.addEventListener("saveWeights",this);this.pm2EditWeight.show(a.triggerElId)},_editSectWeights:function(a){PM2BaseSection.prototype.editInSummarySectWeights.apply(this,arguments)},_addCompetency:function(a){this._competencySelector=new PMCompetencySelector;this.dialog&&this.dialog.removeEventListener("action",this);this.dialog=new SFDialogBox({title:MSGS.ADD_NEW_COMPETENCY,
buttons:[{label:MSGS.COMMON_Cancel,eventName:"hide",active:!1},{label:MSGS.COMMON_Add,eventName:"addCompetency_add",active:!0}],content:this._competencySelector,width:950,innerHeight:400,closeDialogOnEsc:!0});this.dialog.addEventListener("action",this);this.dialog.showDialog(!0,document.activeElement);this._competencySelector.setSelectSection(this.sectionData.elementId,this.sectionData.sectIndex);this._competencySelector.setFormDataId(formConfig.formDataId);this._competencySelector.setFormSubjectId(formConfig.subject.userId);
this._competencySelector.setSubjectName(formConfig.subject.formattedFullName);this._competencySelector.setCompCategoryFilters(this.sectionData.compCategoryFilters);this._competencySelector.setRateByBehavior(this.sectionData.rateByBehavior);this._competencySelector.loadAllCompetencies()},renderHtml:function(a){for(var b=0;b<this.itemComps.length;b++)this.itemComps[b].renderHtml(a)},getSectionTitle:function(){return this._sectionTopBar.getSectionTitle()},getFocusId:function(){return this._competenciesSecCaptionSlots.getFocussableAnchor()},
handleEvent:function(a){switch(a.type){case "addCompetency":this._addCompetency(a.dlgActivatedEl);break;case "editWeights":this._editWeights(a);break;case "editSectWeights":this._editSectWeights(a);break;case "saveWeights":var b=a.weights;if(b){for(var c=0,e=b.length;c<e;c++)this.m.setData(a.dataPath+"/"+c+"/itemWeightVO/value",b[c].weight);PMUSaveUtils.autoSaveForm()}break;case "action":if("addCompetency_add"==a.actionCommand){a=this._competencySelector.getModel().getSelectedSectionIdIdx()+"o5";
jQuery('input[name\x3d"pmreview_tdold"]').val(a);jQuery("#pfui_mod").val(!0);a=document.createDocumentFragment();var d=this._competencySelector.getStateValue();this._addInputElement(a,"fbcompsel_addbtn","Add selected Competencies");this._addInputElement(a,"fbcompsel_state",d);if(0<=d.indexOf("cat"))for(b=this._competencySelector.getSelectedCatCompetencies(),e="fbcompsel_"+(this.sectionData.rateByBehavior?"behrsel_":"compsel_")+("cat"===d?"":"cat_"),c=0;c<b.length;c++)this._addInputElement(a,e+b[c],
"x");if(0<=d.indexOf("user"))for(b=this._competencySelector.getSelectedUserRoleCompetencies(),e="fbcompsel_"+(this.sectionData.rateByBehavior?"behrsel_":"compsel_")+("userroles"===d?"":"userrole_"),c=0;c<b.length;c++)this._addInputElement(a,e+b[c],"x");if(0<=d.indexOf("other")){d=this._competencySelector.getSelectedOtherRoleCompetencies();b=[];for(c in d)b.push(c);this._addInputElement(a,"fbcompsel_role",b.join("|"));var h=1===b.length;for(c in d)for(var b=d[c],e="fbcompsel_"+(this.sectionData.rateByBehavior?
"behrsel_":"compsel_")+(h?"":"otherrole_"+c+"_"),f=0;f<b.length;f++)this._addInputElement(a,e+b[f],"x")}document.forms[0].appendChild(a);this._submitForm()}else"hide"==a.actionCommand&&this._competencySelector.cleanup()}},_addInputElement:function(a,b,c){var e=document.createElement("input");e.setAttribute("name",b);e.setAttribute("value",c);a.appendChild(e)}})})();function PMCompetencyItemBase(a,b,c){this.register();this._init(a,b,c)}
(function(){extend(PMCompetencyItemBase,BaseItem,{_init:function(a,b,c){this._m=a;this.dataPath=b;this._comp=this._m.getData(b);this.sectionIndex=PMPathUtil.getSectionIndex(b);this.itemId=this._comp.itemId;this.ezRaterEnabled=c.ezRaterEnabled;this._isSelfReview=c.subject.userId==c.currentUser.userId;this.weightSymbol=c.weightSymbol;if(this._weight=PMSectionUtils.buildItemWeight(this._comp.itemWeightVO,c.itemWeightRequired,c.weightSymbol))this._weight.bindProperty(this._m,this.dataPath+"/itemWeightVO/value"),
this._weight.addEventListener("editWeights",this);this.formConf=c;this._buildRatingComments();this._buildBehaviors();this._supportData=new PM2SupportData(this._m,this.dataPath,c.ratingScale,{rateByBehavior:c.rateByBehavior,ezRaterEnabled:c.ezRaterEnabled,ratingOption:c.ratingOption,subject:c.subject},!1);void 0!=this._m.getData(this.dataPath+"/othersRatingComments")&&(this._othersRatings=new OthersRating(this._m,this.dataPath,c.ratingScale,{rateByBehavior:c.rateByBehavior,ezRaterEnabled:c.ezRaterEnabled,
ratingOption:c.ratingOption,subject:c.subject,isExpanded:!0,isShowRatingHelpIcon:c.isShowRatingHelpIcon}));(this.customElements=PMSectionUtils.buildCustomElements(this._m,this.dataPath+"/customElements",this.formConf))&&this.customElements.addEventListener("openWritingAssistant",this)},getFocussableAnchor:function(){return"anchor_"+this.sectionIndex+"_"+this.itemId},_buildRateByBehavior:function(){},_buildBehaviors:function(){if(this.formConf.rateByBehavior)this._buildRateByBehavior();else if(1==
this.formConf.behaviorModeOpt||2==this.formConf.behaviorModeOpt||4==this.formConf.behaviorModeOpt||5==this.formConf.behaviorModeOpt){var a=this._comp.behaviorVOs;if(a&&0<a.length){var a={behaviors:a},b={model:"list"};b.isShowRatingHelpIcon=this.formConf.isShowRatingHelpIcon;this.behaviors=new PMBehaviors(a,b);this.behaviorsLabel=new PM2Label(this._comp.itemName+" "+MSGS.BEHAVIOR_STATEMENTS,this.behaviors.id)}}},_buildRatingComments:function(){this._formFactory=new FormFactory(this._m,this.dataPath,
this.formConf);var a=this._formFactory.generateFormMeta();this.formComps=this._formFactory.generateForm(a);for(var a=0,b=this.formComps.length;a<b;a++)PMSectionUtils.registerFormCompEvent(this.formComps[a],this)},renderHtml:function(a){this._super(a)},_renderCustomContent:function(a){PMSectionUtils.renderGroup(a,this._comp,this.formConf,this);this.customElements&&(a.push('\x3cdiv class\x3d"pmItemDesc"\x3e'),this.customElements.renderHtml(a),a.push("\x3c/div\x3e"))},_onGroupChange:function(){PMUSaveUtils.autoSaveForm()},
_renderMainContent:function(a,b,c,e,d,h){a.push('\x3cdiv class\x3d"pmContainer"\x3e');a.push('\x3cdiv class\x3d"pm2LFloatBlock pm2ReviewInfo"\x3e');this.formConf.rateByBehavior||2!=this.formConf.behaviorModeOpt&&5!=this.formConf.behaviorModeOpt||PMSectionUtils.renderComponent(a,b,c);this.formConf.rateByBehavior&&PMSectionUtils.renderComponent(a,b,c);if(e)for(var f=0,g=e.length;f<g;f++)PMSectionUtils.renderRatingComment(a,e[f]);this.formConf.rateByBehavior||1!=this.formConf.behaviorModeOpt&&4!=this.formConf.behaviorModeOpt||
PMSectionUtils.renderComponent(a,b,c);a.push("\x3c/div\x3e");void 0!=d&&(a.push('\x3cdiv class\x3d"pm2RFloatBlock pm2SupportData"\x3e'),a.push('\x3cdiv class\x3d"tabTitle"\x3e',MSGS.PERFORMANCE_REVIEW_OTHERS_RATING,"\x3c/div\x3e"),d.renderHtml(a),a.push("\x3c/div\x3e"));a.push("\x3c/div\x3e");h&&h.renderHtml(a)},_clickDevGoal:function(a){openDialog(this._comp.devGoalUrl)},_showWACA:function(a){WACA.I.clearPlaceQuoteEvents();WACA.I.addEventListener("placeQuote",this);var b,c;a.behavior?(c=a.behavior,
b=this.dataPath+"/behaviorVOs/"+a.behaviorIndex+"/itemRatingComment/comment"):void 0!=a.customIndex?(c=this._comp,b=this.dataPath+"/customElements/"+a.customIndex+"/value"):(c=this._comp,b=this.dataPath+"/itemRatingComment/comment");b={competencyId:c.itemId,location:formConfig.formLocale,firstName:formConfig.subject.firstName,gender:formConfig.subject.gender,compName:c.itemName,isSelfReview:this._isSelfReview,fullName:formConfig.subject.formattedFullName,photoUrl:formConfig.subject.photoUrl,itemDesc:c.itemDesc,
hideRating:!0,dataPath:b,commonUIStyle:!0,showPhotoAndRating:!1};a=a.target.getWACAButtonId?a.target.getWACAButtonId():a.buttonId;WACA.I.initWACA(b,new FocusSetter(a,"action","hide"))},_deleteItem:function(){if(confirm(MSGS.Delete_Confirmation_From_Form)){window.setFormModifiedFlagTrue&&window.setFormModifiedFlagTrue();var a=juic.$("hiddenSubmit");a&&(a.name=this._comp.deleteButtonKey,a.value="Remove",this._submitForm())}},_deleteItemKeyPress:function(a){var b=SFDOMEvent.getCharCode(a);if(b==SFDOMEvent.KEY_CODE.RETURN||
b===SFDOMEvent.KEY_CODE.SPACE)a.preventDefault(),this._deleteItem()},_handleValidation:function(a){var b=PMValidationUtil.validate(a);b.result?PMValidationUtil.clearFieldError(a.id):PMValidationUtil.insertFieldError(a.id,b.message)},refreshWeights:function(a){this._weight&&this._weight.refresh(a)},_renderWeight:function(a,b){a.push('\x3cdiv class\x3d"pm2RFloatBlock"\x3e');a.push('\x3cdiv class\x3d"pm2Status"\x3e');b&&(a.push('\x3cp class\x3d"pm2Weight"\x3e'),b.renderHtml(a),a.push("\x3c/p\x3e"));
a.push("\x3c/div\x3e");a.push("\x3c/div\x3e")},_renderAnchor:function(a){a.push('\x3ca href\x3d"#" onclick\x3d"return false;" class\x3d"anchor_rel" id\x3d"',this.getFocussableAnchor(),'" name\x3d"',this.getFocussableAnchor(),'"');a.push(' aria-hidden\x3d"true" title\x3d"',juic.escapeHTML(this._comp.itemName),'"\x3e\x26nbsp;\x3c/a\x3e')},_handleRateSelected:function(a){},_handleOpenWritingAssistant:function(a){this._showWACA(a)},_submitForm:function(){var a=juic.$("hiddenSubmit");a&&a.click()},handleEvent:function(a){switch(a.type){case "editWeights":a.dataPath=
"behaviorWeight"==a.weightType?this.dataPath+"/behaviorVOs":this.dataPath.substring(0,this.dataPath.lastIndexOf("/"));this.dispatch(a.type,a);break;case "openWritingAssistant":this._handleOpenWritingAssistant(a);break;case "placeQuote":var b=a.target._dataPath,c=this._m.getData(b),c=c+" "+a.quoteText;this._m.setData(b,c);break;case "change":this._handleValidation(a.target);break;case "rateSelected":this._handleValidation(a.target),this._handleRateSelected(a.target)}}})})();
function PMCompetencyItemNormal(a,b,c){this.register();this._init(a,b,c)}
(function(){extend(PMCompetencyItemNormal,PMCompetencyItemBase,{_init:function(a,b,c){this._super(a,b,c)},_buildRateByBehavior:function(){var a=this._comp.ratingOfRecord,b=this._comp.behaviorVOs;if(b&&0<b.length){var c=this.formConf.behaviorRatingScale?this.formConf.behaviorRatingScale:this.formConf.ratingScale;this.behaviors=new PMBehaviors({m:this._m,calculatedRatingPath:this.dataPath+"/ratingOfRecord",calculatedRatingVO:a,behaviorsDataPath:this.dataPath+"/behaviorVOs",behaviors:b,ratingScaleValues:c?
c.scaleValues:[],ratingScalePath:this.formConf.behaviorRatingScale?this.formConf.behaviorRatingScalePath:this.formConf.ratingScalePath},{model:"write",showRatingScaleValue:c?c.showValue:!1,spellCheckEnabled:this.formConf.spellCheck,wacaEnabled:this.formConf.waca,legalScanEnabled:this.formConf.legalScan,ratingScaleType:c?c.scaleType:"STAR",weightSymbol:this.formConf.weightSymbol,calculatedRating:!0,isShowRatingHelpIcon:this.formConf.isShowRatingHelpIcon});this.behaviors.addEventListener("editWeights",
this);this.behaviors.addEventListener("openWritingAssistant",this)}this.behaviors&&PMSectionUtils.checkRatingPermission(a)&&(this.behaviorsLabel=new PMRatingLabel(a.ratingLabel,this.behaviors.id,{required:a.ratingRequired,ratingScale:{m:this._m,path:this.formConf.ratingScalePath}}))},renderHtml:function(a){this._super(a)},renderBody:function(a){a.push('\x3cdiv id \x3d "',this.id,'" class\x3d"" \x3e');a.push('\x3cdiv class\x3d"pm2CompItemHeader" \x3e');a.push('\x3cdiv class\x3d"pm2LFloatBlock"\x3e');
a.push('\x3cdiv class\x3d"pm2LTitleBlockWithActionLinks"\x3e');this._renderAnchor(a);a.push('\x3ch3 class\x3d"pmItemName"\x3e\x3cspan id\x3d"',this.itemId,'-name"\x3e',juic.escapeHTML(this._comp.itemName),"\x3c/span\x3e");a.push("\x3c/h3\x3e");if(this._comp.removable||this._comp.devGoalUrl)this._comp.removable&&(a.push('\x3cspan class\x3d"actionLinks"\x3e'),a.push('\x3cspan tabIndex\x3d0 class\x3d"sapIcon" onclick\x3d"',this.fireCode("_deleteItem"),' return false;"'),a.push(' onKeyPress\x3d"',this.fireCode("_deleteItemKeyPress"),
'"'),a.push(' role\x3d"button" aria-label\x3d"',juic.escapeHTML(MSGS.get("PERFORMANCE_PM2_DELETE_COMPETENCY_BY_NAME",this._comp.itemName)),'" title\x3d"',juic.escapeHTML(MSGS.get("PERFORMANCE_PM2_DELETE_COMPETENCY_BY_NAME",this._comp.itemName)),'"\x3e\x26#xe03d;\x3c/span\x3e'),a.push("\x3c/span\x3e")),this._comp.devGoalUrl&&(a.push('\x3cspan class\x3d"objActionLinks"\x3e'),a.push('\x3cspan\x3e\x3ca href\x3d"#" onclick\x3d"',this.fireCode("_clickDevGoal"),' return false;"'),a.push(' aria-describedby\x3d"',
this.itemId,'-name"'),a.push(' title\x3d"',juic.escapeHTML(this._comp.devGoalName),'"\x3e',this._comp.devGoalMsg,"\x3c/a\x3e\x3c/span\x3e"),a.push("\x3c/span\x3e"));a.push("\x3c/div\x3e");a.push('\x3cp class\x3d"pmItemDesc"\x3e',this._comp.itemDesc,"\x3c/p\x3e");a.push("\x3c/div\x3e");this._renderWeight(a,this._weight);a.push("\x3c/div\x3e");this._renderCustomContent(a);this._renderMainContent(a,this.behaviorsLabel,this.behaviors,this.formComps,this._othersRatings,this._supportData);a.push("\x3c/div\x3e")}})})();
function PMCompetencyItemEZRater(a,b,c){this.register();this._init(a,b,c)}
(function(){extend(PMCompetencyItemEZRater,PMCompetencyItemBase,{_init:function(a,b,c){this._guid2ezdata={};this._guid2behaviorData={};this._guid2comp={};this._comp2guid={};this._raterContentDomIds=[];this._raterDomId2IconDomId={};this._super(a,b,c);this._buildItemEZRaterData()},_buildItemEZRaterData:function(){this._itemData={guid:this.id+"guid_"+this._comp.itemId,itemName:this._comp.itemName,itemDesc:this._comp.itemDesc,removable:this._comp.removable,anchor:this.getFocussableAnchor()};if(!this.formConf.rateByBehavior){var a=
PMSectionUtils.buildManagerSubjectRating(this.dataPath,this._formFactory,this.formConf,this._comp.othersRatingComments,3==this.formConf.ratingOption);a.managerRating&&(this._itemData.managerRating=a.managerRating);a.subjectRating&&(this._itemData.subjectRating=a.subjectRating);this._itemData.gapScaleValues=PMSectionUtils.buildGapScaleValues(this.formConf.ratingScale?this.formConf.ratingScale.scaleValues:[])}this._guid2ezdata[this._itemData.guid]=this._itemData},_buildRateByBehavior:function(){var a=
this._comp.ratingOfRecord;PMSectionUtils.checkRatingPermission(a)&&(this.behaviors=new PMDiv(a.textRating,{cssClass:"pm2RatingDropdown"}),this.behaviors.bindProperty(this._m,this.dataPath+"/ratingOfRecord/textRating"));this.behaviors&&PMSectionUtils.checkRatingPermission(a)&&(this.behaviorsLabel=new PMRatingLabel(a.ratingLabel,this.behaviors.id,{required:a.ratingRequired,ratingScale:{m:this._m,path:this.dataPath+"/ratingScale"}}));if(this._comp.behaviorVOs&&0<this._comp.behaviorVOs.length){var a=
this.dataPath+"/behaviorVOs/",b=this.formConf.currentUser.userId==this.formConf.subject.userId,c=this.formConf.behaviorRatingScale?this.formConf.behaviorRatingScale:this.formConf.ratingScale;this._behaviorDatas=[];for(var e=PMSectionUtils.buildGapScaleValues(c?c.scaleValues:[]),d=0,h=this._comp.behaviorVOs.length;d<h;d++){var f={};f.isLastBehavior=d+1==h;var g=this._comp.behaviorVOs[d],m=this.id+"guid_"+this._comp.itemId+"_"+g.itemId;f.ezRaterData={guid:m,itemName:g.itemName,itemDesc:g.itemDesc,removable:g.removable,
deleteButtonKey:g.deleteButtonKey,gapScaleValues:e,anchor:"anchor_"+this.sectionIndex+"_"+g.itemId};var k=PMSectionUtils.buildManagerSubjectRating(a+d,this._formFactory,this.formConf,g.othersRatingComments,!0,!0);k.managerRating&&(f.ezRaterData.managerRating=k.managerRating);k.subjectRating&&(f.ezRaterData.subjectRating=k.subjectRating);this._guid2ezdata[m]=f.ezRaterData;PMSectionUtils.checkWeightPermission(g.itemWeightVO)&&(f.weightComp=new PM2ItemWeight(g.itemWeightVO.key,g.itemWeightVO.value,"write"==
g.itemWeightVO.permission.name,!1,"behaviorWeight",this.formConf.weightSymbol),f.weightComp.addEventListener("editWeights",this),f.weightComp.bindProperty(this._m,a+d+"/itemWeightVO/value"));k=[];if(!b){var l=this._formFactory.generateComp(this._formFactory.getRatingMetaByDataPath(a+d+"/itemRatingComment",!0));l&&(PMSectionUtils.registerFormCompEvent(l,this),k.push(l))}if(l=this._formFactory.generateComp(this._formFactory.getCommentMetaByDataPath(a+d+"/itemRatingComment")))PMSectionUtils.registerFormCompEvent(l,
this),k.push(l),this._comp2guid[l.instance.id]=m;f.formComps=k;this._m.getData(a+d+"/othersRatingComments")&&(f.othersRatingComp=new OthersRating(this._m,a+d,c,{rateByBehavior:!0,ezRaterEnabled:!0,ratingOption:this.formConf.ratingOption,subject:this.formConf.subject,isExpanded:!0}));this._behaviorDatas.push(f);this._guid2behaviorData[m]={behavior:g,behaviorIndex:d}}}},_renderItemContent:function(a){this._raterContentDomIds.push(this._itemData.guid+"_content");a.push('\x3ctr id\x3d"',this._itemData.guid+
"_content",'" class\x3d"',this._ezConfig.expandAll?"expanded":"collapsed",'"\x3e');a.push('\x3ctd class\x3d"itemContent ',this._getContentBottomBorderClzName(!1),'" colspan\x3d"',this._ezConfig.columnsCount,'"\x3e');a.push('\x3cdiv class\x3d"pm2CompItemHeader" \x3e');a.push('\x3cdiv class\x3d"pm2LFloatBlock"\x3e');a.push('\x3cdiv class\x3d"pm2LTitleBlockWithActionLinks"\x3e');this._comp.devGoalUrl&&(a.push('\x3cspan class\x3d"objActionLinks"\x3e'),a.push('\x3cspan\x3e\x3ca href\x3d"#" onclick\x3d"',
this.fireCode("_clickDevGoal"),' return false;"'),a.push(' aria-describedby\x3d"',this.itemId,'-name"'),a.push(' title\x3d"',juic.escapeHTML(this._comp.devGoalName),'"\x3e',this._comp.devGoalMsg,"\x3c/a\x3e\x3c/span\x3e"),a.push("\x3c/span\x3e"));a.push("\x3c/div\x3e");a.push("\x3c/div\x3e");this._renderWeight(a,this._weight);a.push("\x3c/div\x3e");this._renderCustomContent(a);this._renderMainContent(a,this.behaviorsLabel,this.behaviors,this.formComps,this._othersRatings,this._supportData);a.push("\x3c/td\x3e\x3c/tr\x3e")},
_renderBehaviorContent:function(a,b){this._raterContentDomIds.push(b.ezRaterData.guid+"_content");a.push('\x3ctr id\x3d"',b.ezRaterData.guid+"_content",'" class\x3d"',this._ezConfig.expandAll?"expanded":"collapsed",'"\x3e');a.push('\x3ctd class\x3d"itemContent ',this._getContentBottomBorderClzName(!0,b.isLastBehavior),'" colspan\x3d"',this._ezConfig.columnsCount,'"\x3e');b.weightComp&&(a.push('\x3cdiv class\x3d"pm2CompItemHeader" \x3e'),this._renderWeight(a,b.weightComp),a.push("\x3c/div\x3e"));this._renderMainContent(a,
null,null,b.formComps,b.othersRatingComp);a.push("\x3c/td\x3e\x3c/tr\x3e")},_getContentBottomBorderClzName:function(a,b){var c=!0;this.formConf.rateByBehavior?this._isLastItem&&(c=a?!b:this._comp.behaviors&&0<this._comp.behaviors.length):c=!this._isLastItem;return c?" contentBorder":""},renderHtml:function(a){var b=juic.createRenderContext(),c=!1;if(this._behaviorDatas)for(var e=0,d=this._behaviorDatas.length;e<d;e++){var h=this._behaviorDatas[e],f=PMSectionUtils.hasBehaviorContent(h);f&&(c=!0);PMSectionUtils.renderEZRater(b,
h.ezRaterData,{isBehavior:!0,ezConfig:this._ezConfig,expandable:f},this);f&&this._renderBehaviorContent(b,h)}e=PMSectionUtils.hasItemContent(this._comp,this.formConf,this.formComps);PMSectionUtils.renderEZRater(a,this._itemData,{isBehavior:!1,ezConfig:this._ezConfig,expandable:e||c},this);e&&this._renderItemContent(a);a.push(b.join(""))},setEzConfig:function(a){this._ezConfig=a},setIsLastItem:function(a){this._isLastItem=a},hasManagerRating:function(){if(this._itemData.managerRating)return!0;if(this._behaviorDatas)for(var a=
0,b=this._behaviorDatas.length;a<b;a++)if(this._behaviorDatas[a].ezRaterData.managerRating)return!0;return!1},hasSubjectRating:function(){if(this._itemData.subjectRating)return!0;if(this._behaviorDatas)for(var a=0,b=this._behaviorDatas.length;a<b;a++)if(this._behaviorDatas[a].ezRaterData.subjectRating)return!0;return!1},hasAction:function(){if(this._itemData.removable)return!0;if(this._behaviorDatas)for(var a=0,b=this._behaviorDatas.length;a<b;a++){var c=this._behaviorDatas[a];if(c.ezRaterData.removable&&
c.ezRaterData.deleteButtonKey)return!0}return!1},_handleRateSelected:function(a){this._updateGapImage(this._comp2guid[a.id])},_handleOpenWritingAssistant:function(a){var b=this._comp2guid[a.target.id];b&&(b=this._guid2behaviorData[b])&&(a.behavior=b.behavior,a.behaviorIndex=b.behaviorIndex);this._showWACA(a)},_updateGapImage:function(a){PMSectionUtils.updateGapImage(this._guid2ezdata[a],this._guid2comp["img_"+a])},toggle:function(a){PMSectionUtils.expandCollapseAllEZRaterItems(this._raterContentDomIds,
this._raterDomId2IconDomId,a)},_toggleItem:function(a){PMSectionUtils.toggleEZRaterItem(a,this._raterContentDomIds,this._raterDomId2IconDomId)},_onClickDescInfo:function(a,b){var c=this._guid2ezdata[a],e=b.target||b.srcElement;void 0!=PMPopupManager.compDescPopup&&(PMPopupManager.compDescPopup.isShown()&&PMPopupManager.compDescPopup.hide(),PMPopupManager.compDescPopup.cleanup());PMPopupManager.compDescPopup=new SFCalloutPopup({originOptions:{pointerOffset:40},closeOnMouseout:!1,escapeHtml:!1,closeOnClick:!0,
showCloseIcon:!0,width:420,title:c.itemName,content:new PMCompetencyDesc(c.itemDesc),refocusRef:e});PMPopupManager.compDescPopup.show(e.id,{setFocusOnSelf:!0})},_handleKeyUp:function(a,b){13==(b.which||b.keyCode)&&this._enterKeyToMatch&&(this._enterKeyToMatch=!1,this._onClickDescInfo(a,b))},_handleKeyDown:function(a,b){13==(b.which||b.keyCode)&&(this._enterKeyToMatch=!0)},_deleteBehavior:function(a,b){if(confirm(MSGS.Delete_Confirmation_From_Form)){window.setFormModifiedFlagTrue&&window.setFormModifiedFlagTrue();
var c=juic.$("hiddenSubmit");c&&(c.name=a,c.value="Remove",this._submitForm())}}})})();function PMCompetencyDesc(a){this.register();this._init(a)}(function(){extend(PMCompetencyDesc,Component,{_init:function(a){this._desc=a},renderHtml:function(a){a.push('\x3cdiv class\x3d"competencyDesc"\x3e');a.push(this._desc);a.push("\x3c/div\x3e")}})})();