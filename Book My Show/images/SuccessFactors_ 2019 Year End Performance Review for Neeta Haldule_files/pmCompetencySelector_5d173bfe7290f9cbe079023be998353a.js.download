function PMAddCompetencyContent(a){this.register();this.init(a)}
PMAddCompetencyContent.prototype=function(){return set(new Component,{init:function(a){this._model=a;this.competencies=[];this._checkboxComps=[]},_handleKeyDown:function(a){var b=a.which||a.keyCode;37==b&&(this.dispatch("leftkeypressed"),PM2DialogUtil.stopEvent(a));this._keyCodes||(this._keyCodes={17:!1,38:!1});this._keyCodes[b]=!0;if(this._keyCodes[17]&&this._keyCodes[38])this._keyCodes=null;else if(38==b||40==b)this._handleFocus(38==b?"up":"down"),PM2DialogUtil.stopEvent(a)},_handleFocus:function(a){0==
this._checkboxComps.length?(a=$("checkbox-list-"+this.id),0<a.childNodes.length&&a.childNodes[0].focus()):(0>this._focusedCheckboxIndex&&(this._focusedCheckboxIndex=0),"up"==a?0<=this._focusedCheckboxIndex-1&&this._focusedCheckboxIndex--:"down"==a&&this._focusedCheckboxIndex+1<this._checkboxComps.length&&this._focusedCheckboxIndex++,this._checkboxComps[this._focusedCheckboxIndex].setFocus())},setFocus:function(){this._focusedCheckboxIndex=-1;this._handleFocus()},renderHtml:function(a){a.push("\x3cdiv id \x3d '",
this.id,"' class \x3d 'add-comp-portlet' role\x3d'application'\x3e");a.push("  \x3cdiv id \x3d 'title-",this.id,"' class \x3d 'title-warn'\x3e");a.push(MSGS.PERFORMANCE_PM2_ADD_COMPETENCY_ALL_COMPETENCIES_HELP);a.push("  \x3c/div\x3e");a.push("  \x3cul id \x3d 'checkbox-list-",this.id,"' onkeydown\x3d'",this.fireCode("_handleKeyDown"),"'\x3e");a.push("  \x3c/ul\x3e");a.push("\x3c/div\x3e")},_selAllOrNot:function(a){for(var b=0;b<this._checkboxComps.length;b++)this._checkboxComps[b].setState(a?SFCheckBoxStates.CHECKBOX_CHECKED:
SFCheckBoxStates.CHECKBOX_UNCHECKED)},updateTitle:function(a,b){var c=$("title-"+this.id);c.className=b?"title-warn":"title";c.innerHTML=a||""},_isChecked:function(a){for(var b=this._model.getSelectedCompetencies(),c=b.length,e=0;e<c;e++)if(a==b[e])return!0;return!1},cleanup:function(){this.competencies=[];this.refresh()},refresh:function(a){var b,c,e=juic.createRenderContext();this.competencies=[];for(var d=0;d<this._checkboxComps.length;d++)void 0!=this._checkboxComps[d]&&this._checkboxComps[d].removeEventListener("change",
this);this._checkboxComps=[];this._compInfos=[];if(a){c=a.length;0<c?(e.push("\x3cli class\x3d'comp-sel-all'\x3e"),d=new SFCheckBoxInput("comp-item-sel-all",MSGS.COMMON_Select_All,!1,!0),d.addEventListener("change",this),d.renderHtml(e),this._checkboxComps.push(d),e.push("\x3c/li\x3e")):e.push("\x3cli tabIndex\x3d0 \x3e\x3clabel\x3e",MSGS.FB_COMP_STOCK_FACTOR_MGR_MSG_NO_DATA_FOUND,"\x3c/label\x3e\x3c/li\x3e");for(d=0;d<c;d++){var h=void 0;b=a[d];var g=juic.createRenderContext();g.push("\x3cli\x3e");
if(this._model.getRateByBehavior())if(0!=b.behaviours.length){for(var k=h=!1,l=0;l<b.behaviours.length;l++){var f=b.behaviours[l].selected;this._isChecked(b.behaviours[l].behaviorId)&&(f=!0);f?h=!0:k=!0}f=new SFCheckBoxInput("comp-item-"+b.competencyId,"",h&&!k,!0);f.addEventListener("change",this);f.renderHtml(g);this._checkboxComps.push(f);g.push("\x3cspan class\x3d'comp-behav-open' title\x3d'",juic.escapeHTML(b.competencyName),"' onclick\x3d'",this.fireCode("_onClick"),"'\x3e\x3cspan\x3e\x3c/span\x3e",
juic.escapeHTML(b.competencyName),"\x3c/a\x3e");h={compId:b.competencyId,instance:f,behaviorInfos:[]}}else g.push(b.competencyName);else l=b.selected,this._isChecked(b.competencyId)&&(l=!0),f=new SFCheckBoxInput("comp-item-"+b.competencyId,b.competencyName,l,!b.selected),b.selected||(f.addEventListener("change",this),this.competencies.push(b.competencyId),this._checkboxComps.push(f)),f.renderHtml(g),h={compId:b.competencyId,instance:f,behaviorInfos:[]};g.push("\x3c/li\x3e");if(this._model.getRateByBehavior()){g.push("\x3cli\x3e\x3cul\x3e");
for(l=0;l<b.behaviours.length;l++)k=b.behaviours[l],f=k.selected,this._isChecked(k.behaviorId)&&(f=!0),g.push("\x3cli id \x3d '",this.id,"'\x3e"),f=new SFCheckBoxInput("beha-item-"+k.behaviorId,k.behaviorName,f,!k.selected),k.selected||(f.addEventListener("change",this),this.competencies.push(k.behaviorId),this._checkboxComps.push(f)),f.renderHtml(g),g.push("\x3c/li\x3e"),h.behaviorInfos.push({behaviorId:k.behaviorId,instance:f});g.push("\x3c/li\x3e\x3c/ul\x3e")}h&&this._compInfos.push(h);b=g.join("");
e.push(b)}a=e.join("");$("checkbox-list-"+this.id).innerHTML=a}else $("checkbox-list-"+this.id).innerHTML=""},_onClick:function(a){a=a.srcElement||a.target;"SPAN"==a.nodeName&&"SPAN"==a.parentNode.nodeName&&(a=a.parentNode);if(DomUtil.hasClass(a,"comp-behav-open")||DomUtil.hasClass(a,"comp-behav-close")){var b=a.innerHTML.substring(13),c=a.parentNode.nextSibling;"block"!=c.style.display?(c.style.display="block",a.className="comp-behav-open",a.title=sfMessageFormat.format(MSGS.PERFORMANCE_PM2_COMPETENCY_FAMILY_EXPANDED_TITLE,
b)):(c.style.display="none",a.className="comp-behav-close",a.title=sfMessageFormat.format(MSGS.PERFORMANCE_PM2_COMPETENCY_FAMILY_COLLAPSED_TITLE,b));this._lastSelectedId||(this._focusedElement=a)}},handleEvent:function(a){switch(a.type){case "change":if("comp-item-sel-all"==a.value)this._selAllOrNot(a.checked),a.checked?this._model.addSelectCompetencies(this.competencies):this._model.removeSelectCompetencies(this.competencies),this._focusedCheckboxIndex=0;else{for(var b=0;b<this._checkboxComps.length;b++)if(this._checkboxComps[b]==
a.target){this._focusedCheckboxIndex=b;break}var c=a.value.substring(10);if(this._model.getRateByBehavior()){var e="beha-item"==a.value.substring(0,9),d=this._findCompetencyInforByCompId(c,e);if(d)if(e){for(var h=!1,g=!1,b=0;b<d.behaviorInfos.length;b++)d.behaviorInfos[b].instance.isChecked()?h=!0:g=!0;this._setCheckBoxState(d.instance,h,g)}else for(b=0;b<d.behaviorInfos.length;b++)d.behaviorInfos[b].instance.isEnabled()&&(d.behaviorInfos[b].instance.setState(a.checked?SFCheckBoxStates.CHECKBOX_CHECKED:
SFCheckBoxStates.CHECKBOX_UNCHECKED),a.checked?this._model.addSelectCompetency(d.behaviorInfos[b].behaviorId):this._model.removeSelectCompetency(d.behaviorInfos[b].behaviorId));b=e}else b=!0;b&&(a.checked?this._model.addSelectCompetency(c):this._model.removeSelectCompetency(c));this._updateSelectAllStatus()}}},_setCheckBoxState:function(a,b,c){b&&c?a.setState(SFCheckBoxStates.CHECKBOX_INDETERMINATE):b?a.setState(SFCheckBoxStates.CHECKBOX_CHECKED):c?a.setState(SFCheckBoxStates.CHECKBOX_UNCHECKED):
a.setState(SFCheckBoxStates.CHECKBOX_INDETERMINATE)},_findCompetencyInforByCompId:function(a,b){for(var c=0;c<this._compInfos.length;c++){var e=this._compInfos[c];if(b)for(var d=0;d<e.behaviorInfos.length;d++){if(e.behaviorInfos[d].behaviorId==a)return e}else if(e.compId==a)return e}return null},_updateSelectAllStatus:function(){if(0!=this._checkboxComps.length){for(var a=!1,b=!1,c=0;c<this._compInfos.length;c++){var e=this._compInfos[c];e.instance.isChecked()?a=!0:b=!0;for(var d=0;d<e.behaviorInfos.length;d++)e.behaviorInfos[d].instance.isChecked()?
a=!0:b=!0}this._setCheckBoxState(this._checkboxComps[0],a,b)}}})}();function TabContainerDiv(a,b){this.register();this.init(a,b)}
TabContainerDiv.prototype=function(){return set(new Component,{init:function(a,b){this._model=a;this._dao=b;this._competencyList=null;this._rightContent=new PMAddCompetencyContent(this._model);this._rightContent.addEventListener("leftkeypressed",this)},renderHtml:function(a){a.push("  \x3cdiv class \x3d 'comp-selector-cont'\x3e");a.push("\x3cdiv class\x3d'comp-list-wrap'\x3e");a.push("    \x3cdiv id\x3d'comp-list-",this.id,"' class \x3d 'comp-list-div-loading' role\x3d'application'\x3e");a.push("    \x3c/div\x3e");
a.push("    \x3c/div\x3e");a.push("    \x3cdiv id\x3d'comp-content-",this.id,"' class \x3d 'comp-cont'\x3e");this._rightContent.renderHtml(a);a.push("    \x3c/div\x3e");a.push("\x3cdiv class\x3d'clear'\x3e\x3c/div\x3e");a.push("\x3c/div\x3e")},showLoading:function(a){var b=$("comp-list-"+this.id);b.innerHTML="";b.className=a?"comp-list-div-loading":"comp-list-div"},handleEvent:function(a){switch(a.type){case "tab-allCompetency":this._rightContent.cleanup();this._rightContent.updateTitle(MSGS.PERFORMANCE_PM2_ADD_COMPETENCY_ALL_COMPETENCIES_HELP,
!0);0!=this._model.compCategoryFilters.length?(this.showLoading(!0),this._model.setCompetencyFamilies(this._model.compCategoryFilters),this.showLoading(!1),this._setCompetencyFamilies(!0,this._subjectName)):(this._dao.getCompetencyCategories(),this.showLoading(!0));break;case "tab-competencyByRole":this._rightContent.cleanup();this._rightContent.updateTitle(MSGS.PERFORMANCE_PM2_ADD_COMPETENCY_COMPETENCIES_BY_ROLE_HELP,!0);this._dao.getRoleFamilies(this._model.getFormSubjectId());this.showLoading(!0);
break;case "leftkeypressed":this.setLeftContentFocus();break;case "rightkeypressed":this.setRightContentFocus();break;case "item_click":this._rightContent.updateTitle(a.itemName,!1),a.roleId?this._dao.getCompetenciesForRole(formConfig.formDataId,a.roleId,this._model.getCompCategoryFilters(),this._model.getRateByBehavior()):this._dao.getCompetenciesForCategory(formConfig.formDataId,a.itemName,this._model.getRateByBehavior())}},cleanup:function(){this._leftList&&(this._leftList.destory(),this._leftList=
null)},loadAllCompetencies:function(){0!=this._model.compCategoryFilters.length?(this._model.setCompetencyFamilies(this._model.compCategoryFilters),this.showLoading(!1),this._setCompetencyFamilies(!0,this._subjectName)):this._dao.getCompetencyCategories()},_refreshContent:function(){this._rightContent.refresh(this._model.getCompetencies())},setRightContentFocus:function(){this._rightContent.setFocus()},setLeftContentFocus:function(){this._leftList&&this._leftList.setFocus()},updateTitle:function(){this._rightContent.updateTitle(evt.itemName,
!1)},_setCompetencyFamilies:function(a,b){this._leftList&&(this._leftList.removeEventListener("item_click",this),this._leftList.removeEventListener("rightkeypressed",this));this._competencyListEl=$("comp-list-"+this.id);var c=a?this._model.getCompetencyFamilies():this._model.getCompetencyFamiliesByRole();void 0!=c&&c&&0!=c.length?(this._leftList=a?new PMCompetencyList(c):new PMCompetencyFamiliesByRole(c,b),this._leftList.addEventListener("item_click",this),this._leftList.addEventListener("rightkeypressed",
this),this._leftList.render(this._competencyListEl)):(this._rightContent.updateTitle(MSGS.PERFORMANCE_PM2_ADD_COMPETENCY_NO_FAMILY_FOUND,!0),this._leftList=null)}})}();function PMCompetencySelector(a){this.register();this.init()}
PMCompetencySelector.prototype=function(){return set(new Component,{init:function(){this._model=new PMCompetencyModel;this._dao=new PMCompetencyDAO;this._dao.addEventListener("competencyCategoriesReady",this);this._dao.addEventListener("competenciesReady",this);this._dao.addEventListener("RoleFamiliesReady",this);this._tabComp=new SFTabBoxLayout({hasTabBackground:!0,lineBorder:!1});this._allTab=new TabContainerDiv(this._model,this._dao,this);this._roleTab=new TabContainerDiv(this._model,this._dao);
this._tabComp.addTab(MSGS.All,this._allTab);this._tabComp.addTab(MSGS.PERFORMANCE_PM2_ADD_COMPETENCY_BY_ROLE,this._roleTab);this._tabComp.changeTab(0);this._tabComp.addEventListener("action",this);this.addEventListener("tab-allCompetency",this._allTab);this.addEventListener("tab-competencyByRole",this._roleTab);this._currentTab=this._allTab;this._compRoleMap={}},setSubjectName:function(a){this._subjectName=a},getModel:function(){return this._model},setSelectSection:function(a,b){this._model.setSelectSectionId(a);
this._model.setSelectSectionIdIdx(b)},setFormDataId:function(a){this._model.setFormDataId(a)},setFormSubjectId:function(a){this._model.setFormSubjectId(a)},setCompCategoryFilters:function(a){this._model.setCompCategoryFilters(a)},setRateByBehavior:function(a){this._model.setRateByBehavior(a)},renderHtml:function(a){a.push("\x3cdiv class\x3d'comp-selector'\x3e");this._tabComp.renderHtml(a);a.push("\x3c/div\x3e")},_showLoading:function(a){this._currentTab.showLoading(a)},handleEvent:function(a){switch(a.type){case "tabContentFocussed":this._currentTab.setLeftContentFocus();
break;case "competenciesReady":this._model.setCompetencies(a.data);a.roleId&&this._updateCompetencyRoleIdMap(a.roleId,a.data);this._currentTab._refreshContent();this._currentTab.setRightContentFocus();break;case "RoleFamiliesReady":this._userRoleId=a.data&&0<a.data.length&&a.data[0]&&a.data[0].currentUsersRole?a.data[0].roles[0].id+"":void 0;this._model.setCompetencyFamiliesByRole(a.data);this._showLoading(!1);this._currentTab._setCompetencyFamilies(!1,this._subjectName);this._currentTab.setLeftContentFocus();
break;case "competencyCategoriesReady":this._model.setCompetencyFamilies(a.data);this._showLoading(!1);this._currentTab._setCompetencyFamilies(!0,this._subjectName);this._currentTab.setLeftContentFocus();break;case "rightkeypressed":this._currentTab.setRightContentFocus();break;case "action":"changeTab"==a.actionCommand&&(this._currentTab=0==a.actionData?this._allTab:this._roleTab,this.dispatch(0==a.actionData?"tab-allCompetency":"tab-competencyByRole"))}},loadAllCompetencies:function(){0!=this._model.compCategoryFilters.length?
(this._model.setCompetencyFamilies(this._model.compCategoryFilters),this._showLoading(!1),this._currentTab._setCompetencyFamilies(!0,this._subjectName)):this._dao.getCompetencyCategories()},cleanup:function(){this._currentTab.cleanup();this._model.cleanUpSelectedCompetencies()},_updateCompetencyRoleIdMap:function(a,b){for(var c=0;c<b.length;c++){var e=b[c];if(this._model.getRateByBehavior()){if(e.behaviours)for(var d=0;d<e.behaviours.length;d++)this._compRoleMap[e.behaviours[d].behaviorId+""]=a}else this._compRoleMap[e.competencyId+
""]=a}},getStateValue:function(){for(var a=!1,b=!1,c=!1,e=this._model.getSelectedCompetencies(),d=0;d<e.length;d++){var h=this._compRoleMap[e[d]];void 0===h?a=!0:this._userRoleId&&this._userRoleId===h?b=!0:c=!0}return{0:"cat",1:"otherrole",10:"userroles",11:"userotherrole",100:"cat",101:"catotherrole",110:"catuserrole",111:"catuserotherrole"}[(a?100:0)+(b?10:0)+(c?1:0)]},getSelectedCatCompetencies:function(){for(var a=[],b=this._model.getSelectedCompetencies(),c=0;c<b.length;c++){var e=b[c];void 0===
this._compRoleMap[e]&&a.push(e)}return a},getSelectedUserRoleCompetencies:function(){var a=[];if(this._userRoleId)for(var b=this._model.getSelectedCompetencies(),c=0;c<b.length;c++){var e=b[c];this._compRoleMap[e]===this._userRoleId&&a.push(e)}return a},getSelectedOtherRoleCompetencies:function(){for(var a={},b=this._model.getSelectedCompetencies(),c=0;c<b.length;c++){var e=b[c],d=this._compRoleMap[e];!d||void 0!==this._userRoleId&&d===this._userRoleId||(a[d]?a[d].push(e):a[d]=[e])}return a}})}();
function PMCompetencyFamiliesByRole(a,b){this.register();this.init(a,b)}
PMCompetencyFamiliesByRole.prototype=function(){return set(new Component,{init:function(a,b){this._families=a;this._userName=b},_onClick:function(a){var b=a.srcElement||a.target;PM2DialogUtil.stopEvent(a);"SPAN"==b.nodeName&&(b=b.parentNode);if(DomUtil.hasClass(b,"comp-family-open")||DomUtil.hasClass(b,"comp-family-close")){a=b.innerHTML.substring(19);a=a.substring(0,a.length-7);var c=b.nextSibling;"block"!=c.style.display?(c.style.display="block",b.className="comp-family-open globalTileHighlight globalTileLink",
b.title=sfMessageFormat.format(MSGS.PERFORMANCE_PM2_COMPETENCY_FAMILY_EXPANDED_TITLE,a)):(c.style.display="none",b.className="comp-family-close globalTileHighlight globalTileLink",b.title=sfMessageFormat.format(MSGS.PERFORMANCE_PM2_COMPETENCY_FAMILY_COLLAPSED_TITLE,a));this._lastSelectedId||(this._focusedElement=b)}else this._lastSelectedId&&($(this._lastSelectedId).parentNode.className=""),b.parentNode.className="globalTileHighlight selected",this._lastSelectedId=b.id,this._focusedElement=$(this._lastSelectedId),
a=b.id.substring(7),this._dispatchItemClickEvent(a,b.innerHTML)},_dispatchItemClickEvent:function(a,b){this.dispatch("item_click",{roleId:a,itemName:b})},destory:function(){this.unregister()},_getFocusableUpElement:function(a){var b=a.previousSibling;if(a&&b){if(DomUtil.hasClass(b.childNodes[0],"comp-family-close")||1==b.childNodes.length)return b.childNodes[0];ulElement=a.previousSibling.childNodes[1];len=ulElement.childNodes.length;return ulElement.childNodes[len-1].childNodes[0]}return null},_onKeyDown:function(a){var b=
a.which||a.keyCode,c;this._focusedElement||(this._focusedElement=$(this._lastSelectedId)||$(this.id).childNodes[0].childNodes[0]);13==b&&(this._onClick(a),PM2DialogUtil.stopEvent(a));38!=b&&40!=b||!this._focusedElement||("up"==(38==b?"up":"down")?(c=this._focusedElement.parentNode,DomUtil.hasClass(this._focusedElement,"comp-family-close")||DomUtil.hasClass(this._focusedElement,"comp-family-open")?this._focusedElement=this._getFocusableUpElement(c):this._focusedElement=c&&c.previousSibling?c.previousSibling.childNodes[0]:
c.parentNode.previousSibling):DomUtil.hasClass(this._focusedElement,"comp-family-close")?(c=this._focusedElement.parentNode,c.nextSibling&&(this._focusedElement=c.nextSibling.childNodes[0])):DomUtil.hasClass(this._focusedElement,"comp-family-open")?(c=this._focusedElement.nextSibling)&&c.childNodes[0]&&(this._focusedElement=c.childNodes[0].childNodes[0]):(c=this._focusedElement.parentNode)&&c.nextSibling?this._focusedElement=c.nextSibling.childNodes[0]:c.parentNode&&c.parentNode.parentNode&&c.parentNode.parentNode.nextSibling&&
(this._focusedElement=c.parentNode.parentNode.nextSibling.childNodes[0]),this._focusedElement&&this._focusedElement.focus());9==b&&(a=a.srcElement||a.target,"add-comp-list"==a.parentNode.parentNode.className||"comp-role-list"==a.parentNode.parentNode.className)&&(this._focusedElement=a);39==b&&this.dispatch("rightkeypressed")},setFocus:function(){(this._focusedElement=$(this._lastSelectedId)||$(this.id).childNodes[0].childNodes[0])&&this._focusedElement.focus()},renderHtml:function(a){var b,c=this._families.length,
e,d;a.push("\x3cul role\x3d'tree' id \x3d '",this.id,"'class\x3d'add-comp-list' onkeydown\x3d'",this.fireCode("_onKeyDown"),"' onclick\x3d'",this.fireCode("_onClick"),"'\x3e");for(var h=0;h<c;h++){b=this._families[h];if(b.currentUsersRole)a.push("\x3cli role\x3d'treeitem' aria-expanded\x3d'false'\x3e"),a.push("\x3ca href\x3d'#' id \x3d 'compId-",b.roles[0].id,"' class\x3d'globalTileLink' onmouseover\x3d'",this.fireCode("_mouseover"),"' onmouseout\x3d'",this.fireCode("_mouseout"),"'\x3e",sfMessageFormat.format(MSGS.PERFORMANCE_PM2_ADD_COMPETENCY_USER_ROLE,
juic.escapeHTML(this._userName),juic.escapeHTML(b.name)),"\x3c/a\x3e");else if(e=sfMessageFormat.format(MSGS.PERFORMANCE_PM2_COMPETENCY_FAMILY_COLLAPSED_TITLE,juic.escapeHTML(b.name)),a.push("\x3cli role\x3d'treeitem' id \x3d 'comp-family-",juic.escapeHTML(b.name),"' aria-expanded\x3d'true'\x3e"),a.push("\x3ca  href\x3d'#' class\x3d'comp-family-close globalTileLink' title\x3d'",e,"' onmouseover\x3d'",this.fireCode("_mouseover"),"' onmouseout\x3d'",this.fireCode("_mouseout"),"'\x3e\x3cspan\x3e\x3c/span\x3e\x3cspan\x3e",
juic.escapeHTML(b.name),"\x3c/span\x3e\x3c/a\x3e"),b=b.roles,e=b.length,0<e){a.push("\x3cul class\x3d'comp-role-list' role\x3d'group'\x3e");for(var g=0;g<e;g++)d=b[g],a.push("\x3cli role\x3d'treeitem' aria-expanded\x3d'false'\x3e\x3ca href\x3d'#' id\x3d'compId-",d.id,"' class\x3d'globalTileLink' onmouseover\x3d'",this.fireCode("_mouseover"),"' onmouseout\x3d'",this.fireCode("_mouseout"),"'\x3e",juic.escapeHTML(d.name),"\x3c/a\x3e\x3c/li\x3e");a.push("\x3c/ul\x3e")}a.push("\x3c/li\x3e")}a.push("\x3c/ul\x3e")},
_mouseover:function(a){a=a.srcElement||a.target;"A"==a.parentNode.tagName&&(a=a.parentNode);var b=a.parentNode;DomUtil.hasClass(b,"selected")||(DomUtil.hasClass(a,"comp-family-open")?a.className="comp-family-open globalTileHighlight globalTileLink":DomUtil.hasClass(a,"comp-family-close")?a.className="comp-family-close globalTileHighlight globalTileLink":b.className="globalTileHighlight")},_mouseout:function(a){a=a.srcElement||a.target;"A"==a.parentNode.tagName&&(a=a.parentNode);var b=a.parentNode;
DomUtil.hasClass(b,"selected")||(DomUtil.hasClass(a,"comp-family-open")?a.className="comp-family-open globalTileLink":DomUtil.hasClass(a,"comp-family-close")?a.className="comp-family-close globalTileLink":b.className="")}})}();function PMCompetencyList(a){this.register();this.init(a)}
PMCompetencyList.prototype=function(){return set(new Component,{init:function(a){this._data=a;this._subList=[]},_onKeyDown:function(a){var b=a.which||a.keyCode;this._focusedElement||(this._focusedElement=YAHOO.util.Dom.getElementsByClassName("selected","a",$(this.id))[0]);13==b&&(this._onClick(a),PM2DialogUtil.stopEvent(a));38!=b&&40!=b||!this._focusedElement||(parentElem=this._focusedElement.parentNode,"up"==(38==b?"up":"down")?parentElem&&parentElem.previousSibling&&(this._focusedElement=parentElem.previousSibling.childNodes[0]):
parentElem.nextSibling&&(this._focusedElement=parentElem.nextSibling.childNodes[0]),this._focusedElement.focus());39==b&&this.dispatch("rightkeypressed")},setFocus:function(){this._focusedElement=$(this._lastSelectedId)||YAHOO.util.Dom.getElementsByClassName("selected","a",$(this.id))[0];this._focusedElement||(this._focusedElement=$(this.id).childNodes.length?$(this.id).childNodes[0].childNodes[0]:null);this._focusedElement&&this._focusedElement.focus()},renderHtml:function(a){a.push("\x3cul role\x3d'tree' id \x3d '",
this.id,"'class\x3d'add-comp-list' onkeydown\x3d'",this.fireCode("_onKeyDown"),"' onclick\x3d'",this.fireCode("_onClick"),"'\x3e");for(var b,c=this._data,e=c.length,d=0;d<e;d++)b=juic.escapeHTML(c[d]),a.push("\x3cli role\x3d'treeitem'\x3e"),a.push("\x3ca href\x3d'#' id\x3d'compId-",b,"' class\x3d'globalTileLink' onmouseover\x3d'",this.fireCode("_mouseover"),"' onmouseout\x3d'",this.fireCode("_mouseout"),"'\x3e",b,"\x3c/a\x3e"),a.push("\x3c/li\x3e");a.push("\x3c/ul\x3e")},destory:function(){for(var a=
this._subList.length,b=0;b<a;b++)this._subList[b].destory();this._subList=[];this.unregister();try{var c=$(this.id);c.parentNode.removeChild(c)}catch(e){}},_onClick:function(a){var b=a.srcElement||a.target;PM2DialogUtil.stopEvent(a);a=b.innerHTML;this._lastSelectedId&&($(this._lastSelectedId).parentNode.className="");b.parentNode.className="globalTileHighlight selected";this._lastSelectedId=b.id;this._focusedElement=$(this._lastSelectedId);this._dispatchItemClickEvent(a)},_dispatchItemClickEvent:function(a){this.dispatch("item_click",
{itemName:a})},handleEvent:function(a){},_mouseover:function(a){a=(a.srcElement||a.target).parentNode;DomUtil.hasClass(a,"selected")||(a.className="globalTileHighlight")},_mouseout:function(a){a=(a.srcElement||a.target).parentNode;DomUtil.hasClass(a,"selected")||(a.className="")}})}();