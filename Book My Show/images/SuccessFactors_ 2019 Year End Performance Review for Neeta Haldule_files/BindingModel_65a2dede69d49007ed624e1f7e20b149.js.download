function Binding(a,b,c){this.path=b;this.model=a;this.component=c}(function(){extend(Binding,EventTarget,{getPath:function(){return this.path},getModel:function(){return this.model},update:function(){this.component.updateBinding()}})})();function BaseControl(){this.oBinding=void 0}
(function(){extend(BaseControl,juic.Component,{bindProperty:function(a,b){this.oBinding=new Binding(a,b,this);a.addBinding(this.oBinding)},unBinding:function(a,b){this.oBinding&&a.rmBinding(this.oBinding)},updateBinding:function(){void 0!=this.oBinding&&(this.oBinding.getModel(),this.oBinding.getPath())},updateModel:function(){}})})();function JsonModel(a){this.aBindings={};this.init(a)}
(function(){extend(JsonModel,EventTarget,{init:function(a){this.mData=a},_eq:function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;var f=Object.prototype.toString.call(a);if(f!=Object.prototype.toString.call(b))return!1;switch(f){case "[object String]":return a==String(b);case "[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case "[object Date]":case "[object Boolean]":return+a==+b;case "[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==
b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var e=c.length;e--;)if(c[e]==a)return d[e]==b;var e=a.constructor,h=b.constructor;if(e!==h&&!("function"===typeof e&&e instanceof e&&"function"===typeof h&&h instanceof h))return!1;c.push(a);d.push(b);e=0;h=!0;if("[object Array]"==f){if(e=a.length,h=e==b.length)for(;e--&&(h=this._eq(a[e],b[e],c,d)););}else{for(var g in a)if(Object.prototype.hasOwnProperty.call(a,g)&&(e++,!(h=Object.prototype.hasOwnProperty.call(b,
g)&&this._eq(a[g],b[g],c,d))))break;if(h){for(g in b)if(Object.prototype.hasOwnProperty.call(b,g)&&!e--)break;h=!e}}c.pop();d.pop();return h},isEqual:function(a,b){return this._eq(a,b,[],[])},addBinding:function(a){var b=a.getPath();void 0==this.aBindings[b]?(this.aBindings[b]=[],this.aBindings[b].push(a)):this.aBindings[b]instanceof Array&&this.aBindings[b].push(a)},rmBinding:function(a){var b=a.getPath();if(this.aBindings.hasOwnProperty(b)){for(var c=this.aBindings[b],d=0,f=c.length;d<f;d++)if(this.isEqual(a,
c[d])){c.splice(d,1);break}0==this.aBindings[b].length&&(this.aBindings[b]=void 0,delete this.aBindings[b])}},checkUpdate:function(a){if(this.aBindings.hasOwnProperty(a)){a=this.aBindings[a];for(var b=0,c=a.length;b<c;b++)a[b].update()}},getData:function(a){return this._getObject(a)},traverse:function(a,b,c,d){var f=this.getData(a);c=void 0==c?[]:c;var e=void 0==d?{}:d,h=b.join(", ");switch(Object.prototype.toString.call(f)){case "[object Array]":d=f.length;for(f=0;f<d;f++){var g=a+"/"+f;this.traverse(g,
b,c,e)}break;case "[object Object]":for(var k in f)-1!=h.indexOf(k)&&(g=f[k],null!=g&&(d&&1==d.withPath&&(g={_path:a+"/"+k,_val:g}),c.push(g))),f.hasOwnProperty(k)&&"object"==typeof f[k]&&(g=a+"/"+k,this.traverse(g,b,c,e))}return c},setData:function(a,b){var c=a.substring(0,a.lastIndexOf("/")),d=a.substring(a.lastIndexOf("/")+1),c=this._getObject(c),f=!1;c&&(f=!this.isEqual(c[d],b),c[d]=b);f&&this.checkUpdate(a)},_getObject:function(a){a=a.split("/");var b=this.mData,c=0;for(a[0]||c++;b&&a[c];)b=
b[a[c]],c++;return b}})})();